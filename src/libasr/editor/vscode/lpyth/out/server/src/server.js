"use strict";var zl=Object.create;var ua=Object.defineProperty;var Bl=Object.getOwnPropertyDescriptor;var Gl=Object.getOwnPropertyNames;var Ul=Object.getPrototypeOf,Vl=Object.prototype.hasOwnProperty;var O=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Xl=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Gl(t))!Vl.call(e,i)&&i!==n&&ua(e,i,{get:()=>t[i],enumerable:!(r=Bl(t,i))||r.enumerable});return e};var ji=(e,t,n)=>(n=e!=null?zl(Ul(e)):{},Xl(t||!e||!e.__esModule?ua(n,"default",{value:e,enumerable:!0}):n,e));var mr=O(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.thenable=ge.typedArray=ge.stringArray=ge.array=ge.func=ge.error=ge.number=ge.string=ge.boolean=void 0;function Jl(e){return e===!0||e===!1}ge.boolean=Jl;function la(e){return typeof e=="string"||e instanceof String}ge.string=la;function Kl(e){return typeof e=="number"||e instanceof Number}ge.number=Kl;function Ql(e){return e instanceof Error}ge.error=Ql;function da(e){return typeof e=="function"}ge.func=da;function fa(e){return Array.isArray(e)}ge.array=fa;function Yl(e){return fa(e)&&e.every(t=>la(t))}ge.stringArray=Yl;function Zl(e,t){return Array.isArray(e)&&e.every(t)}ge.typedArray=Zl;function ed(e){return e&&da(e.then)}ge.thenable=ed});var bt=O(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});var Ii;function Fi(){if(Ii===void 0)throw new Error("No runtime abstraction layer installed");return Ii}(function(e){function t(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Ii=n}e.install=t})(Fi||(Fi={}));Li.default=Fi});var xi=O(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.Disposable=void 0;var td;(function(e){function t(n){return{dispose:n}}e.create=t})(td=Fn.Disposable||(Fn.Disposable={}))});var ha=O(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.AbstractMessageBuffer=void 0;var nd=13,rd=10,id=`\r
`,Ai=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){let n=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let t=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){let h=this._chunks[n];r=0;t:for(;r<h.length;){switch(h[r]){case nd:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case rd:switch(t){case 1:t=2;break;case 3:t=4,r++;break e;default:t=0}break;default:t=0}r++}i+=h.byteLength,n++}if(t!==4)return;let s=this._read(i+r),u=new Map,d=this.toString(s,"ascii").split(id);if(d.length<2)return u;for(let h=0;h<d.length-2;h++){let p=d[h],D=p.indexOf(":");if(D===-1)throw new Error("Message header must separate key and value using :");let P=p.substr(0,D),R=p.substr(D+1).trim();u.set(P,R)}return u}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(s)}if(this._chunks[0].byteLength>t){let s=this._chunks[0],u=this.asNative(s,t);return this._chunks[0]=s.slice(t),this._totalLength-=t,u}let n=this.allocNative(t),r=0,i=0;for(;t>0;){let s=this._chunks[i];if(s.byteLength>t){let u=s.slice(0,t);n.set(u,r),r+=t,this._chunks[i]=s.slice(t),this._totalLength-=t,t-=t}else n.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,t-=s.byteLength}return n}};pr.AbstractMessageBuffer=Ai});var pa=O(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});var od=bt(),ga=require("util"),Ut=xi(),sd=ha(),fn=class extends sd.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return fn.emptyBuffer}fromString(t,n){return Buffer.from(t,n)}toString(t,n){return t instanceof Buffer?t.toString(n):new ga.TextDecoder(n).decode(t)}asNative(t,n){return n===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,n):Buffer.from(t,0,n)}allocNative(t){return Buffer.allocUnsafe(t)}};fn.emptyBuffer=Buffer.allocUnsafe(0);var Wi=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Ut.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Ut.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Ut.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),Ut.Disposable.create(()=>this.stream.off("data",t))}},Hi=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Ut.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Ut.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Ut.Disposable.create(()=>this.stream.off("end",t))}write(t,n){return new Promise((r,i)=>{let s=u=>{u==null?r():i(u)};typeof t=="string"?this.stream.write(t,n,s):this.stream.write(t,s)})}end(){this.stream.end()}},ma=Object.freeze({messageBuffer:Object.freeze({create:e=>new fn(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new ga.TextDecoder(t.charset).decode(e)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:e=>new Wi(e),asWritableStream:e=>new Hi(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){let r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){let n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){let r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function $i(){return ma}(function(e){function t(){od.default.install(ma)}e.install=t})($i||($i={}));zi.default=$i});var hn=O(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.stringArray=qe.array=qe.func=qe.error=qe.number=qe.string=qe.boolean=void 0;function ad(e){return e===!0||e===!1}qe.boolean=ad;function ya(e){return typeof e=="string"||e instanceof String}qe.string=ya;function cd(e){return typeof e=="number"||e instanceof Number}qe.number=cd;function ud(e){return e instanceof Error}qe.error=ud;function ld(e){return typeof e=="function"}qe.func=ld;function va(e){return Array.isArray(e)}qe.array=va;function dd(e){return va(e)&&e.every(t=>ya(t))}qe.stringArray=dd});var ho=O(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.Message=x.NotificationType9=x.NotificationType8=x.NotificationType7=x.NotificationType6=x.NotificationType5=x.NotificationType4=x.NotificationType3=x.NotificationType2=x.NotificationType1=x.NotificationType0=x.NotificationType=x.RequestType9=x.RequestType8=x.RequestType7=x.RequestType6=x.RequestType5=x.RequestType4=x.RequestType3=x.RequestType2=x.RequestType1=x.RequestType=x.RequestType0=x.AbstractMessageSignature=x.ParameterStructures=x.ResponseError=x.ErrorCodes=void 0;var Vt=hn(),ba;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3})(ba=x.ErrorCodes||(x.ErrorCodes={}));var Ln=class extends Error{constructor(t,n,r){super(n),this.code=Vt.number(t)?t:ba.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,Ln.prototype)}toJson(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),t}};x.ResponseError=Ln;var De=class{constructor(t){this.kind=t}static is(t){return t===De.auto||t===De.byName||t===De.byPosition}toString(){return this.kind}};x.ParameterStructures=De;De.auto=new De("auto");De.byPosition=new De("byPosition");De.byName=new De("byName");var ae=class{constructor(t,n){this.method=t,this.numberOfParams=n}get parameterStructures(){return De.auto}};x.AbstractMessageSignature=ae;var Bi=class extends ae{constructor(t){super(t,0)}};x.RequestType0=Bi;var Gi=class extends ae{constructor(t,n=De.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};x.RequestType=Gi;var Ui=class extends ae{constructor(t,n=De.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};x.RequestType1=Ui;var Vi=class extends ae{constructor(t){super(t,2)}};x.RequestType2=Vi;var Xi=class extends ae{constructor(t){super(t,3)}};x.RequestType3=Xi;var Ji=class extends ae{constructor(t){super(t,4)}};x.RequestType4=Ji;var Ki=class extends ae{constructor(t){super(t,5)}};x.RequestType5=Ki;var Qi=class extends ae{constructor(t){super(t,6)}};x.RequestType6=Qi;var Yi=class extends ae{constructor(t){super(t,7)}};x.RequestType7=Yi;var Zi=class extends ae{constructor(t){super(t,8)}};x.RequestType8=Zi;var eo=class extends ae{constructor(t){super(t,9)}};x.RequestType9=eo;var to=class extends ae{constructor(t,n=De.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};x.NotificationType=to;var no=class extends ae{constructor(t){super(t,0)}};x.NotificationType0=no;var ro=class extends ae{constructor(t,n=De.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};x.NotificationType1=ro;var io=class extends ae{constructor(t){super(t,2)}};x.NotificationType2=io;var oo=class extends ae{constructor(t){super(t,3)}};x.NotificationType3=oo;var so=class extends ae{constructor(t){super(t,4)}};x.NotificationType4=so;var ao=class extends ae{constructor(t){super(t,5)}};x.NotificationType5=ao;var co=class extends ae{constructor(t){super(t,6)}};x.NotificationType6=co;var uo=class extends ae{constructor(t){super(t,7)}};x.NotificationType7=uo;var lo=class extends ae{constructor(t){super(t,8)}};x.NotificationType8=lo;var fo=class extends ae{constructor(t){super(t,9)}};x.NotificationType9=fo;var fd;(function(e){function t(i){let s=i;return s&&Vt.string(s.method)&&(Vt.string(s.id)||Vt.number(s.id))}e.isRequest=t;function n(i){let s=i;return s&&Vt.string(s.method)&&i.id===void 0}e.isNotification=n;function r(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(Vt.string(s.id)||Vt.number(s.id)||s.id===null)}e.isResponse=r})(fd=x.Message||(x.Message={}))});var mo=O(_t=>{"use strict";var _a;Object.defineProperty(_t,"__esModule",{value:!0});_t.LRUCache=_t.LinkedMap=_t.Touch=void 0;var Oe;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(Oe=_t.Touch||(_t.Touch={}));var yr=class{constructor(){this[_a]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,n=Oe.None){let r=this._map.get(t);if(!!r)return n!==Oe.None&&this.touch(r,n),r.value}set(t,n,r=Oe.None){let i=this._map.get(t);if(i)i.value=n,r!==Oe.None&&this.touch(i,r);else{switch(i={key:t,value:n,next:void 0,previous:void 0},r){case Oe.None:this.addItemLast(i);break;case Oe.First:this.addItemFirst(i);break;case Oe.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){let n=this._map.get(t);if(!!n)return this._map.delete(t),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,n){let r=this._state,i=this._head;for(;i;){if(n?t.bind(n)(i.value,i.key,this):t(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(_a=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>t;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{let n=t.next,r=t.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}t.next=void 0,t.previous=void 0,this._state++}touch(t,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Oe.First&&n!==Oe.Last)){if(n===Oe.First){if(t===this._head)return;let r=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(n===Oe.Last){if(t===this._tail)return;let r=t.next,i=t.previous;t===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){let t=[];return this.forEach((n,r)=>{t.push([r,n])}),t}fromJSON(t){this.clear();for(let[n,r]of t)this.set(n,r)}};_t.LinkedMap=yr;var go=class extends yr{constructor(t,n=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,n=Oe.AsNew){return super.get(t,n)}peek(t){return super.get(t,Oe.None)}set(t,n){return super.set(t,n,Oe.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};_t.LRUCache=go});var mn=O(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.Emitter=Xt.Event=void 0;var hd=bt(),gd;(function(e){let t={dispose(){}};e.None=function(){return t}})(gd=Xt.Event||(Xt.Event={}));var po=class{add(t,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(t,n)})}remove(t,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===t)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,u=r.length;s<u;s++)try{n.push(r[s].apply(i[s],t))}catch(d){(0,hd.default)().console.error(d)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},gn=class{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,n,r)=>{this._callbacks||(this._callbacks=new po),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,n);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(t,n),i.dispose=gn._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Xt.Emitter=gn;gn._noop=function(){}});var _o=O(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.CancellationTokenSource=Jt.CancellationToken=void 0;var md=bt(),pd=hn(),yo=mn(),vo;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:yo.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:yo.Event.None});function t(n){let r=n;return r&&(r===e.None||r===e.Cancelled||pd.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.is=t})(vo=Jt.CancellationToken||(Jt.CancellationToken={}));var yd=Object.freeze(function(e,t){let n=(0,md.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}),vr=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?yd:(this._emitter||(this._emitter=new yo.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},bo=class{get token(){return this._token||(this._token=new vr),this._token}cancel(){this._token?this._token.cancel():this._token=vo.Cancelled}dispose(){this._token?this._token instanceof vr&&this._token.dispose():this._token=vo.None}};Jt.CancellationTokenSource=bo});var Da=O(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.ReadableStreamMessageReader=Dt.AbstractMessageReader=Dt.MessageReader=void 0;var Ro=bt(),pn=hn(),Do=mn(),vd;(function(e){function t(n){let r=n;return r&&pn.func(r.listen)&&pn.func(r.dispose)&&pn.func(r.onError)&&pn.func(r.onClose)&&pn.func(r.onPartialMessage)}e.is=t})(vd=Dt.MessageReader||(Dt.MessageReader={}));var br=class{constructor(){this.errorEmitter=new Do.Emitter,this.closeEmitter=new Do.Emitter,this.partialMessageEmitter=new Do.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t)}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${pn.string(t.message)?t.message:"unknown"}`)}};Dt.AbstractMessageReader=br;var wo;(function(e){function t(n){let r,i,s,u=new Map,d,h=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(s=n.contentDecoder,u.set(s.name,s)),n.contentDecoders!==void 0)for(let p of n.contentDecoders)u.set(p.name,p);if(n.contentTypeDecoder!==void 0&&(d=n.contentTypeDecoder,h.set(d.name,d)),n.contentTypeDecoders!==void 0)for(let p of n.contentTypeDecoders)h.set(p.name,p)}return d===void 0&&(d=(0,Ro.default)().applicationJson.decoder,h.set(d.name,d)),{charset:r,contentDecoder:s,contentDecoders:u,contentTypeDecoder:d,contentTypeDecoders:h}}e.fromOptions=t})(wo||(wo={}));var ko=class extends br{constructor(t,n){super(),this.readable=t,this.options=wo.fromOptions(n),this.buffer=(0,Ro.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(t){this._partialMessageTimeout=t}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(t){for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let u=parseInt(s);if(isNaN(u))throw new Error("Content-Length value must be a number.");this.nextMessageLength=u}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(n):r=Promise.resolve(n),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Ro.default)().timer.setTimeout((t,n)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Dt.ReadableStreamMessageReader=ko});var Ra=O(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.Semaphore=void 0;var bd=bt(),To=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((n,r)=>{this._waiting.push({thunk:t,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,bd.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=t.thunk();n instanceof Promise?n.then(r=>{this._active--,t.resolve(r),this.runNext()},r=>{this._active--,t.reject(r),this.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(n){this._active--,t.reject(n),this.runNext()}}};_r.Semaphore=To});var Sa=O(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.WriteableStreamMessageWriter=Rt.AbstractMessageWriter=Rt.MessageWriter=void 0;var wa=bt(),xn=hn(),_d=Ra(),ka=mn(),Dd="Content-Length: ",Ta=`\r
`,Rd;(function(e){function t(n){let r=n;return r&&xn.func(r.dispose)&&xn.func(r.onClose)&&xn.func(r.onError)&&xn.func(r.write)}e.is=t})(Rd=Rt.MessageWriter||(Rt.MessageWriter={}));var Dr=class{constructor(){this.errorEmitter=new ka.Emitter,this.closeEmitter=new ka.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t,n,r){this.errorEmitter.fire([this.asError(t),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${xn.string(t.message)?t.message:"unknown"}`)}};Rt.AbstractMessageWriter=Dr;var So;(function(e){function t(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,wa.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,wa.default)().applicationJson.encoder}}e.fromOptions=t})(So||(So={}));var Po=class extends Dr{constructor(t,n){super(),this.writable=t,this.options=So.fromOptions(n),this.errorCount=0,this.writeSemaphore=new _d.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Dd,r.byteLength.toString(),Ta),i.push(Ta),this.doWrite(t,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(t,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,t),Promise.reject(i)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){this.writable.end()}};Rt.WriteableStreamMessageWriter=Po});var Na=O(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.createMessageConnection=W.ConnectionOptions=W.CancellationStrategy=W.CancellationSenderStrategy=W.CancellationReceiverStrategy=W.ConnectionStrategy=W.ConnectionError=W.ConnectionErrors=W.LogTraceNotification=W.SetTraceNotification=W.TraceFormat=W.TraceValues=W.Trace=W.NullLogger=W.ProgressType=W.ProgressToken=void 0;var Pa=bt(),ve=hn(),H=ho(),Ca=mo(),An=mn(),Co=_o(),Hn;(function(e){e.type=new H.NotificationType("$/cancelRequest")})(Hn||(Hn={}));var qa;(function(e){function t(n){return typeof n=="string"||typeof n=="number"}e.is=t})(qa=W.ProgressToken||(W.ProgressToken={}));var Wn;(function(e){e.type=new H.NotificationType("$/progress")})(Wn||(Wn={}));var qo=class{constructor(){}};W.ProgressType=qo;var Eo;(function(e){function t(n){return ve.func(n)}e.is=t})(Eo||(Eo={}));W.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Z;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"})(Z=W.Trace||(W.Trace={}));var wd;(function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose"})(wd=W.TraceValues||(W.TraceValues={}));(function(e){function t(r){if(!ve.string(r))return e.Off;switch(r=r.toLowerCase(),r){case"off":return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function n(r){switch(r){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}e.toString=n})(Z=W.Trace||(W.Trace={}));var Ye;(function(e){e.Text="text",e.JSON="json"})(Ye=W.TraceFormat||(W.TraceFormat={}));(function(e){function t(n){return ve.string(n)?(n=n.toLowerCase(),n==="json"?e.JSON:e.Text):e.Text}e.fromString=t})(Ye=W.TraceFormat||(W.TraceFormat={}));var Ea;(function(e){e.type=new H.NotificationType("$/setTrace")})(Ea=W.SetTraceNotification||(W.SetTraceNotification={}));var Oo;(function(e){e.type=new H.NotificationType("$/logTrace")})(Oo=W.LogTraceNotification||(W.LogTraceNotification={}));var Rr;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"})(Rr=W.ConnectionErrors||(W.ConnectionErrors={}));var Ot=class extends Error{constructor(t,n){super(n),this.code=t,Object.setPrototypeOf(this,Ot.prototype)}};W.ConnectionError=Ot;var Oa;(function(e){function t(n){let r=n;return r&&ve.func(r.cancelUndispatched)}e.is=t})(Oa=W.ConnectionStrategy||(W.ConnectionStrategy={}));var No;(function(e){e.Message=Object.freeze({createCancellationTokenSource(n){return new Co.CancellationTokenSource}});function t(n){let r=n;return r&&ve.func(r.createCancellationTokenSource)}e.is=t})(No=W.CancellationReceiverStrategy||(W.CancellationReceiverStrategy={}));var Mo;(function(e){e.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Hn.type,{id:r})},cleanup(n){}});function t(n){let r=n;return r&&ve.func(r.sendCancellation)&&ve.func(r.cleanup)}e.is=t})(Mo=W.CancellationSenderStrategy||(W.CancellationSenderStrategy={}));var jo;(function(e){e.Message=Object.freeze({receiver:No.Message,sender:Mo.Message});function t(n){let r=n;return r&&No.is(r.receiver)&&Mo.is(r.sender)}e.is=t})(jo=W.CancellationStrategy||(W.CancellationStrategy={}));var kd;(function(e){function t(n){let r=n;return r&&(jo.is(r.cancellationStrategy)||Oa.is(r.connectionStrategy))}e.is=t})(kd=W.ConnectionOptions||(W.ConnectionOptions={}));var Ze;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"})(Ze||(Ze={}));function Td(e,t,n,r){let i=n!==void 0?n:W.NullLogger,s=0,u=0,d=0,h="2.0",p,D=new Map,P,R=new Map,C=new Map,E,I=new Ca.LinkedMap,F=new Map,j=new Set,v=new Map,y=Z.Off,k=Ye.Text,A,Q=Ze.New,ee=new An.Emitter,_e=new An.Emitter,Pe=new An.Emitter,Ae=new An.Emitter,Ve=new An.Emitter,We=r&&r.cancellationStrategy?r.cancellationStrategy:jo.Message;function Xe(f){if(f===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+f.toString()}function St(f){return f===null?"res-unknown-"+(++d).toString():"res-"+f.toString()}function Pt(){return"not-"+(++u).toString()}function an(f,S){H.Message.isRequest(S)?f.set(Xe(S.id),S):H.Message.isResponse(S)?f.set(St(S.id),S):f.set(Pt(),S)}function Mn(f){}function cn(){return Q===Ze.Listening}function at(){return Q===Ze.Closed}function Je(){return Q===Ze.Disposed}function Ct(){(Q===Ze.New||Q===Ze.Listening)&&(Q=Ze.Closed,_e.fire(void 0))}function ct(f){ee.fire([f,void 0,void 0])}function Di(f){ee.fire(f)}e.onClose(Ct),e.onError(ct),t.onClose(Ct),t.onError(Di);function dr(){E||I.size===0||(E=(0,Pa.default)().timer.setImmediate(()=>{E=void 0,Ri()}))}function Ri(){if(I.size===0)return;let f=I.shift();try{H.Message.isRequest(f)?ki(f):H.Message.isNotification(f)?Si(f):H.Message.isResponse(f)?Ti(f):Pi(f)}finally{dr()}}let wi=f=>{try{if(H.Message.isNotification(f)&&f.method===Hn.type.method){let S=f.params.id,N=Xe(S),L=I.get(N);if(H.Message.isRequest(L)){let ne=r?.connectionStrategy,ce=ne&&ne.cancelUndispatched?ne.cancelUndispatched(L,Mn):void 0;if(ce&&(ce.error!==void 0||ce.result!==void 0)){I.delete(N),v.delete(S),ce.id=L.id,un(ce,f.method,Date.now()),t.write(ce).catch(()=>i.error("Sending response for canceled message failed."));return}}let te=v.get(S);if(te!==void 0){te.cancel(),jn(f);return}else j.add(S)}an(I,f)}finally{dr()}};function ki(f){if(Je())return;function S(G,ie,X){let fe={jsonrpc:h,id:f.id};G instanceof H.ResponseError?fe.error=G.toJson():fe.result=G===void 0?null:G,un(fe,ie,X),t.write(fe).catch(()=>i.error("Sending response failed."))}function N(G,ie,X){let fe={jsonrpc:h,id:f.id,error:G.toJson()};un(fe,ie,X),t.write(fe).catch(()=>i.error("Sending response failed."))}function L(G,ie,X){G===void 0&&(G=null);let fe={jsonrpc:h,id:f.id,result:G};un(fe,ie,X),t.write(fe).catch(()=>i.error("Sending response failed."))}Ei(f);let te=D.get(f.method),ne,ce;te&&(ne=te.type,ce=te.handler);let he=Date.now();if(ce||p){let G=f.id??String(Date.now()),ie=We.receiver.createCancellationTokenSource(G);f.id!==null&&j.has(f.id)&&ie.cancel(),f.id!==null&&v.set(G,ie);try{let X;if(ce)if(f.params===void 0){if(ne!==void 0&&ne.numberOfParams!==0){N(new H.ResponseError(H.ErrorCodes.InvalidParams,`Request ${f.method} defines ${ne.numberOfParams} params but received none.`),f.method,he);return}X=ce(ie.token)}else if(Array.isArray(f.params)){if(ne!==void 0&&ne.parameterStructures===H.ParameterStructures.byName){N(new H.ResponseError(H.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by name but received parameters by position`),f.method,he);return}X=ce(...f.params,ie.token)}else{if(ne!==void 0&&ne.parameterStructures===H.ParameterStructures.byPosition){N(new H.ResponseError(H.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by position but received parameters by name`),f.method,he);return}X=ce(f.params,ie.token)}else p&&(X=p(f.method,f.params,ie.token));let fe=X;X?fe.then?fe.then(Ce=>{v.delete(G),S(Ce,f.method,he)},Ce=>{v.delete(G),Ce instanceof H.ResponseError?N(Ce,f.method,he):Ce&&ve.string(Ce.message)?N(new H.ResponseError(H.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${Ce.message}`),f.method,he):N(new H.ResponseError(H.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,he)}):(v.delete(G),S(X,f.method,he)):(v.delete(G),L(X,f.method,he))}catch(X){v.delete(G),X instanceof H.ResponseError?S(X,f.method,he):X&&ve.string(X.message)?N(new H.ResponseError(H.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${X.message}`),f.method,he):N(new H.ResponseError(H.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,he)}}else N(new H.ResponseError(H.ErrorCodes.MethodNotFound,`Unhandled method ${f.method}`),f.method,he)}function Ti(f){if(!Je())if(f.id===null)f.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(f.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let S=f.id,N=F.get(S);if(Oi(f,N),N!==void 0){F.delete(S);try{if(f.error){let L=f.error;N.reject(new H.ResponseError(L.code,L.message,L.data))}else if(f.result!==void 0)N.resolve(f.result);else throw new Error("Should never happen.")}catch(L){L.message?i.error(`Response handler '${N.method}' failed with message: ${L.message}`):i.error(`Response handler '${N.method}' failed unexpectedly.`)}}}}function Si(f){if(Je())return;let S,N;if(f.method===Hn.type.method){let L=f.params.id;j.delete(L),jn(f);return}else{let L=R.get(f.method);L&&(N=L.handler,S=L.type)}if(N||P)try{if(jn(f),N)if(f.params===void 0)S!==void 0&&S.numberOfParams!==0&&S.parameterStructures!==H.ParameterStructures.byName&&i.error(`Notification ${f.method} defines ${S.numberOfParams} params but received none.`),N();else if(Array.isArray(f.params)){let L=f.params;f.method===Wn.type.method&&L.length===2&&qa.is(L[0])?N({token:L[0],value:L[1]}):(S!==void 0&&(S.parameterStructures===H.ParameterStructures.byName&&i.error(`Notification ${f.method} defines parameters by name but received parameters by position`),S.numberOfParams!==f.params.length&&i.error(`Notification ${f.method} defines ${S.numberOfParams} params but received ${L.length} arguments`)),N(...L))}else S!==void 0&&S.parameterStructures===H.ParameterStructures.byPosition&&i.error(`Notification ${f.method} defines parameters by position but received parameters by name`),N(f.params);else P&&P(f.method,f.params)}catch(L){L.message?i.error(`Notification handler '${f.method}' failed with message: ${L.message}`):i.error(`Notification handler '${f.method}' failed unexpectedly.`)}else Pe.fire(f)}function Pi(f){if(!f){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(f,null,4)}`);let S=f;if(ve.string(S.id)||ve.number(S.id)){let N=S.id,L=F.get(N);L&&L.reject(new Error("The received response has neither a result nor an error property."))}}function He(f){if(f!=null)switch(y){case Z.Verbose:return JSON.stringify(f,null,4);case Z.Compact:return JSON.stringify(f);default:return}}function Ci(f){if(!(y===Z.Off||!A))if(k===Ye.Text){let S;(y===Z.Verbose||y===Z.Compact)&&f.params&&(S=`Params: ${He(f.params)}

`),A.log(`Sending request '${f.method} - (${f.id})'.`,S)}else qt("send-request",f)}function qi(f){if(!(y===Z.Off||!A))if(k===Ye.Text){let S;(y===Z.Verbose||y===Z.Compact)&&(f.params?S=`Params: ${He(f.params)}

`:S=`No parameters provided.

`),A.log(`Sending notification '${f.method}'.`,S)}else qt("send-notification",f)}function un(f,S,N){if(!(y===Z.Off||!A))if(k===Ye.Text){let L;(y===Z.Verbose||y===Z.Compact)&&(f.error&&f.error.data?L=`Error data: ${He(f.error.data)}

`:f.result?L=`Result: ${He(f.result)}

`:f.error===void 0&&(L=`No result returned.

`)),A.log(`Sending response '${S} - (${f.id})'. Processing request took ${Date.now()-N}ms`,L)}else qt("send-response",f)}function Ei(f){if(!(y===Z.Off||!A))if(k===Ye.Text){let S;(y===Z.Verbose||y===Z.Compact)&&f.params&&(S=`Params: ${He(f.params)}

`),A.log(`Received request '${f.method} - (${f.id})'.`,S)}else qt("receive-request",f)}function jn(f){if(!(y===Z.Off||!A||f.method===Oo.type.method))if(k===Ye.Text){let S;(y===Z.Verbose||y===Z.Compact)&&(f.params?S=`Params: ${He(f.params)}

`:S=`No parameters provided.

`),A.log(`Received notification '${f.method}'.`,S)}else qt("receive-notification",f)}function Oi(f,S){if(!(y===Z.Off||!A))if(k===Ye.Text){let N;if((y===Z.Verbose||y===Z.Compact)&&(f.error&&f.error.data?N=`Error data: ${He(f.error.data)}

`:f.result?N=`Result: ${He(f.result)}

`:f.error===void 0&&(N=`No result returned.

`)),S){let L=f.error?` Request failed: ${f.error.message} (${f.error.code}).`:"";A.log(`Received response '${S.method} - (${f.id})' in ${Date.now()-S.timerStart}ms.${L}`,N)}else A.log(`Received response ${f.id} without active response promise.`,N)}else qt("receive-response",f)}function qt(f,S){if(!A||y===Z.Off)return;let N={isLSPMessage:!0,type:f,message:S,timestamp:Date.now()};A.log(N)}function Bt(){if(at())throw new Ot(Rr.Closed,"Connection is closed.");if(Je())throw new Ot(Rr.Disposed,"Connection is disposed.")}function Ni(){if(cn())throw new Ot(Rr.AlreadyListening,"Connection is already listening")}function Mi(){if(!cn())throw new Error("Call listen() first.")}function Gt(f){return f===void 0?null:f}function ln(f){if(f!==null)return f}function fr(f){return f!=null&&!Array.isArray(f)&&typeof f=="object"}function In(f,S){switch(f){case H.ParameterStructures.auto:return fr(S)?ln(S):[Gt(S)];case H.ParameterStructures.byName:if(!fr(S))throw new Error("Received parameters by name but param is not an object literal.");return ln(S);case H.ParameterStructures.byPosition:return[Gt(S)];default:throw new Error(`Unknown parameter structure ${f.toString()}`)}}function hr(f,S){let N,L=f.numberOfParams;switch(L){case 0:N=void 0;break;case 1:N=In(f.parameterStructures,S[0]);break;default:N=[];for(let te=0;te<S.length&&te<L;te++)N.push(Gt(S[te]));if(S.length<L)for(let te=S.length;te<L;te++)N.push(null);break}return N}let Et={sendNotification:(f,...S)=>{Bt();let N,L;if(ve.string(f)){N=f;let ne=S[0],ce=0,he=H.ParameterStructures.auto;H.ParameterStructures.is(ne)&&(ce=1,he=ne);let G=S.length,ie=G-ce;switch(ie){case 0:L=void 0;break;case 1:L=In(he,S[ce]);break;default:if(he===H.ParameterStructures.byName)throw new Error(`Received ${ie} parameters for 'by Name' notification parameter structure.`);L=S.slice(ce,G).map(X=>Gt(X));break}}else{let ne=S;N=f.method,L=hr(f,ne)}let te={jsonrpc:h,method:N,params:L};return qi(te),t.write(te).catch(()=>i.error("Sending notification failed."))},onNotification:(f,S)=>{Bt();let N;return ve.func(f)?P=f:S&&(ve.string(f)?(N=f,R.set(f,{type:void 0,handler:S})):(N=f.method,R.set(f.method,{type:f,handler:S}))),{dispose:()=>{N!==void 0?R.delete(N):P=void 0}}},onProgress:(f,S,N)=>{if(C.has(S))throw new Error(`Progress handler for token ${S} already registered`);return C.set(S,N),{dispose:()=>{C.delete(S)}}},sendProgress:(f,S,N)=>Et.sendNotification(Wn.type,{token:S,value:N}),onUnhandledProgress:Ae.event,sendRequest:(f,...S)=>{Bt(),Mi();let N,L,te;if(ve.string(f)){N=f;let G=S[0],ie=S[S.length-1],X=0,fe=H.ParameterStructures.auto;H.ParameterStructures.is(G)&&(X=1,fe=G);let Ce=S.length;Co.CancellationToken.is(ie)&&(Ce=Ce-1,te=ie);let yt=Ce-X;switch(yt){case 0:L=void 0;break;case 1:L=In(fe,S[X]);break;default:if(fe===H.ParameterStructures.byName)throw new Error(`Received ${yt} parameters for 'by Name' request parameter structure.`);L=S.slice(X,Ce).map(ut=>Gt(ut));break}}else{let G=S;N=f.method,L=hr(f,G);let ie=f.numberOfParams;te=Co.CancellationToken.is(G[ie])?G[ie]:void 0}let ne=s++,ce;return te&&(ce=te.onCancellationRequested(()=>{let G=We.sender.sendCancellation(Et,ne);return G===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${ne}`),Promise.resolve()):G.catch(()=>{i.log(`Sending cancellation messages for id ${ne} failed`)})})),new Promise((G,ie)=>{let X={jsonrpc:h,id:ne,method:N,params:L},fe=ut=>{G(ut),We.sender.cleanup(ne),ce?.dispose()},Ce=ut=>{ie(ut),We.sender.cleanup(ne),ce?.dispose()},yt={method:N,timerStart:Date.now(),resolve:fe,reject:Ce};Ci(X);try{t.write(X).catch(()=>i.error("Sending request failed."))}catch(ut){yt.reject(new H.ResponseError(H.ErrorCodes.MessageWriteError,ut.message?ut.message:"Unknown reason")),yt=null}yt&&F.set(ne,yt)})},onRequest:(f,S)=>{Bt();let N=null;return Eo.is(f)?(N=void 0,p=f):ve.string(f)?(N=null,S!==void 0&&(N=f,D.set(f,{handler:S,type:void 0}))):S!==void 0&&(N=f.method,D.set(f.method,{type:f,handler:S})),{dispose:()=>{N!==null&&(N!==void 0?D.delete(N):p=void 0)}}},hasPendingResponse:()=>F.size>0,trace:async(f,S,N)=>{let L=!1,te=Ye.Text;N!==void 0&&(ve.boolean(N)?L=N:(L=N.sendNotification||!1,te=N.traceFormat||Ye.Text)),y=f,k=te,y===Z.Off?A=void 0:A=S,L&&!at()&&!Je()&&await Et.sendNotification(Ea.type,{value:Z.toString(f)})},onError:ee.event,onClose:_e.event,onUnhandledNotification:Pe.event,onDispose:Ve.event,end:()=>{t.end()},dispose:()=>{if(Je())return;Q=Ze.Disposed,Ve.fire(void 0);let f=new H.ResponseError(H.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let S of F.values())S.reject(f);F=new Map,v=new Map,j=new Set,I=new Ca.LinkedMap,ve.func(t.dispose)&&t.dispose(),ve.func(e.dispose)&&e.dispose()},listen:()=>{Bt(),Ni(),Q=Ze.Listening,e.listen(wi)},inspect:()=>{(0,Pa.default)().console.log("inspect")}};return Et.onNotification(Oo.type,f=>{if(y===Z.Off||!A)return;let S=y===Z.Verbose||y===Z.Compact;A.log(f.message,S?f.verbose:void 0)}),Et.onNotification(Wn.type,f=>{let S=C.get(f.token);S?S(f.value):Ae.fire(f)}),Et}W.createMessageConnection=Td});var xo=O(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w.TraceFormat=w.TraceValues=w.Trace=w.ProgressType=w.ProgressToken=w.createMessageConnection=w.NullLogger=w.ConnectionOptions=w.ConnectionStrategy=w.WriteableStreamMessageWriter=w.AbstractMessageWriter=w.MessageWriter=w.ReadableStreamMessageReader=w.AbstractMessageReader=w.MessageReader=w.CancellationToken=w.CancellationTokenSource=w.Emitter=w.Event=w.Disposable=w.LRUCache=w.Touch=w.LinkedMap=w.ParameterStructures=w.NotificationType9=w.NotificationType8=w.NotificationType7=w.NotificationType6=w.NotificationType5=w.NotificationType4=w.NotificationType3=w.NotificationType2=w.NotificationType1=w.NotificationType0=w.NotificationType=w.ErrorCodes=w.ResponseError=w.RequestType9=w.RequestType8=w.RequestType7=w.RequestType6=w.RequestType5=w.RequestType4=w.RequestType3=w.RequestType2=w.RequestType1=w.RequestType0=w.RequestType=w.Message=w.RAL=void 0;w.CancellationStrategy=w.CancellationSenderStrategy=w.CancellationReceiverStrategy=w.ConnectionError=w.ConnectionErrors=w.LogTraceNotification=w.SetTraceNotification=void 0;var se=ho();Object.defineProperty(w,"Message",{enumerable:!0,get:function(){return se.Message}});Object.defineProperty(w,"RequestType",{enumerable:!0,get:function(){return se.RequestType}});Object.defineProperty(w,"RequestType0",{enumerable:!0,get:function(){return se.RequestType0}});Object.defineProperty(w,"RequestType1",{enumerable:!0,get:function(){return se.RequestType1}});Object.defineProperty(w,"RequestType2",{enumerable:!0,get:function(){return se.RequestType2}});Object.defineProperty(w,"RequestType3",{enumerable:!0,get:function(){return se.RequestType3}});Object.defineProperty(w,"RequestType4",{enumerable:!0,get:function(){return se.RequestType4}});Object.defineProperty(w,"RequestType5",{enumerable:!0,get:function(){return se.RequestType5}});Object.defineProperty(w,"RequestType6",{enumerable:!0,get:function(){return se.RequestType6}});Object.defineProperty(w,"RequestType7",{enumerable:!0,get:function(){return se.RequestType7}});Object.defineProperty(w,"RequestType8",{enumerable:!0,get:function(){return se.RequestType8}});Object.defineProperty(w,"RequestType9",{enumerable:!0,get:function(){return se.RequestType9}});Object.defineProperty(w,"ResponseError",{enumerable:!0,get:function(){return se.ResponseError}});Object.defineProperty(w,"ErrorCodes",{enumerable:!0,get:function(){return se.ErrorCodes}});Object.defineProperty(w,"NotificationType",{enumerable:!0,get:function(){return se.NotificationType}});Object.defineProperty(w,"NotificationType0",{enumerable:!0,get:function(){return se.NotificationType0}});Object.defineProperty(w,"NotificationType1",{enumerable:!0,get:function(){return se.NotificationType1}});Object.defineProperty(w,"NotificationType2",{enumerable:!0,get:function(){return se.NotificationType2}});Object.defineProperty(w,"NotificationType3",{enumerable:!0,get:function(){return se.NotificationType3}});Object.defineProperty(w,"NotificationType4",{enumerable:!0,get:function(){return se.NotificationType4}});Object.defineProperty(w,"NotificationType5",{enumerable:!0,get:function(){return se.NotificationType5}});Object.defineProperty(w,"NotificationType6",{enumerable:!0,get:function(){return se.NotificationType6}});Object.defineProperty(w,"NotificationType7",{enumerable:!0,get:function(){return se.NotificationType7}});Object.defineProperty(w,"NotificationType8",{enumerable:!0,get:function(){return se.NotificationType8}});Object.defineProperty(w,"NotificationType9",{enumerable:!0,get:function(){return se.NotificationType9}});Object.defineProperty(w,"ParameterStructures",{enumerable:!0,get:function(){return se.ParameterStructures}});var Io=mo();Object.defineProperty(w,"LinkedMap",{enumerable:!0,get:function(){return Io.LinkedMap}});Object.defineProperty(w,"LRUCache",{enumerable:!0,get:function(){return Io.LRUCache}});Object.defineProperty(w,"Touch",{enumerable:!0,get:function(){return Io.Touch}});var Sd=xi();Object.defineProperty(w,"Disposable",{enumerable:!0,get:function(){return Sd.Disposable}});var Ma=mn();Object.defineProperty(w,"Event",{enumerable:!0,get:function(){return Ma.Event}});Object.defineProperty(w,"Emitter",{enumerable:!0,get:function(){return Ma.Emitter}});var ja=_o();Object.defineProperty(w,"CancellationTokenSource",{enumerable:!0,get:function(){return ja.CancellationTokenSource}});Object.defineProperty(w,"CancellationToken",{enumerable:!0,get:function(){return ja.CancellationToken}});var Fo=Da();Object.defineProperty(w,"MessageReader",{enumerable:!0,get:function(){return Fo.MessageReader}});Object.defineProperty(w,"AbstractMessageReader",{enumerable:!0,get:function(){return Fo.AbstractMessageReader}});Object.defineProperty(w,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Fo.ReadableStreamMessageReader}});var Lo=Sa();Object.defineProperty(w,"MessageWriter",{enumerable:!0,get:function(){return Lo.MessageWriter}});Object.defineProperty(w,"AbstractMessageWriter",{enumerable:!0,get:function(){return Lo.AbstractMessageWriter}});Object.defineProperty(w,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Lo.WriteableStreamMessageWriter}});var Ee=Na();Object.defineProperty(w,"ConnectionStrategy",{enumerable:!0,get:function(){return Ee.ConnectionStrategy}});Object.defineProperty(w,"ConnectionOptions",{enumerable:!0,get:function(){return Ee.ConnectionOptions}});Object.defineProperty(w,"NullLogger",{enumerable:!0,get:function(){return Ee.NullLogger}});Object.defineProperty(w,"createMessageConnection",{enumerable:!0,get:function(){return Ee.createMessageConnection}});Object.defineProperty(w,"ProgressToken",{enumerable:!0,get:function(){return Ee.ProgressToken}});Object.defineProperty(w,"ProgressType",{enumerable:!0,get:function(){return Ee.ProgressType}});Object.defineProperty(w,"Trace",{enumerable:!0,get:function(){return Ee.Trace}});Object.defineProperty(w,"TraceValues",{enumerable:!0,get:function(){return Ee.TraceValues}});Object.defineProperty(w,"TraceFormat",{enumerable:!0,get:function(){return Ee.TraceFormat}});Object.defineProperty(w,"SetTraceNotification",{enumerable:!0,get:function(){return Ee.SetTraceNotification}});Object.defineProperty(w,"LogTraceNotification",{enumerable:!0,get:function(){return Ee.LogTraceNotification}});Object.defineProperty(w,"ConnectionErrors",{enumerable:!0,get:function(){return Ee.ConnectionErrors}});Object.defineProperty(w,"ConnectionError",{enumerable:!0,get:function(){return Ee.ConnectionError}});Object.defineProperty(w,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Ee.CancellationReceiverStrategy}});Object.defineProperty(w,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Ee.CancellationSenderStrategy}});Object.defineProperty(w,"CancellationStrategy",{enumerable:!0,get:function(){return Ee.CancellationStrategy}});var Pd=bt();w.RAL=Pd.default});var Yt=O(K=>{"use strict";var Cd=K&&K.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),qd=K&&K.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Cd(t,e,n)};Object.defineProperty(K,"__esModule",{value:!0});K.createMessageConnection=K.createServerSocketTransport=K.createClientSocketTransport=K.createServerPipeTransport=K.createClientPipeTransport=K.generateRandomPipeName=K.StreamMessageWriter=K.StreamMessageReader=K.SocketMessageWriter=K.SocketMessageReader=K.IPCMessageWriter=K.IPCMessageReader=void 0;var yn=pa();yn.default.install();var lt=xo(),Ia=require("path"),Ed=require("os"),Od=require("crypto"),Tr=require("net");qd(xo(),K);var Ao=class extends lt.AbstractMessageReader{constructor(t){super(),this.process=t;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(t){return this.process.on("message",t),lt.Disposable.create(()=>this.process.off("message",t))}};K.IPCMessageReader=Ao;var Wo=class extends lt.AbstractMessageWriter{constructor(t){super(),this.process=t,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,t)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};K.IPCMessageWriter=Wo;var Kt=class extends lt.ReadableStreamMessageReader{constructor(t,n="utf-8"){super((0,yn.default)().stream.asReadableStream(t),n)}};K.SocketMessageReader=Kt;var Qt=class extends lt.WriteableStreamMessageWriter{constructor(t,n){super((0,yn.default)().stream.asWritableStream(t),n),this.socket=t}dispose(){super.dispose(),this.socket.destroy()}};K.SocketMessageWriter=Qt;var wr=class extends lt.ReadableStreamMessageReader{constructor(t,n){super((0,yn.default)().stream.asReadableStream(t),n)}};K.StreamMessageReader=wr;var kr=class extends lt.WriteableStreamMessageWriter{constructor(t,n){super((0,yn.default)().stream.asWritableStream(t),n)}};K.StreamMessageWriter=kr;var Fa=process.env.XDG_RUNTIME_DIR,Nd=new Map([["linux",107],["darwin",103]]);function Md(){let e=(0,Od.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;Fa?t=Ia.join(Fa,`vscode-ipc-${e}.sock`):t=Ia.join(Ed.tmpdir(),`vscode-${e}.sock`);let n=Nd.get(process.platform);return n!==void 0&&t.length>=n&&(0,yn.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t}K.generateRandomPipeName=Md;function jd(e,t="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let u=(0,Tr.createServer)(d=>{u.close(),n([new Kt(d,t),new Qt(d,t)])});u.on("error",s),u.listen(e,()=>{u.removeListener("error",s),i({onConnected:()=>r})})})}K.createClientPipeTransport=jd;function Id(e,t="utf-8"){let n=(0,Tr.createConnection)(e);return[new Kt(n,t),new Qt(n,t)]}K.createServerPipeTransport=Id;function Fd(e,t="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let u=(0,Tr.createServer)(d=>{u.close(),n([new Kt(d,t),new Qt(d,t)])});u.on("error",s),u.listen(e,"127.0.0.1",()=>{u.removeListener("error",s),i({onConnected:()=>r})})})}K.createClientSocketTransport=Fd;function Ld(e,t="utf-8"){let n=(0,Tr.createConnection)(e,"127.0.0.1");return[new Kt(n,t),new Qt(n,t)]}K.createServerSocketTransport=Ld;function xd(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function Ad(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function Wd(e,t,n,r){n||(n=lt.NullLogger);let i=xd(e)?new wr(e):e,s=Ad(t)?new kr(t):t;return lt.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,lt.createMessageConnection)(i,s,n,r)}K.createMessageConnection=Wd});var Ho=O((ly,La)=>{"use strict";La.exports=Yt()});var Pr=O((xa,Sr)=>{(function(e){if(typeof Sr=="object"&&typeof Sr.exports=="object"){var t=e(require,xa);t!==void 0&&(Sr.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0;var n;(function(a){function g(m){return typeof m=="string"}a.is=g})(n=t.DocumentUri||(t.DocumentUri={}));var r;(function(a){function g(m){return typeof m=="string"}a.is=g})(r=t.URI||(t.URI={}));var i;(function(a){a.MIN_VALUE=-2147483648,a.MAX_VALUE=2147483647;function g(m){return typeof m=="number"&&a.MIN_VALUE<=m&&m<=a.MAX_VALUE}a.is=g})(i=t.integer||(t.integer={}));var s;(function(a){a.MIN_VALUE=0,a.MAX_VALUE=2147483647;function g(m){return typeof m=="number"&&a.MIN_VALUE<=m&&m<=a.MAX_VALUE}a.is=g})(s=t.uinteger||(t.uinteger={}));var u;(function(a){function g(l,o){return l===Number.MAX_VALUE&&(l=s.MAX_VALUE),o===Number.MAX_VALUE&&(o=s.MAX_VALUE),{line:l,character:o}}a.create=g;function m(l){var o=l;return b.objectLiteral(o)&&b.uinteger(o.line)&&b.uinteger(o.character)}a.is=m})(u=t.Position||(t.Position={}));var d;(function(a){function g(l,o,_,T){if(b.uinteger(l)&&b.uinteger(o)&&b.uinteger(_)&&b.uinteger(T))return{start:u.create(l,o),end:u.create(_,T)};if(u.is(l)&&u.is(o))return{start:l,end:o};throw new Error("Range#create called with invalid arguments[".concat(l,", ").concat(o,", ").concat(_,", ").concat(T,"]"))}a.create=g;function m(l){var o=l;return b.objectLiteral(o)&&u.is(o.start)&&u.is(o.end)}a.is=m})(d=t.Range||(t.Range={}));var h;(function(a){function g(l,o){return{uri:l,range:o}}a.create=g;function m(l){var o=l;return b.objectLiteral(o)&&d.is(o.range)&&(b.string(o.uri)||b.undefined(o.uri))}a.is=m})(h=t.Location||(t.Location={}));var p;(function(a){function g(l,o,_,T){return{targetUri:l,targetRange:o,targetSelectionRange:_,originSelectionRange:T}}a.create=g;function m(l){var o=l;return b.objectLiteral(o)&&d.is(o.targetRange)&&b.string(o.targetUri)&&d.is(o.targetSelectionRange)&&(d.is(o.originSelectionRange)||b.undefined(o.originSelectionRange))}a.is=m})(p=t.LocationLink||(t.LocationLink={}));var D;(function(a){function g(l,o,_,T){return{red:l,green:o,blue:_,alpha:T}}a.create=g;function m(l){var o=l;return b.objectLiteral(o)&&b.numberRange(o.red,0,1)&&b.numberRange(o.green,0,1)&&b.numberRange(o.blue,0,1)&&b.numberRange(o.alpha,0,1)}a.is=m})(D=t.Color||(t.Color={}));var P;(function(a){function g(l,o){return{range:l,color:o}}a.create=g;function m(l){var o=l;return b.objectLiteral(o)&&d.is(o.range)&&D.is(o.color)}a.is=m})(P=t.ColorInformation||(t.ColorInformation={}));var R;(function(a){function g(l,o,_){return{label:l,textEdit:o,additionalTextEdits:_}}a.create=g;function m(l){var o=l;return b.objectLiteral(o)&&b.string(o.label)&&(b.undefined(o.textEdit)||A.is(o))&&(b.undefined(o.additionalTextEdits)||b.typedArray(o.additionalTextEdits,A.is))}a.is=m})(R=t.ColorPresentation||(t.ColorPresentation={}));var C;(function(a){a.Comment="comment",a.Imports="imports",a.Region="region"})(C=t.FoldingRangeKind||(t.FoldingRangeKind={}));var E;(function(a){function g(l,o,_,T,z,de){var oe={startLine:l,endLine:o};return b.defined(_)&&(oe.startCharacter=_),b.defined(T)&&(oe.endCharacter=T),b.defined(z)&&(oe.kind=z),b.defined(de)&&(oe.collapsedText=de),oe}a.create=g;function m(l){var o=l;return b.objectLiteral(o)&&b.uinteger(o.startLine)&&b.uinteger(o.startLine)&&(b.undefined(o.startCharacter)||b.uinteger(o.startCharacter))&&(b.undefined(o.endCharacter)||b.uinteger(o.endCharacter))&&(b.undefined(o.kind)||b.string(o.kind))}a.is=m})(E=t.FoldingRange||(t.FoldingRange={}));var I;(function(a){function g(l,o){return{location:l,message:o}}a.create=g;function m(l){var o=l;return b.defined(o)&&h.is(o.location)&&b.string(o.message)}a.is=m})(I=t.DiagnosticRelatedInformation||(t.DiagnosticRelatedInformation={}));var F;(function(a){a.Error=1,a.Warning=2,a.Information=3,a.Hint=4})(F=t.DiagnosticSeverity||(t.DiagnosticSeverity={}));var j;(function(a){a.Unnecessary=1,a.Deprecated=2})(j=t.DiagnosticTag||(t.DiagnosticTag={}));var v;(function(a){function g(m){var l=m;return b.objectLiteral(l)&&b.string(l.href)}a.is=g})(v=t.CodeDescription||(t.CodeDescription={}));var y;(function(a){function g(l,o,_,T,z,de){var oe={range:l,message:o};return b.defined(_)&&(oe.severity=_),b.defined(T)&&(oe.code=T),b.defined(z)&&(oe.source=z),b.defined(de)&&(oe.relatedInformation=de),oe}a.create=g;function m(l){var o,_=l;return b.defined(_)&&d.is(_.range)&&b.string(_.message)&&(b.number(_.severity)||b.undefined(_.severity))&&(b.integer(_.code)||b.string(_.code)||b.undefined(_.code))&&(b.undefined(_.codeDescription)||b.string((o=_.codeDescription)===null||o===void 0?void 0:o.href))&&(b.string(_.source)||b.undefined(_.source))&&(b.undefined(_.relatedInformation)||b.typedArray(_.relatedInformation,I.is))}a.is=m})(y=t.Diagnostic||(t.Diagnostic={}));var k;(function(a){function g(l,o){for(var _=[],T=2;T<arguments.length;T++)_[T-2]=arguments[T];var z={title:l,command:o};return b.defined(_)&&_.length>0&&(z.arguments=_),z}a.create=g;function m(l){var o=l;return b.defined(o)&&b.string(o.title)&&b.string(o.command)}a.is=m})(k=t.Command||(t.Command={}));var A;(function(a){function g(_,T){return{range:_,newText:T}}a.replace=g;function m(_,T){return{range:{start:_,end:_},newText:T}}a.insert=m;function l(_){return{range:_,newText:""}}a.del=l;function o(_){var T=_;return b.objectLiteral(T)&&b.string(T.newText)&&d.is(T.range)}a.is=o})(A=t.TextEdit||(t.TextEdit={}));var Q;(function(a){function g(l,o,_){var T={label:l};return o!==void 0&&(T.needsConfirmation=o),_!==void 0&&(T.description=_),T}a.create=g;function m(l){var o=l;return b.objectLiteral(o)&&b.string(o.label)&&(b.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(b.string(o.description)||o.description===void 0)}a.is=m})(Q=t.ChangeAnnotation||(t.ChangeAnnotation={}));var ee;(function(a){function g(m){var l=m;return b.string(l)}a.is=g})(ee=t.ChangeAnnotationIdentifier||(t.ChangeAnnotationIdentifier={}));var _e;(function(a){function g(_,T,z){return{range:_,newText:T,annotationId:z}}a.replace=g;function m(_,T,z){return{range:{start:_,end:_},newText:T,annotationId:z}}a.insert=m;function l(_,T){return{range:_,newText:"",annotationId:T}}a.del=l;function o(_){var T=_;return A.is(T)&&(Q.is(T.annotationId)||ee.is(T.annotationId))}a.is=o})(_e=t.AnnotatedTextEdit||(t.AnnotatedTextEdit={}));var Pe;(function(a){function g(l,o){return{textDocument:l,edits:o}}a.create=g;function m(l){var o=l;return b.defined(o)&&at.is(o.textDocument)&&Array.isArray(o.edits)}a.is=m})(Pe=t.TextDocumentEdit||(t.TextDocumentEdit={}));var Ae;(function(a){function g(l,o,_){var T={kind:"create",uri:l};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(T.options=o),_!==void 0&&(T.annotationId=_),T}a.create=g;function m(l){var o=l;return o&&o.kind==="create"&&b.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||b.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||b.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ee.is(o.annotationId))}a.is=m})(Ae=t.CreateFile||(t.CreateFile={}));var Ve;(function(a){function g(l,o,_,T){var z={kind:"rename",oldUri:l,newUri:o};return _!==void 0&&(_.overwrite!==void 0||_.ignoreIfExists!==void 0)&&(z.options=_),T!==void 0&&(z.annotationId=T),z}a.create=g;function m(l){var o=l;return o&&o.kind==="rename"&&b.string(o.oldUri)&&b.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||b.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||b.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ee.is(o.annotationId))}a.is=m})(Ve=t.RenameFile||(t.RenameFile={}));var We;(function(a){function g(l,o,_){var T={kind:"delete",uri:l};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(T.options=o),_!==void 0&&(T.annotationId=_),T}a.create=g;function m(l){var o=l;return o&&o.kind==="delete"&&b.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||b.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||b.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||ee.is(o.annotationId))}a.is=m})(We=t.DeleteFile||(t.DeleteFile={}));var Xe;(function(a){function g(m){var l=m;return l&&(l.changes!==void 0||l.documentChanges!==void 0)&&(l.documentChanges===void 0||l.documentChanges.every(function(o){return b.string(o.kind)?Ae.is(o)||Ve.is(o)||We.is(o):Pe.is(o)}))}a.is=g})(Xe=t.WorkspaceEdit||(t.WorkspaceEdit={}));var St=function(){function a(g,m){this.edits=g,this.changeAnnotations=m}return a.prototype.insert=function(g,m,l){var o,_;if(l===void 0?o=A.insert(g,m):ee.is(l)?(_=l,o=_e.insert(g,m,l)):(this.assertChangeAnnotations(this.changeAnnotations),_=this.changeAnnotations.manage(l),o=_e.insert(g,m,_)),this.edits.push(o),_!==void 0)return _},a.prototype.replace=function(g,m,l){var o,_;if(l===void 0?o=A.replace(g,m):ee.is(l)?(_=l,o=_e.replace(g,m,l)):(this.assertChangeAnnotations(this.changeAnnotations),_=this.changeAnnotations.manage(l),o=_e.replace(g,m,_)),this.edits.push(o),_!==void 0)return _},a.prototype.delete=function(g,m){var l,o;if(m===void 0?l=A.del(g):ee.is(m)?(o=m,l=_e.del(g,m)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(m),l=_e.del(g,o)),this.edits.push(l),o!==void 0)return o},a.prototype.add=function(g){this.edits.push(g)},a.prototype.all=function(){return this.edits},a.prototype.clear=function(){this.edits.splice(0,this.edits.length)},a.prototype.assertChangeAnnotations=function(g){if(g===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},a}(),Pt=function(){function a(g){this._annotations=g===void 0?Object.create(null):g,this._counter=0,this._size=0}return a.prototype.all=function(){return this._annotations},Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),a.prototype.manage=function(g,m){var l;if(ee.is(g)?l=g:(l=this.nextId(),m=g),this._annotations[l]!==void 0)throw new Error("Id ".concat(l," is already in use."));if(m===void 0)throw new Error("No annotation provided for id ".concat(l));return this._annotations[l]=m,this._size++,l},a.prototype.nextId=function(){return this._counter++,this._counter.toString()},a}(),an=function(){function a(g){var m=this;this._textEditChanges=Object.create(null),g!==void 0?(this._workspaceEdit=g,g.documentChanges?(this._changeAnnotations=new Pt(g.changeAnnotations),g.changeAnnotations=this._changeAnnotations.all(),g.documentChanges.forEach(function(l){if(Pe.is(l)){var o=new St(l.edits,m._changeAnnotations);m._textEditChanges[l.textDocument.uri]=o}})):g.changes&&Object.keys(g.changes).forEach(function(l){var o=new St(g.changes[l]);m._textEditChanges[l]=o})):this._workspaceEdit={}}return Object.defineProperty(a.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),a.prototype.getTextEditChange=function(g){if(at.is(g)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var m={uri:g.uri,version:g.version},l=this._textEditChanges[m.uri];if(!l){var o=[],_={textDocument:m,edits:o};this._workspaceEdit.documentChanges.push(_),l=new St(o,this._changeAnnotations),this._textEditChanges[m.uri]=l}return l}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var l=this._textEditChanges[g];if(!l){var o=[];this._workspaceEdit.changes[g]=o,l=new St(o),this._textEditChanges[g]=l}return l}},a.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Pt,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},a.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},a.prototype.createFile=function(g,m,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Q.is(m)||ee.is(m)?o=m:l=m;var _,T;if(o===void 0?_=Ae.create(g,l):(T=ee.is(o)?o:this._changeAnnotations.manage(o),_=Ae.create(g,l,T)),this._workspaceEdit.documentChanges.push(_),T!==void 0)return T},a.prototype.renameFile=function(g,m,l,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var _;Q.is(l)||ee.is(l)?_=l:o=l;var T,z;if(_===void 0?T=Ve.create(g,m,o):(z=ee.is(_)?_:this._changeAnnotations.manage(_),T=Ve.create(g,m,o,z)),this._workspaceEdit.documentChanges.push(T),z!==void 0)return z},a.prototype.deleteFile=function(g,m,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Q.is(m)||ee.is(m)?o=m:l=m;var _,T;if(o===void 0?_=We.create(g,l):(T=ee.is(o)?o:this._changeAnnotations.manage(o),_=We.create(g,l,T)),this._workspaceEdit.documentChanges.push(_),T!==void 0)return T},a}();t.WorkspaceChange=an;var Mn;(function(a){function g(l){return{uri:l}}a.create=g;function m(l){var o=l;return b.defined(o)&&b.string(o.uri)}a.is=m})(Mn=t.TextDocumentIdentifier||(t.TextDocumentIdentifier={}));var cn;(function(a){function g(l,o){return{uri:l,version:o}}a.create=g;function m(l){var o=l;return b.defined(o)&&b.string(o.uri)&&b.integer(o.version)}a.is=m})(cn=t.VersionedTextDocumentIdentifier||(t.VersionedTextDocumentIdentifier={}));var at;(function(a){function g(l,o){return{uri:l,version:o}}a.create=g;function m(l){var o=l;return b.defined(o)&&b.string(o.uri)&&(o.version===null||b.integer(o.version))}a.is=m})(at=t.OptionalVersionedTextDocumentIdentifier||(t.OptionalVersionedTextDocumentIdentifier={}));var Je;(function(a){function g(l,o,_,T){return{uri:l,languageId:o,version:_,text:T}}a.create=g;function m(l){var o=l;return b.defined(o)&&b.string(o.uri)&&b.string(o.languageId)&&b.integer(o.version)&&b.string(o.text)}a.is=m})(Je=t.TextDocumentItem||(t.TextDocumentItem={}));var Ct;(function(a){a.PlainText="plaintext",a.Markdown="markdown";function g(m){var l=m;return l===a.PlainText||l===a.Markdown}a.is=g})(Ct=t.MarkupKind||(t.MarkupKind={}));var ct;(function(a){function g(m){var l=m;return b.objectLiteral(m)&&Ct.is(l.kind)&&b.string(l.value)}a.is=g})(ct=t.MarkupContent||(t.MarkupContent={}));var Di;(function(a){a.Text=1,a.Method=2,a.Function=3,a.Constructor=4,a.Field=5,a.Variable=6,a.Class=7,a.Interface=8,a.Module=9,a.Property=10,a.Unit=11,a.Value=12,a.Enum=13,a.Keyword=14,a.Snippet=15,a.Color=16,a.File=17,a.Reference=18,a.Folder=19,a.EnumMember=20,a.Constant=21,a.Struct=22,a.Event=23,a.Operator=24,a.TypeParameter=25})(Di=t.CompletionItemKind||(t.CompletionItemKind={}));var dr;(function(a){a.PlainText=1,a.Snippet=2})(dr=t.InsertTextFormat||(t.InsertTextFormat={}));var Ri;(function(a){a.Deprecated=1})(Ri=t.CompletionItemTag||(t.CompletionItemTag={}));var wi;(function(a){function g(l,o,_){return{newText:l,insert:o,replace:_}}a.create=g;function m(l){var o=l;return o&&b.string(o.newText)&&d.is(o.insert)&&d.is(o.replace)}a.is=m})(wi=t.InsertReplaceEdit||(t.InsertReplaceEdit={}));var ki;(function(a){a.asIs=1,a.adjustIndentation=2})(ki=t.InsertTextMode||(t.InsertTextMode={}));var Ti;(function(a){function g(m){var l=m;return l&&(b.string(l.detail)||l.detail===void 0)&&(b.string(l.description)||l.description===void 0)}a.is=g})(Ti=t.CompletionItemLabelDetails||(t.CompletionItemLabelDetails={}));var Si;(function(a){function g(m){return{label:m}}a.create=g})(Si=t.CompletionItem||(t.CompletionItem={}));var Pi;(function(a){function g(m,l){return{items:m||[],isIncomplete:!!l}}a.create=g})(Pi=t.CompletionList||(t.CompletionList={}));var He;(function(a){function g(l){return l.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}a.fromPlainText=g;function m(l){var o=l;return b.string(o)||b.objectLiteral(o)&&b.string(o.language)&&b.string(o.value)}a.is=m})(He=t.MarkedString||(t.MarkedString={}));var Ci;(function(a){function g(m){var l=m;return!!l&&b.objectLiteral(l)&&(ct.is(l.contents)||He.is(l.contents)||b.typedArray(l.contents,He.is))&&(m.range===void 0||d.is(m.range))}a.is=g})(Ci=t.Hover||(t.Hover={}));var qi;(function(a){function g(m,l){return l?{label:m,documentation:l}:{label:m}}a.create=g})(qi=t.ParameterInformation||(t.ParameterInformation={}));var un;(function(a){function g(m,l){for(var o=[],_=2;_<arguments.length;_++)o[_-2]=arguments[_];var T={label:m};return b.defined(l)&&(T.documentation=l),b.defined(o)?T.parameters=o:T.parameters=[],T}a.create=g})(un=t.SignatureInformation||(t.SignatureInformation={}));var Ei;(function(a){a.Text=1,a.Read=2,a.Write=3})(Ei=t.DocumentHighlightKind||(t.DocumentHighlightKind={}));var jn;(function(a){function g(m,l){var o={range:m};return b.number(l)&&(o.kind=l),o}a.create=g})(jn=t.DocumentHighlight||(t.DocumentHighlight={}));var Oi;(function(a){a.File=1,a.Module=2,a.Namespace=3,a.Package=4,a.Class=5,a.Method=6,a.Property=7,a.Field=8,a.Constructor=9,a.Enum=10,a.Interface=11,a.Function=12,a.Variable=13,a.Constant=14,a.String=15,a.Number=16,a.Boolean=17,a.Array=18,a.Object=19,a.Key=20,a.Null=21,a.EnumMember=22,a.Struct=23,a.Event=24,a.Operator=25,a.TypeParameter=26})(Oi=t.SymbolKind||(t.SymbolKind={}));var qt;(function(a){a.Deprecated=1})(qt=t.SymbolTag||(t.SymbolTag={}));var Bt;(function(a){function g(m,l,o,_,T){var z={name:m,kind:l,location:{uri:_,range:o}};return T&&(z.containerName=T),z}a.create=g})(Bt=t.SymbolInformation||(t.SymbolInformation={}));var Ni;(function(a){function g(m,l,o,_){return _!==void 0?{name:m,kind:l,location:{uri:o,range:_}}:{name:m,kind:l,location:{uri:o}}}a.create=g})(Ni=t.WorkspaceSymbol||(t.WorkspaceSymbol={}));var Mi;(function(a){function g(l,o,_,T,z,de){var oe={name:l,detail:o,kind:_,range:T,selectionRange:z};return de!==void 0&&(oe.children=de),oe}a.create=g;function m(l){var o=l;return o&&b.string(o.name)&&b.number(o.kind)&&d.is(o.range)&&d.is(o.selectionRange)&&(o.detail===void 0||b.string(o.detail))&&(o.deprecated===void 0||b.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}a.is=m})(Mi=t.DocumentSymbol||(t.DocumentSymbol={}));var Gt;(function(a){a.Empty="",a.QuickFix="quickfix",a.Refactor="refactor",a.RefactorExtract="refactor.extract",a.RefactorInline="refactor.inline",a.RefactorRewrite="refactor.rewrite",a.Source="source",a.SourceOrganizeImports="source.organizeImports",a.SourceFixAll="source.fixAll"})(Gt=t.CodeActionKind||(t.CodeActionKind={}));var ln;(function(a){a.Invoked=1,a.Automatic=2})(ln=t.CodeActionTriggerKind||(t.CodeActionTriggerKind={}));var fr;(function(a){function g(l,o,_){var T={diagnostics:l};return o!=null&&(T.only=o),_!=null&&(T.triggerKind=_),T}a.create=g;function m(l){var o=l;return b.defined(o)&&b.typedArray(o.diagnostics,y.is)&&(o.only===void 0||b.typedArray(o.only,b.string))&&(o.triggerKind===void 0||o.triggerKind===ln.Invoked||o.triggerKind===ln.Automatic)}a.is=m})(fr=t.CodeActionContext||(t.CodeActionContext={}));var In;(function(a){function g(l,o,_){var T={title:l},z=!0;return typeof o=="string"?(z=!1,T.kind=o):k.is(o)?T.command=o:T.edit=o,z&&_!==void 0&&(T.kind=_),T}a.create=g;function m(l){var o=l;return o&&b.string(o.title)&&(o.diagnostics===void 0||b.typedArray(o.diagnostics,y.is))&&(o.kind===void 0||b.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||k.is(o.command))&&(o.isPreferred===void 0||b.boolean(o.isPreferred))&&(o.edit===void 0||Xe.is(o.edit))}a.is=m})(In=t.CodeAction||(t.CodeAction={}));var hr;(function(a){function g(l,o){var _={range:l};return b.defined(o)&&(_.data=o),_}a.create=g;function m(l){var o=l;return b.defined(o)&&d.is(o.range)&&(b.undefined(o.command)||k.is(o.command))}a.is=m})(hr=t.CodeLens||(t.CodeLens={}));var Et;(function(a){function g(l,o){return{tabSize:l,insertSpaces:o}}a.create=g;function m(l){var o=l;return b.defined(o)&&b.uinteger(o.tabSize)&&b.boolean(o.insertSpaces)}a.is=m})(Et=t.FormattingOptions||(t.FormattingOptions={}));var f;(function(a){function g(l,o,_){return{range:l,target:o,data:_}}a.create=g;function m(l){var o=l;return b.defined(o)&&d.is(o.range)&&(b.undefined(o.target)||b.string(o.target))}a.is=m})(f=t.DocumentLink||(t.DocumentLink={}));var S;(function(a){function g(l,o){return{range:l,parent:o}}a.create=g;function m(l){var o=l;return b.objectLiteral(o)&&d.is(o.range)&&(o.parent===void 0||a.is(o.parent))}a.is=m})(S=t.SelectionRange||(t.SelectionRange={}));var N;(function(a){a.namespace="namespace",a.type="type",a.class="class",a.enum="enum",a.interface="interface",a.struct="struct",a.typeParameter="typeParameter",a.parameter="parameter",a.variable="variable",a.property="property",a.enumMember="enumMember",a.event="event",a.function="function",a.method="method",a.macro="macro",a.keyword="keyword",a.modifier="modifier",a.comment="comment",a.string="string",a.number="number",a.regexp="regexp",a.operator="operator",a.decorator="decorator"})(N=t.SemanticTokenTypes||(t.SemanticTokenTypes={}));var L;(function(a){a.declaration="declaration",a.definition="definition",a.readonly="readonly",a.static="static",a.deprecated="deprecated",a.abstract="abstract",a.async="async",a.modification="modification",a.documentation="documentation",a.defaultLibrary="defaultLibrary"})(L=t.SemanticTokenModifiers||(t.SemanticTokenModifiers={}));var te;(function(a){function g(m){var l=m;return b.objectLiteral(l)&&(l.resultId===void 0||typeof l.resultId=="string")&&Array.isArray(l.data)&&(l.data.length===0||typeof l.data[0]=="number")}a.is=g})(te=t.SemanticTokens||(t.SemanticTokens={}));var ne;(function(a){function g(l,o){return{range:l,text:o}}a.create=g;function m(l){var o=l;return o!=null&&d.is(o.range)&&b.string(o.text)}a.is=m})(ne=t.InlineValueText||(t.InlineValueText={}));var ce;(function(a){function g(l,o,_){return{range:l,variableName:o,caseSensitiveLookup:_}}a.create=g;function m(l){var o=l;return o!=null&&d.is(o.range)&&b.boolean(o.caseSensitiveLookup)&&(b.string(o.variableName)||o.variableName===void 0)}a.is=m})(ce=t.InlineValueVariableLookup||(t.InlineValueVariableLookup={}));var he;(function(a){function g(l,o){return{range:l,expression:o}}a.create=g;function m(l){var o=l;return o!=null&&d.is(o.range)&&(b.string(o.expression)||o.expression===void 0)}a.is=m})(he=t.InlineValueEvaluatableExpression||(t.InlineValueEvaluatableExpression={}));var G;(function(a){function g(l,o){return{frameId:l,stoppedLocation:o}}a.create=g;function m(l){var o=l;return b.defined(o)&&d.is(l.stoppedLocation)}a.is=m})(G=t.InlineValueContext||(t.InlineValueContext={}));var ie;(function(a){a.Type=1,a.Parameter=2;function g(m){return m===1||m===2}a.is=g})(ie=t.InlayHintKind||(t.InlayHintKind={}));var X;(function(a){function g(l){return{value:l}}a.create=g;function m(l){var o=l;return b.objectLiteral(o)&&(o.tooltip===void 0||b.string(o.tooltip)||ct.is(o.tooltip))&&(o.location===void 0||h.is(o.location))&&(o.command===void 0||k.is(o.command))}a.is=m})(X=t.InlayHintLabelPart||(t.InlayHintLabelPart={}));var fe;(function(a){function g(l,o,_){var T={position:l,label:o};return _!==void 0&&(T.kind=_),T}a.create=g;function m(l){var o=l;return b.objectLiteral(o)&&u.is(o.position)&&(b.string(o.label)||b.typedArray(o.label,X.is))&&(o.kind===void 0||ie.is(o.kind))&&o.textEdits===void 0||b.typedArray(o.textEdits,A.is)&&(o.tooltip===void 0||b.string(o.tooltip)||ct.is(o.tooltip))&&(o.paddingLeft===void 0||b.boolean(o.paddingLeft))&&(o.paddingRight===void 0||b.boolean(o.paddingRight))}a.is=m})(fe=t.InlayHint||(t.InlayHint={}));var Ce;(function(a){function g(m){var l=m;return b.objectLiteral(l)&&r.is(l.uri)&&b.string(l.name)}a.is=g})(Ce=t.WorkspaceFolder||(t.WorkspaceFolder={})),t.EOL=[`
`,`\r
`,"\r"];var yt;(function(a){function g(_,T,z,de){return new ut(_,T,z,de)}a.create=g;function m(_){var T=_;return!!(b.defined(T)&&b.string(T.uri)&&(b.undefined(T.languageId)||b.string(T.languageId))&&b.uinteger(T.lineCount)&&b.func(T.getText)&&b.func(T.positionAt)&&b.func(T.offsetAt))}a.is=m;function l(_,T){for(var z=_.getText(),de=o(T,function(dn,gr){var ca=dn.range.start.line-gr.range.start.line;return ca===0?dn.range.start.character-gr.range.start.character:ca}),oe=z.length,Ke=de.length-1;Ke>=0;Ke--){var Qe=de[Ke],vt=_.offsetAt(Qe.range.start),U=_.offsetAt(Qe.range.end);if(U<=oe)z=z.substring(0,vt)+Qe.newText+z.substring(U,z.length);else throw new Error("Overlapping edit");oe=vt}return z}a.applyEdits=l;function o(_,T){if(_.length<=1)return _;var z=_.length/2|0,de=_.slice(0,z),oe=_.slice(z);o(de,T),o(oe,T);for(var Ke=0,Qe=0,vt=0;Ke<de.length&&Qe<oe.length;){var U=T(de[Ke],oe[Qe]);U<=0?_[vt++]=de[Ke++]:_[vt++]=oe[Qe++]}for(;Ke<de.length;)_[vt++]=de[Ke++];for(;Qe<oe.length;)_[vt++]=oe[Qe++];return _}})(yt=t.TextDocument||(t.TextDocument={}));var ut=function(){function a(g,m,l,o){this._uri=g,this._languageId=m,this._version=l,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(a.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),a.prototype.getText=function(g){if(g){var m=this.offsetAt(g.start),l=this.offsetAt(g.end);return this._content.substring(m,l)}return this._content},a.prototype.update=function(g,m){this._content=g.text,this._version=m,this._lineOffsets=void 0},a.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var g=[],m=this._content,l=!0,o=0;o<m.length;o++){l&&(g.push(o),l=!1);var _=m.charAt(o);l=_==="\r"||_===`
`,_==="\r"&&o+1<m.length&&m.charAt(o+1)===`
`&&o++}l&&m.length>0&&g.push(m.length),this._lineOffsets=g}return this._lineOffsets},a.prototype.positionAt=function(g){g=Math.max(Math.min(g,this._content.length),0);var m=this.getLineOffsets(),l=0,o=m.length;if(o===0)return u.create(0,g);for(;l<o;){var _=Math.floor((l+o)/2);m[_]>g?o=_:l=_+1}var T=l-1;return u.create(T,g-m[T])},a.prototype.offsetAt=function(g){var m=this.getLineOffsets();if(g.line>=m.length)return this._content.length;if(g.line<0)return 0;var l=m[g.line],o=g.line+1<m.length?m[g.line+1]:this._content.length;return Math.max(Math.min(l+g.character,o),l)},Object.defineProperty(a.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),a}(),b;(function(a){var g=Object.prototype.toString;function m(U){return typeof U<"u"}a.defined=m;function l(U){return typeof U>"u"}a.undefined=l;function o(U){return U===!0||U===!1}a.boolean=o;function _(U){return g.call(U)==="[object String]"}a.string=_;function T(U){return g.call(U)==="[object Number]"}a.number=T;function z(U,dn,gr){return g.call(U)==="[object Number]"&&dn<=U&&U<=gr}a.numberRange=z;function de(U){return g.call(U)==="[object Number]"&&-2147483648<=U&&U<=2147483647}a.integer=de;function oe(U){return g.call(U)==="[object Number]"&&0<=U&&U<=2147483647}a.uinteger=oe;function Ke(U){return g.call(U)==="[object Function]"}a.func=Ke;function Qe(U){return U!==null&&typeof U=="object"}a.objectLiteral=Qe;function vt(U,dn){return Array.isArray(U)&&U.every(dn)}a.typedArray=vt})(b||(b={}))})});var ue=O(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.ProtocolNotificationType=Ne.ProtocolNotificationType0=Ne.ProtocolRequestType=Ne.ProtocolRequestType0=Ne.RegistrationType=Ne.MessageDirection=void 0;var vn=Yt(),Hd;(function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both"})(Hd=Ne.MessageDirection||(Ne.MessageDirection={}));var $o=class{constructor(t){this.method=t}};Ne.RegistrationType=$o;var zo=class extends vn.RequestType0{constructor(t){super(t)}};Ne.ProtocolRequestType0=zo;var Bo=class extends vn.RequestType{constructor(t){super(t,vn.ParameterStructures.byName)}};Ne.ProtocolRequestType=Bo;var Go=class extends vn.NotificationType0{constructor(t){super(t)}};Ne.ProtocolNotificationType0=Go;var Uo=class extends vn.NotificationType{constructor(t){super(t,vn.ParameterStructures.byName)}};Ne.ProtocolNotificationType=Uo});var Cr=O(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.objectLiteral=me.typedArray=me.stringArray=me.array=me.func=me.error=me.number=me.string=me.boolean=void 0;function $d(e){return e===!0||e===!1}me.boolean=$d;function Aa(e){return typeof e=="string"||e instanceof String}me.string=Aa;function zd(e){return typeof e=="number"||e instanceof Number}me.number=zd;function Bd(e){return e instanceof Error}me.error=Bd;function Gd(e){return typeof e=="function"}me.func=Gd;function Wa(e){return Array.isArray(e)}me.array=Wa;function Ud(e){return Wa(e)&&e.every(t=>Aa(t))}me.stringArray=Ud;function Vd(e,t){return Array.isArray(e)&&e.every(t)}me.typedArray=Vd;function Xd(e){return e!==null&&typeof e=="object"}me.objectLiteral=Xd});var $a=O($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.ImplementationRequest=void 0;var Ha=ue(),Jd;(function(e){e.method="textDocument/implementation",e.messageDirection=Ha.MessageDirection.clientToServer,e.type=new Ha.ProtocolRequestType(e.method)})(Jd=$n.ImplementationRequest||($n.ImplementationRequest={}))});var Ba=O(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.TypeDefinitionRequest=void 0;var za=ue(),Kd;(function(e){e.method="textDocument/typeDefinition",e.messageDirection=za.MessageDirection.clientToServer,e.type=new za.ProtocolRequestType(e.method)})(Kd=zn.TypeDefinitionRequest||(zn.TypeDefinitionRequest={}))});var Ga=O(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.DidChangeWorkspaceFoldersNotification=Nt.WorkspaceFoldersRequest=void 0;var qr=ue(),Qd;(function(e){e.method="workspace/workspaceFolders",e.messageDirection=qr.MessageDirection.serverToClient,e.type=new qr.ProtocolRequestType0(e.method)})(Qd=Nt.WorkspaceFoldersRequest||(Nt.WorkspaceFoldersRequest={}));var Yd;(function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=qr.MessageDirection.clientToServer,e.type=new qr.ProtocolNotificationType(e.method)})(Yd=Nt.DidChangeWorkspaceFoldersNotification||(Nt.DidChangeWorkspaceFoldersNotification={}))});var Va=O(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.ConfigurationRequest=void 0;var Ua=ue(),Zd;(function(e){e.method="workspace/configuration",e.messageDirection=Ua.MessageDirection.serverToClient,e.type=new Ua.ProtocolRequestType(e.method)})(Zd=Bn.ConfigurationRequest||(Bn.ConfigurationRequest={}))});var Xa=O(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.ColorPresentationRequest=Mt.DocumentColorRequest=void 0;var Er=ue(),ef;(function(e){e.method="textDocument/documentColor",e.messageDirection=Er.MessageDirection.clientToServer,e.type=new Er.ProtocolRequestType(e.method)})(ef=Mt.DocumentColorRequest||(Mt.DocumentColorRequest={}));var tf;(function(e){e.method="textDocument/colorPresentation",e.messageDirection=Er.MessageDirection.clientToServer,e.type=new Er.ProtocolRequestType(e.method)})(tf=Mt.ColorPresentationRequest||(Mt.ColorPresentationRequest={}))});var Ka=O(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.FoldingRangeRequest=void 0;var Ja=ue(),nf;(function(e){e.method="textDocument/foldingRange",e.messageDirection=Ja.MessageDirection.clientToServer,e.type=new Ja.ProtocolRequestType(e.method)})(nf=Gn.FoldingRangeRequest||(Gn.FoldingRangeRequest={}))});var Ya=O(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.DeclarationRequest=void 0;var Qa=ue(),rf;(function(e){e.method="textDocument/declaration",e.messageDirection=Qa.MessageDirection.clientToServer,e.type=new Qa.ProtocolRequestType(e.method)})(rf=Un.DeclarationRequest||(Un.DeclarationRequest={}))});var ec=O(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.SelectionRangeRequest=void 0;var Za=ue(),of;(function(e){e.method="textDocument/selectionRange",e.messageDirection=Za.MessageDirection.clientToServer,e.type=new Za.ProtocolRequestType(e.method)})(of=Vn.SelectionRangeRequest||(Vn.SelectionRangeRequest={}))});var tc=O(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.WorkDoneProgressCancelNotification=et.WorkDoneProgressCreateRequest=et.WorkDoneProgress=void 0;var sf=Yt(),Or=ue(),af;(function(e){e.type=new sf.ProgressType;function t(n){return n===e.type}e.is=t})(af=et.WorkDoneProgress||(et.WorkDoneProgress={}));var cf;(function(e){e.method="window/workDoneProgress/create",e.messageDirection=Or.MessageDirection.serverToClient,e.type=new Or.ProtocolRequestType(e.method)})(cf=et.WorkDoneProgressCreateRequest||(et.WorkDoneProgressCreateRequest={}));var uf;(function(e){e.method="window/workDoneProgress/cancel",e.messageDirection=Or.MessageDirection.clientToServer,e.type=new Or.ProtocolNotificationType(e.method)})(uf=et.WorkDoneProgressCancelNotification||(et.WorkDoneProgressCancelNotification={}))});var nc=O(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.CallHierarchyOutgoingCallsRequest=tt.CallHierarchyIncomingCallsRequest=tt.CallHierarchyPrepareRequest=void 0;var bn=ue(),lf;(function(e){e.method="textDocument/prepareCallHierarchy",e.messageDirection=bn.MessageDirection.clientToServer,e.type=new bn.ProtocolRequestType(e.method)})(lf=tt.CallHierarchyPrepareRequest||(tt.CallHierarchyPrepareRequest={}));var df;(function(e){e.method="callHierarchy/incomingCalls",e.messageDirection=bn.MessageDirection.clientToServer,e.type=new bn.ProtocolRequestType(e.method)})(df=tt.CallHierarchyIncomingCallsRequest||(tt.CallHierarchyIncomingCallsRequest={}));var ff;(function(e){e.method="callHierarchy/outgoingCalls",e.messageDirection=bn.MessageDirection.clientToServer,e.type=new bn.ProtocolRequestType(e.method)})(ff=tt.CallHierarchyOutgoingCallsRequest||(tt.CallHierarchyOutgoingCallsRequest={}))});var rc=O(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.SemanticTokensRefreshRequest=pe.SemanticTokensRangeRequest=pe.SemanticTokensDeltaRequest=pe.SemanticTokensRequest=pe.SemanticTokensRegistrationType=pe.TokenFormat=void 0;var wt=ue(),hf;(function(e){e.Relative="relative"})(hf=pe.TokenFormat||(pe.TokenFormat={}));var Nr;(function(e){e.method="textDocument/semanticTokens",e.type=new wt.RegistrationType(e.method)})(Nr=pe.SemanticTokensRegistrationType||(pe.SemanticTokensRegistrationType={}));var gf;(function(e){e.method="textDocument/semanticTokens/full",e.messageDirection=wt.MessageDirection.clientToServer,e.type=new wt.ProtocolRequestType(e.method),e.registrationMethod=Nr.method})(gf=pe.SemanticTokensRequest||(pe.SemanticTokensRequest={}));var mf;(function(e){e.method="textDocument/semanticTokens/full/delta",e.messageDirection=wt.MessageDirection.clientToServer,e.type=new wt.ProtocolRequestType(e.method),e.registrationMethod=Nr.method})(mf=pe.SemanticTokensDeltaRequest||(pe.SemanticTokensDeltaRequest={}));var pf;(function(e){e.method="textDocument/semanticTokens/range",e.messageDirection=wt.MessageDirection.clientToServer,e.type=new wt.ProtocolRequestType(e.method),e.registrationMethod=Nr.method})(pf=pe.SemanticTokensRangeRequest||(pe.SemanticTokensRangeRequest={}));var yf;(function(e){e.method="workspace/semanticTokens/refresh",e.messageDirection=wt.MessageDirection.clientToServer,e.type=new wt.ProtocolRequestType0(e.method)})(yf=pe.SemanticTokensRefreshRequest||(pe.SemanticTokensRefreshRequest={}))});var oc=O(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.ShowDocumentRequest=void 0;var ic=ue(),vf;(function(e){e.method="window/showDocument",e.messageDirection=ic.MessageDirection.serverToClient,e.type=new ic.ProtocolRequestType(e.method)})(vf=Xn.ShowDocumentRequest||(Xn.ShowDocumentRequest={}))});var ac=O(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.LinkedEditingRangeRequest=void 0;var sc=ue(),bf;(function(e){e.method="textDocument/linkedEditingRange",e.messageDirection=sc.MessageDirection.clientToServer,e.type=new sc.ProtocolRequestType(e.method)})(bf=Jn.LinkedEditingRangeRequest||(Jn.LinkedEditingRangeRequest={}))});var cc=O(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.WillDeleteFilesRequest=le.DidDeleteFilesNotification=le.DidRenameFilesNotification=le.WillRenameFilesRequest=le.DidCreateFilesNotification=le.WillCreateFilesRequest=le.FileOperationPatternKind=void 0;var $e=ue(),_f;(function(e){e.file="file",e.folder="folder"})(_f=le.FileOperationPatternKind||(le.FileOperationPatternKind={}));var Df;(function(e){e.method="workspace/willCreateFiles",e.messageDirection=$e.MessageDirection.clientToServer,e.type=new $e.ProtocolRequestType(e.method)})(Df=le.WillCreateFilesRequest||(le.WillCreateFilesRequest={}));var Rf;(function(e){e.method="workspace/didCreateFiles",e.messageDirection=$e.MessageDirection.clientToServer,e.type=new $e.ProtocolNotificationType(e.method)})(Rf=le.DidCreateFilesNotification||(le.DidCreateFilesNotification={}));var wf;(function(e){e.method="workspace/willRenameFiles",e.messageDirection=$e.MessageDirection.clientToServer,e.type=new $e.ProtocolRequestType(e.method)})(wf=le.WillRenameFilesRequest||(le.WillRenameFilesRequest={}));var kf;(function(e){e.method="workspace/didRenameFiles",e.messageDirection=$e.MessageDirection.clientToServer,e.type=new $e.ProtocolNotificationType(e.method)})(kf=le.DidRenameFilesNotification||(le.DidRenameFilesNotification={}));var Tf;(function(e){e.method="workspace/didDeleteFiles",e.messageDirection=$e.MessageDirection.clientToServer,e.type=new $e.ProtocolNotificationType(e.method)})(Tf=le.DidDeleteFilesNotification||(le.DidDeleteFilesNotification={}));var Sf;(function(e){e.method="workspace/willDeleteFiles",e.messageDirection=$e.MessageDirection.clientToServer,e.type=new $e.ProtocolRequestType(e.method)})(Sf=le.WillDeleteFilesRequest||(le.WillDeleteFilesRequest={}))});var lc=O(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.MonikerRequest=nt.MonikerKind=nt.UniquenessLevel=void 0;var uc=ue(),Pf;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"})(Pf=nt.UniquenessLevel||(nt.UniquenessLevel={}));var Cf;(function(e){e.$import="import",e.$export="export",e.local="local"})(Cf=nt.MonikerKind||(nt.MonikerKind={}));var qf;(function(e){e.method="textDocument/moniker",e.messageDirection=uc.MessageDirection.clientToServer,e.type=new uc.ProtocolRequestType(e.method)})(qf=nt.MonikerRequest||(nt.MonikerRequest={}))});var dc=O(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.TypeHierarchySubtypesRequest=rt.TypeHierarchySupertypesRequest=rt.TypeHierarchyPrepareRequest=void 0;var _n=ue(),Ef;(function(e){e.method="textDocument/prepareTypeHierarchy",e.messageDirection=_n.MessageDirection.clientToServer,e.type=new _n.ProtocolRequestType(e.method)})(Ef=rt.TypeHierarchyPrepareRequest||(rt.TypeHierarchyPrepareRequest={}));var Of;(function(e){e.method="typeHierarchy/supertypes",e.messageDirection=_n.MessageDirection.clientToServer,e.type=new _n.ProtocolRequestType(e.method)})(Of=rt.TypeHierarchySupertypesRequest||(rt.TypeHierarchySupertypesRequest={}));var Nf;(function(e){e.method="typeHierarchy/subtypes",e.messageDirection=_n.MessageDirection.clientToServer,e.type=new _n.ProtocolRequestType(e.method)})(Nf=rt.TypeHierarchySubtypesRequest||(rt.TypeHierarchySubtypesRequest={}))});var fc=O(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.InlineValueRefreshRequest=jt.InlineValueRequest=void 0;var Mr=ue(),Mf;(function(e){e.method="textDocument/inlineValue",e.messageDirection=Mr.MessageDirection.clientToServer,e.type=new Mr.ProtocolRequestType(e.method)})(Mf=jt.InlineValueRequest||(jt.InlineValueRequest={}));var jf;(function(e){e.method="workspace/inlineValue/refresh",e.messageDirection=Mr.MessageDirection.clientToServer,e.type=new Mr.ProtocolRequestType0(e.method)})(jf=jt.InlineValueRefreshRequest||(jt.InlineValueRefreshRequest={}))});var hc=O(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.InlayHintRefreshRequest=it.InlayHintResolveRequest=it.InlayHintRequest=void 0;var Dn=ue(),If;(function(e){e.method="textDocument/inlayHint",e.messageDirection=Dn.MessageDirection.clientToServer,e.type=new Dn.ProtocolRequestType(e.method)})(If=it.InlayHintRequest||(it.InlayHintRequest={}));var Ff;(function(e){e.method="inlayHint/resolve",e.messageDirection=Dn.MessageDirection.clientToServer,e.type=new Dn.ProtocolRequestType(e.method)})(Ff=it.InlayHintResolveRequest||(it.InlayHintResolveRequest={}));var Lf;(function(e){e.method="workspace/inlayHint/refresh",e.messageDirection=Dn.MessageDirection.clientToServer,e.type=new Dn.ProtocolRequestType0(e.method)})(Lf=it.InlayHintRefreshRequest||(it.InlayHintRefreshRequest={}))});var mc=O(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.DiagnosticRefreshRequest=we.WorkspaceDiagnosticRequest=we.DocumentDiagnosticRequest=we.DocumentDiagnosticReportKind=we.DiagnosticServerCancellationData=void 0;var gc=Yt(),xf=Cr(),Rn=ue(),Af;(function(e){function t(n){let r=n;return r&&xf.boolean(r.retriggerRequest)}e.is=t})(Af=we.DiagnosticServerCancellationData||(we.DiagnosticServerCancellationData={}));var Wf;(function(e){e.Full="full",e.Unchanged="unchanged"})(Wf=we.DocumentDiagnosticReportKind||(we.DocumentDiagnosticReportKind={}));var Hf;(function(e){e.method="textDocument/diagnostic",e.messageDirection=Rn.MessageDirection.clientToServer,e.type=new Rn.ProtocolRequestType(e.method),e.partialResult=new gc.ProgressType})(Hf=we.DocumentDiagnosticRequest||(we.DocumentDiagnosticRequest={}));var $f;(function(e){e.method="workspace/diagnostic",e.messageDirection=Rn.MessageDirection.clientToServer,e.type=new Rn.ProtocolRequestType(e.method),e.partialResult=new gc.ProgressType})($f=we.WorkspaceDiagnosticRequest||(we.WorkspaceDiagnosticRequest={}));var zf;(function(e){e.method="workspace/diagnostic/refresh",e.messageDirection=Rn.MessageDirection.clientToServer,e.type=new Rn.ProtocolRequestType0(e.method)})(zf=we.DiagnosticRefreshRequest||(we.DiagnosticRefreshRequest={}))});var vc=O(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.DidCloseNotebookDocumentNotification=J.DidSaveNotebookDocumentNotification=J.DidChangeNotebookDocumentNotification=J.NotebookCellArrayChange=J.DidOpenNotebookDocumentNotification=J.NotebookDocumentSyncRegistrationType=J.NotebookDocument=J.NotebookCell=J.ExecutionSummary=J.NotebookCellKind=void 0;var Kn=Pr(),ot=Cr(),dt=ue(),pc;(function(e){e.Markup=1,e.Code=2;function t(n){return n===1||n===2}e.is=t})(pc=J.NotebookCellKind||(J.NotebookCellKind={}));var yc;(function(e){function t(i,s){let u={executionOrder:i};return(s===!0||s===!1)&&(u.success=s),u}e.create=t;function n(i){let s=i;return ot.objectLiteral(s)&&Kn.uinteger.is(s.executionOrder)&&(s.success===void 0||ot.boolean(s.success))}e.is=n;function r(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}e.equals=r})(yc=J.ExecutionSummary||(J.ExecutionSummary={}));var Vo;(function(e){function t(s,u){return{kind:s,document:u}}e.create=t;function n(s){let u=s;return ot.objectLiteral(u)&&pc.is(u.kind)&&Kn.DocumentUri.is(u.document)&&(u.metadata===void 0||ot.objectLiteral(u.metadata))}e.is=n;function r(s,u){let d=new Set;return s.document!==u.document&&d.add("document"),s.kind!==u.kind&&d.add("kind"),s.executionSummary!==u.executionSummary&&d.add("executionSummary"),(s.metadata!==void 0||u.metadata!==void 0)&&!i(s.metadata,u.metadata)&&d.add("metadata"),(s.executionSummary!==void 0||u.executionSummary!==void 0)&&!yc.equals(s.executionSummary,u.executionSummary)&&d.add("executionSummary"),d}e.diff=r;function i(s,u){if(s===u)return!0;if(s==null||u===null||u===void 0||typeof s!=typeof u||typeof s!="object")return!1;let d=Array.isArray(s),h=Array.isArray(u);if(d!==h)return!1;if(d&&h){if(s.length!==u.length)return!1;for(let p=0;p<s.length;p++)if(!i(s[p],u[p]))return!1}if(ot.objectLiteral(s)&&ot.objectLiteral(u)){let p=Object.keys(s),D=Object.keys(u);if(p.length!==D.length||(p.sort(),D.sort(),!i(p,D)))return!1;for(let P=0;P<p.length;P++){let R=p[P];if(!i(s[R],u[R]))return!1}}return!0}})(Vo=J.NotebookCell||(J.NotebookCell={}));var Bf;(function(e){function t(r,i,s,u){return{uri:r,notebookType:i,version:s,cells:u}}e.create=t;function n(r){let i=r;return ot.objectLiteral(i)&&ot.string(i.uri)&&Kn.integer.is(i.version)&&ot.typedArray(i.cells,Vo.is)}e.is=n})(Bf=J.NotebookDocument||(J.NotebookDocument={}));var Qn;(function(e){e.method="notebookDocument/sync",e.messageDirection=dt.MessageDirection.clientToServer,e.type=new dt.RegistrationType(e.method)})(Qn=J.NotebookDocumentSyncRegistrationType||(J.NotebookDocumentSyncRegistrationType={}));var Gf;(function(e){e.method="notebookDocument/didOpen",e.messageDirection=dt.MessageDirection.clientToServer,e.type=new dt.ProtocolNotificationType(e.method),e.registrationMethod=Qn.method})(Gf=J.DidOpenNotebookDocumentNotification||(J.DidOpenNotebookDocumentNotification={}));var Uf;(function(e){function t(r){let i=r;return ot.objectLiteral(i)&&Kn.uinteger.is(i.start)&&Kn.uinteger.is(i.deleteCount)&&(i.cells===void 0||ot.typedArray(i.cells,Vo.is))}e.is=t;function n(r,i,s){let u={start:r,deleteCount:i};return s!==void 0&&(u.cells=s),u}e.create=n})(Uf=J.NotebookCellArrayChange||(J.NotebookCellArrayChange={}));var Vf;(function(e){e.method="notebookDocument/didChange",e.messageDirection=dt.MessageDirection.clientToServer,e.type=new dt.ProtocolNotificationType(e.method),e.registrationMethod=Qn.method})(Vf=J.DidChangeNotebookDocumentNotification||(J.DidChangeNotebookDocumentNotification={}));var Xf;(function(e){e.method="notebookDocument/didSave",e.messageDirection=dt.MessageDirection.clientToServer,e.type=new dt.ProtocolNotificationType(e.method),e.registrationMethod=Qn.method})(Xf=J.DidSaveNotebookDocumentNotification||(J.DidSaveNotebookDocumentNotification={}));var Jf;(function(e){e.method="notebookDocument/didClose",e.messageDirection=dt.MessageDirection.clientToServer,e.type=new dt.ProtocolNotificationType(e.method),e.registrationMethod=Qn.method})(Jf=J.DidCloseNotebookDocumentNotification||(J.DidCloseNotebookDocumentNotification={}))});var Pc=O(c=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.WorkspaceSymbolRequest=c.CodeActionResolveRequest=c.CodeActionRequest=c.DocumentSymbolRequest=c.DocumentHighlightRequest=c.ReferencesRequest=c.DefinitionRequest=c.SignatureHelpRequest=c.SignatureHelpTriggerKind=c.HoverRequest=c.CompletionResolveRequest=c.CompletionRequest=c.CompletionTriggerKind=c.PublishDiagnosticsNotification=c.WatchKind=c.RelativePattern=c.FileChangeType=c.DidChangeWatchedFilesNotification=c.WillSaveTextDocumentWaitUntilRequest=c.WillSaveTextDocumentNotification=c.TextDocumentSaveReason=c.DidSaveTextDocumentNotification=c.DidCloseTextDocumentNotification=c.DidChangeTextDocumentNotification=c.TextDocumentContentChangeEvent=c.DidOpenTextDocumentNotification=c.TextDocumentSyncKind=c.TelemetryEventNotification=c.LogMessageNotification=c.ShowMessageRequest=c.ShowMessageNotification=c.MessageType=c.DidChangeConfigurationNotification=c.ExitNotification=c.ShutdownRequest=c.InitializedNotification=c.InitializeErrorCodes=c.InitializeRequest=c.WorkDoneProgressOptions=c.TextDocumentRegistrationOptions=c.StaticRegistrationOptions=c.PositionEncodingKind=c.FailureHandlingKind=c.ResourceOperationKind=c.UnregistrationRequest=c.RegistrationRequest=c.DocumentSelector=c.NotebookCellTextDocumentFilter=c.NotebookDocumentFilter=c.TextDocumentFilter=void 0;c.TypeHierarchySubtypesRequest=c.TypeHierarchyPrepareRequest=c.MonikerRequest=c.MonikerKind=c.UniquenessLevel=c.WillDeleteFilesRequest=c.DidDeleteFilesNotification=c.WillRenameFilesRequest=c.DidRenameFilesNotification=c.WillCreateFilesRequest=c.DidCreateFilesNotification=c.FileOperationPatternKind=c.LinkedEditingRangeRequest=c.ShowDocumentRequest=c.SemanticTokensRegistrationType=c.SemanticTokensRefreshRequest=c.SemanticTokensRangeRequest=c.SemanticTokensDeltaRequest=c.SemanticTokensRequest=c.TokenFormat=c.CallHierarchyPrepareRequest=c.CallHierarchyOutgoingCallsRequest=c.CallHierarchyIncomingCallsRequest=c.WorkDoneProgressCancelNotification=c.WorkDoneProgressCreateRequest=c.WorkDoneProgress=c.SelectionRangeRequest=c.DeclarationRequest=c.FoldingRangeRequest=c.ColorPresentationRequest=c.DocumentColorRequest=c.ConfigurationRequest=c.DidChangeWorkspaceFoldersNotification=c.WorkspaceFoldersRequest=c.TypeDefinitionRequest=c.ImplementationRequest=c.ApplyWorkspaceEditRequest=c.ExecuteCommandRequest=c.PrepareRenameRequest=c.RenameRequest=c.PrepareSupportDefaultBehavior=c.DocumentOnTypeFormattingRequest=c.DocumentRangeFormattingRequest=c.DocumentFormattingRequest=c.DocumentLinkResolveRequest=c.DocumentLinkRequest=c.CodeLensRefreshRequest=c.CodeLensResolveRequest=c.CodeLensRequest=c.WorkspaceSymbolResolveRequest=void 0;c.DidCloseNotebookDocumentNotification=c.DidSaveNotebookDocumentNotification=c.DidChangeNotebookDocumentNotification=c.NotebookCellArrayChange=c.DidOpenNotebookDocumentNotification=c.NotebookDocumentSyncRegistrationType=c.NotebookDocument=c.NotebookCell=c.ExecutionSummary=c.NotebookCellKind=c.DiagnosticRefreshRequest=c.WorkspaceDiagnosticRequest=c.DocumentDiagnosticRequest=c.DocumentDiagnosticReportKind=c.DiagnosticServerCancellationData=c.InlayHintRefreshRequest=c.InlayHintResolveRequest=c.InlayHintRequest=c.InlineValueRefreshRequest=c.InlineValueRequest=c.TypeHierarchySupertypesRequest=void 0;var q=ue(),bc=Pr(),ke=Cr(),Kf=$a();Object.defineProperty(c,"ImplementationRequest",{enumerable:!0,get:function(){return Kf.ImplementationRequest}});var Qf=Ba();Object.defineProperty(c,"TypeDefinitionRequest",{enumerable:!0,get:function(){return Qf.TypeDefinitionRequest}});var _c=Ga();Object.defineProperty(c,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return _c.WorkspaceFoldersRequest}});Object.defineProperty(c,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return _c.DidChangeWorkspaceFoldersNotification}});var Yf=Va();Object.defineProperty(c,"ConfigurationRequest",{enumerable:!0,get:function(){return Yf.ConfigurationRequest}});var Dc=Xa();Object.defineProperty(c,"DocumentColorRequest",{enumerable:!0,get:function(){return Dc.DocumentColorRequest}});Object.defineProperty(c,"ColorPresentationRequest",{enumerable:!0,get:function(){return Dc.ColorPresentationRequest}});var Zf=Ka();Object.defineProperty(c,"FoldingRangeRequest",{enumerable:!0,get:function(){return Zf.FoldingRangeRequest}});var eh=Ya();Object.defineProperty(c,"DeclarationRequest",{enumerable:!0,get:function(){return eh.DeclarationRequest}});var th=ec();Object.defineProperty(c,"SelectionRangeRequest",{enumerable:!0,get:function(){return th.SelectionRangeRequest}});var Xo=tc();Object.defineProperty(c,"WorkDoneProgress",{enumerable:!0,get:function(){return Xo.WorkDoneProgress}});Object.defineProperty(c,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Xo.WorkDoneProgressCreateRequest}});Object.defineProperty(c,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Xo.WorkDoneProgressCancelNotification}});var Jo=nc();Object.defineProperty(c,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Jo.CallHierarchyIncomingCallsRequest}});Object.defineProperty(c,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Jo.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(c,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Jo.CallHierarchyPrepareRequest}});var wn=rc();Object.defineProperty(c,"TokenFormat",{enumerable:!0,get:function(){return wn.TokenFormat}});Object.defineProperty(c,"SemanticTokensRequest",{enumerable:!0,get:function(){return wn.SemanticTokensRequest}});Object.defineProperty(c,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return wn.SemanticTokensDeltaRequest}});Object.defineProperty(c,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return wn.SemanticTokensRangeRequest}});Object.defineProperty(c,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return wn.SemanticTokensRefreshRequest}});Object.defineProperty(c,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return wn.SemanticTokensRegistrationType}});var nh=oc();Object.defineProperty(c,"ShowDocumentRequest",{enumerable:!0,get:function(){return nh.ShowDocumentRequest}});var rh=ac();Object.defineProperty(c,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return rh.LinkedEditingRangeRequest}});var Zt=cc();Object.defineProperty(c,"FileOperationPatternKind",{enumerable:!0,get:function(){return Zt.FileOperationPatternKind}});Object.defineProperty(c,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Zt.DidCreateFilesNotification}});Object.defineProperty(c,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Zt.WillCreateFilesRequest}});Object.defineProperty(c,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Zt.DidRenameFilesNotification}});Object.defineProperty(c,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Zt.WillRenameFilesRequest}});Object.defineProperty(c,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Zt.DidDeleteFilesNotification}});Object.defineProperty(c,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Zt.WillDeleteFilesRequest}});var Ko=lc();Object.defineProperty(c,"UniquenessLevel",{enumerable:!0,get:function(){return Ko.UniquenessLevel}});Object.defineProperty(c,"MonikerKind",{enumerable:!0,get:function(){return Ko.MonikerKind}});Object.defineProperty(c,"MonikerRequest",{enumerable:!0,get:function(){return Ko.MonikerRequest}});var Qo=dc();Object.defineProperty(c,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Qo.TypeHierarchyPrepareRequest}});Object.defineProperty(c,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Qo.TypeHierarchySubtypesRequest}});Object.defineProperty(c,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Qo.TypeHierarchySupertypesRequest}});var Rc=fc();Object.defineProperty(c,"InlineValueRequest",{enumerable:!0,get:function(){return Rc.InlineValueRequest}});Object.defineProperty(c,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Rc.InlineValueRefreshRequest}});var Yo=hc();Object.defineProperty(c,"InlayHintRequest",{enumerable:!0,get:function(){return Yo.InlayHintRequest}});Object.defineProperty(c,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Yo.InlayHintResolveRequest}});Object.defineProperty(c,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Yo.InlayHintRefreshRequest}});var Yn=mc();Object.defineProperty(c,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Yn.DiagnosticServerCancellationData}});Object.defineProperty(c,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Yn.DocumentDiagnosticReportKind}});Object.defineProperty(c,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Yn.DocumentDiagnosticRequest}});Object.defineProperty(c,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Yn.WorkspaceDiagnosticRequest}});Object.defineProperty(c,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Yn.DiagnosticRefreshRequest}});var ft=vc();Object.defineProperty(c,"NotebookCellKind",{enumerable:!0,get:function(){return ft.NotebookCellKind}});Object.defineProperty(c,"ExecutionSummary",{enumerable:!0,get:function(){return ft.ExecutionSummary}});Object.defineProperty(c,"NotebookCell",{enumerable:!0,get:function(){return ft.NotebookCell}});Object.defineProperty(c,"NotebookDocument",{enumerable:!0,get:function(){return ft.NotebookDocument}});Object.defineProperty(c,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return ft.NotebookDocumentSyncRegistrationType}});Object.defineProperty(c,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return ft.DidOpenNotebookDocumentNotification}});Object.defineProperty(c,"NotebookCellArrayChange",{enumerable:!0,get:function(){return ft.NotebookCellArrayChange}});Object.defineProperty(c,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return ft.DidChangeNotebookDocumentNotification}});Object.defineProperty(c,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return ft.DidSaveNotebookDocumentNotification}});Object.defineProperty(c,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return ft.DidCloseNotebookDocumentNotification}});var wc;(function(e){function t(n){let r=n;return ke.string(r.language)||ke.string(r.scheme)||ke.string(r.pattern)}e.is=t})(wc=c.TextDocumentFilter||(c.TextDocumentFilter={}));var kc;(function(e){function t(n){let r=n;return ke.objectLiteral(r)&&(ke.string(r.notebookType)||ke.string(r.scheme)||ke.string(r.pattern))}e.is=t})(kc=c.NotebookDocumentFilter||(c.NotebookDocumentFilter={}));var Tc;(function(e){function t(n){let r=n;return ke.objectLiteral(r)&&(ke.string(r.notebook)||kc.is(r.notebook))&&(r.language===void 0||ke.string(r.language))}e.is=t})(Tc=c.NotebookCellTextDocumentFilter||(c.NotebookCellTextDocumentFilter={}));var Sc;(function(e){function t(n){if(!Array.isArray(n))return!1;for(let r of n)if(!ke.string(r)&&!wc.is(r)&&!Tc.is(r))return!1;return!0}e.is=t})(Sc=c.DocumentSelector||(c.DocumentSelector={}));var ih;(function(e){e.method="client/registerCapability",e.messageDirection=q.MessageDirection.serverToClient,e.type=new q.ProtocolRequestType(e.method)})(ih=c.RegistrationRequest||(c.RegistrationRequest={}));var oh;(function(e){e.method="client/unregisterCapability",e.messageDirection=q.MessageDirection.serverToClient,e.type=new q.ProtocolRequestType(e.method)})(oh=c.UnregistrationRequest||(c.UnregistrationRequest={}));var sh;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete"})(sh=c.ResourceOperationKind||(c.ResourceOperationKind={}));var ah;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"})(ah=c.FailureHandlingKind||(c.FailureHandlingKind={}));var ch;(function(e){e.UTF8="utf-8",e.UTF16="utf-16",e.UTF32="utf-32"})(ch=c.PositionEncodingKind||(c.PositionEncodingKind={}));var uh;(function(e){function t(n){let r=n;return r&&ke.string(r.id)&&r.id.length>0}e.hasId=t})(uh=c.StaticRegistrationOptions||(c.StaticRegistrationOptions={}));var lh;(function(e){function t(n){let r=n;return r&&(r.documentSelector===null||Sc.is(r.documentSelector))}e.is=t})(lh=c.TextDocumentRegistrationOptions||(c.TextDocumentRegistrationOptions={}));var dh;(function(e){function t(r){let i=r;return ke.objectLiteral(i)&&(i.workDoneProgress===void 0||ke.boolean(i.workDoneProgress))}e.is=t;function n(r){let i=r;return i&&ke.boolean(i.workDoneProgress)}e.hasWorkDoneProgress=n})(dh=c.WorkDoneProgressOptions||(c.WorkDoneProgressOptions={}));var fh;(function(e){e.method="initialize",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(fh=c.InitializeRequest||(c.InitializeRequest={}));var hh;(function(e){e.unknownProtocolVersion=1})(hh=c.InitializeErrorCodes||(c.InitializeErrorCodes={}));var gh;(function(e){e.method="initialized",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolNotificationType(e.method)})(gh=c.InitializedNotification||(c.InitializedNotification={}));var mh;(function(e){e.method="shutdown",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType0(e.method)})(mh=c.ShutdownRequest||(c.ShutdownRequest={}));var ph;(function(e){e.method="exit",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolNotificationType0(e.method)})(ph=c.ExitNotification||(c.ExitNotification={}));var yh;(function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolNotificationType(e.method)})(yh=c.DidChangeConfigurationNotification||(c.DidChangeConfigurationNotification={}));var vh;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4})(vh=c.MessageType||(c.MessageType={}));var bh;(function(e){e.method="window/showMessage",e.messageDirection=q.MessageDirection.serverToClient,e.type=new q.ProtocolNotificationType(e.method)})(bh=c.ShowMessageNotification||(c.ShowMessageNotification={}));var _h;(function(e){e.method="window/showMessageRequest",e.messageDirection=q.MessageDirection.serverToClient,e.type=new q.ProtocolRequestType(e.method)})(_h=c.ShowMessageRequest||(c.ShowMessageRequest={}));var Dh;(function(e){e.method="window/logMessage",e.messageDirection=q.MessageDirection.serverToClient,e.type=new q.ProtocolNotificationType(e.method)})(Dh=c.LogMessageNotification||(c.LogMessageNotification={}));var Rh;(function(e){e.method="telemetry/event",e.messageDirection=q.MessageDirection.serverToClient,e.type=new q.ProtocolNotificationType(e.method)})(Rh=c.TelemetryEventNotification||(c.TelemetryEventNotification={}));var wh;(function(e){e.None=0,e.Full=1,e.Incremental=2})(wh=c.TextDocumentSyncKind||(c.TextDocumentSyncKind={}));var kh;(function(e){e.method="textDocument/didOpen",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolNotificationType(e.method)})(kh=c.DidOpenTextDocumentNotification||(c.DidOpenTextDocumentNotification={}));var Th;(function(e){function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}e.isIncremental=t;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}e.isFull=n})(Th=c.TextDocumentContentChangeEvent||(c.TextDocumentContentChangeEvent={}));var Sh;(function(e){e.method="textDocument/didChange",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolNotificationType(e.method)})(Sh=c.DidChangeTextDocumentNotification||(c.DidChangeTextDocumentNotification={}));var Ph;(function(e){e.method="textDocument/didClose",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolNotificationType(e.method)})(Ph=c.DidCloseTextDocumentNotification||(c.DidCloseTextDocumentNotification={}));var Ch;(function(e){e.method="textDocument/didSave",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolNotificationType(e.method)})(Ch=c.DidSaveTextDocumentNotification||(c.DidSaveTextDocumentNotification={}));var qh;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(qh=c.TextDocumentSaveReason||(c.TextDocumentSaveReason={}));var Eh;(function(e){e.method="textDocument/willSave",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolNotificationType(e.method)})(Eh=c.WillSaveTextDocumentNotification||(c.WillSaveTextDocumentNotification={}));var Oh;(function(e){e.method="textDocument/willSaveWaitUntil",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(Oh=c.WillSaveTextDocumentWaitUntilRequest||(c.WillSaveTextDocumentWaitUntilRequest={}));var Nh;(function(e){e.method="workspace/didChangeWatchedFiles",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolNotificationType(e.method)})(Nh=c.DidChangeWatchedFilesNotification||(c.DidChangeWatchedFilesNotification={}));var Mh;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(Mh=c.FileChangeType||(c.FileChangeType={}));var jh;(function(e){function t(n){let r=n;return ke.objectLiteral(r)&&(bc.URI.is(r.baseUri)||bc.WorkspaceFolder.is(r.baseUri))&&ke.string(r.pattern)}e.is=t})(jh=c.RelativePattern||(c.RelativePattern={}));var Ih;(function(e){e.Create=1,e.Change=2,e.Delete=4})(Ih=c.WatchKind||(c.WatchKind={}));var Fh;(function(e){e.method="textDocument/publishDiagnostics",e.messageDirection=q.MessageDirection.serverToClient,e.type=new q.ProtocolNotificationType(e.method)})(Fh=c.PublishDiagnosticsNotification||(c.PublishDiagnosticsNotification={}));var Lh;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(Lh=c.CompletionTriggerKind||(c.CompletionTriggerKind={}));var xh;(function(e){e.method="textDocument/completion",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(xh=c.CompletionRequest||(c.CompletionRequest={}));var Ah;(function(e){e.method="completionItem/resolve",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(Ah=c.CompletionResolveRequest||(c.CompletionResolveRequest={}));var Wh;(function(e){e.method="textDocument/hover",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(Wh=c.HoverRequest||(c.HoverRequest={}));var Hh;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(Hh=c.SignatureHelpTriggerKind||(c.SignatureHelpTriggerKind={}));var $h;(function(e){e.method="textDocument/signatureHelp",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})($h=c.SignatureHelpRequest||(c.SignatureHelpRequest={}));var zh;(function(e){e.method="textDocument/definition",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(zh=c.DefinitionRequest||(c.DefinitionRequest={}));var Bh;(function(e){e.method="textDocument/references",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(Bh=c.ReferencesRequest||(c.ReferencesRequest={}));var Gh;(function(e){e.method="textDocument/documentHighlight",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(Gh=c.DocumentHighlightRequest||(c.DocumentHighlightRequest={}));var Uh;(function(e){e.method="textDocument/documentSymbol",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(Uh=c.DocumentSymbolRequest||(c.DocumentSymbolRequest={}));var Vh;(function(e){e.method="textDocument/codeAction",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(Vh=c.CodeActionRequest||(c.CodeActionRequest={}));var Xh;(function(e){e.method="codeAction/resolve",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(Xh=c.CodeActionResolveRequest||(c.CodeActionResolveRequest={}));var Jh;(function(e){e.method="workspace/symbol",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(Jh=c.WorkspaceSymbolRequest||(c.WorkspaceSymbolRequest={}));var Kh;(function(e){e.method="workspaceSymbol/resolve",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(Kh=c.WorkspaceSymbolResolveRequest||(c.WorkspaceSymbolResolveRequest={}));var Qh;(function(e){e.method="textDocument/codeLens",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(Qh=c.CodeLensRequest||(c.CodeLensRequest={}));var Yh;(function(e){e.method="codeLens/resolve",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(Yh=c.CodeLensResolveRequest||(c.CodeLensResolveRequest={}));var Zh;(function(e){e.method="workspace/codeLens/refresh",e.messageDirection=q.MessageDirection.serverToClient,e.type=new q.ProtocolRequestType0(e.method)})(Zh=c.CodeLensRefreshRequest||(c.CodeLensRefreshRequest={}));var eg;(function(e){e.method="textDocument/documentLink",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(eg=c.DocumentLinkRequest||(c.DocumentLinkRequest={}));var tg;(function(e){e.method="documentLink/resolve",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(tg=c.DocumentLinkResolveRequest||(c.DocumentLinkResolveRequest={}));var ng;(function(e){e.method="textDocument/formatting",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(ng=c.DocumentFormattingRequest||(c.DocumentFormattingRequest={}));var rg;(function(e){e.method="textDocument/rangeFormatting",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(rg=c.DocumentRangeFormattingRequest||(c.DocumentRangeFormattingRequest={}));var ig;(function(e){e.method="textDocument/onTypeFormatting",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(ig=c.DocumentOnTypeFormattingRequest||(c.DocumentOnTypeFormattingRequest={}));var og;(function(e){e.Identifier=1})(og=c.PrepareSupportDefaultBehavior||(c.PrepareSupportDefaultBehavior={}));var sg;(function(e){e.method="textDocument/rename",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(sg=c.RenameRequest||(c.RenameRequest={}));var ag;(function(e){e.method="textDocument/prepareRename",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(ag=c.PrepareRenameRequest||(c.PrepareRenameRequest={}));var cg;(function(e){e.method="workspace/executeCommand",e.messageDirection=q.MessageDirection.clientToServer,e.type=new q.ProtocolRequestType(e.method)})(cg=c.ExecuteCommandRequest||(c.ExecuteCommandRequest={}));var ug;(function(e){e.method="workspace/applyEdit",e.messageDirection=q.MessageDirection.serverToClient,e.type=new q.ProtocolRequestType("workspace/applyEdit")})(ug=c.ApplyWorkspaceEditRequest||(c.ApplyWorkspaceEditRequest={}))});var qc=O(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.createProtocolConnection=void 0;var Cc=Yt();function lg(e,t,n,r){return Cc.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Cc.createMessageConnection)(e,t,n,r)}jr.createProtocolConnection=lg});var Ec=O(Me=>{"use strict";var dg=Me&&Me.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Ir=Me&&Me.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&dg(t,e,n)};Object.defineProperty(Me,"__esModule",{value:!0});Me.LSPErrorCodes=Me.createProtocolConnection=void 0;Ir(Yt(),Me);Ir(Pr(),Me);Ir(ue(),Me);Ir(Pc(),Me);var fg=qc();Object.defineProperty(Me,"createProtocolConnection",{enumerable:!0,get:function(){return fg.createProtocolConnection}});var hg;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(hg=Me.LSPErrorCodes||(Me.LSPErrorCodes={}))});var ye=O(ht=>{"use strict";var gg=ht&&ht.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Oc=ht&&ht.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&gg(t,e,n)};Object.defineProperty(ht,"__esModule",{value:!0});ht.createProtocolConnection=void 0;var mg=Ho();Oc(Ho(),ht);Oc(Ec(),ht);function pg(e,t,n,r){return(0,mg.createMessageConnection)(e,t,n,r)}ht.createProtocolConnection=pg});var Zo=O(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.generateUuid=ze.parse=ze.isUUID=ze.v4=ze.empty=void 0;var Zn=class{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},B=class extends Zn{constructor(){super([B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),"-",B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),"-","4",B._randomHex(),B._randomHex(),B._randomHex(),"-",B._oneOf(B._timeHighBits),B._randomHex(),B._randomHex(),B._randomHex(),"-",B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex()].join(""))}static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return B._oneOf(B._chars)}};B._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];B._timeHighBits=["8","9","a","b"];ze.empty=new Zn("00000000-0000-0000-0000-000000000000");function Nc(){return new B}ze.v4=Nc;var yg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Mc(e){return yg.test(e)}ze.isUUID=Mc;function vg(e){if(!Mc(e))throw new Error("invalid uuid");return new Zn(e)}ze.parse=vg;function bg(){return Nc().asHex()}ze.generateUuid=bg});var jc=O(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.attachPartialResult=Ft.ProgressFeature=Ft.attachWorkDone=void 0;var It=ye(),_g=Zo(),gt=class{constructor(t,n){this._connection=t,this._token=n,gt.Instances.set(this._token,this)}begin(t,n,r,i){let s={kind:"begin",title:t,percentage:n,message:r,cancellable:i};this._connection.sendProgress(It.WorkDoneProgress.type,this._token,s)}report(t,n){let r={kind:"report"};typeof t=="number"?(r.percentage=t,n!==void 0&&(r.message=n)):r.message=t,this._connection.sendProgress(It.WorkDoneProgress.type,this._token,r)}done(){gt.Instances.delete(this._token),this._connection.sendProgress(It.WorkDoneProgress.type,this._token,{kind:"end"})}};gt.Instances=new Map;var Fr=class extends gt{constructor(t,n){super(t,n),this._source=new It.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},er=class{constructor(){}begin(){}report(){}done(){}},Lr=class extends er{constructor(){super(),this._source=new It.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Dg(e,t){if(t===void 0||t.workDoneToken===void 0)return new er;let n=t.workDoneToken;return delete t.workDoneToken,new gt(e,n)}Ft.attachWorkDone=Dg;var Rg=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(t){super.initialize(t),t?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(It.WorkDoneProgressCancelNotification.type,n=>{let r=gt.Instances.get(n.token);(r instanceof Fr||r instanceof Lr)&&r.cancel()}))}attachWorkDoneProgress(t){return t===void 0?new er:new gt(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){let t=(0,_g.generateUuid)();return this.connection.sendRequest(It.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new Fr(this.connection,t))}else return Promise.resolve(new Lr)}};Ft.ProgressFeature=Rg;var es;(function(e){e.type=new It.ProgressType})(es||(es={}));var ts=class{constructor(t,n){this._connection=t,this._token=n}report(t){this._connection.sendProgress(es.type,this._token,t)}};function wg(e,t){if(t===void 0||t.partialResultToken===void 0)return;let n=t.partialResultToken;return delete t.partialResultToken,new ts(e,n)}Ft.attachPartialResult=wg});var Ic=O(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.ConfigurationFeature=void 0;var kg=ye(),Tg=mr(),Sg=e=>class extends e{getConfiguration(t){return t?Tg.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let n={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(kg.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(t)?r:r[0]:Array.isArray(t)?[]:null)}};xr.ConfigurationFeature=Sg});var Fc=O(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.WorkspaceFoldersFeature=void 0;var Ar=ye(),Pg=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(t){super.initialize(t);let n=t.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Ar.Emitter,this.connection.onNotification(Ar.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(t){super.fillServerCapabilities(t);let n=t.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Ar.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Ar.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Wr.WorkspaceFoldersFeature=Pg});var Lc=O(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.CallHierarchyFeature=void 0;var ns=ye(),Cg=e=>class extends e{get callHierarchy(){return{onPrepare:t=>this.connection.onRequest(ns.CallHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:t=>{let n=ns.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:t=>{let n=ns.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Hr.CallHierarchyFeature=Cg});var is=O(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.SemanticTokensBuilder=Lt.SemanticTokensDiff=Lt.SemanticTokensFeature=void 0;var $r=ye(),qg=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest($r.SemanticTokensRefreshRequest.type),on:t=>{let n=$r.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:t=>{let n=$r.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:t=>{let n=$r.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Lt.SemanticTokensFeature=qg;var zr=class{constructor(t,n){this.originalSequence=t,this.modifiedSequence=n}computeDiff(){let t=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<t&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<t){let i=t-1,s=n-1;for(;i>=r&&s>=r&&this.originalSequence[i]===this.modifiedSequence[s];)i--,s--;(i<r||s<r)&&(i++,s++);let u=i-r+1,d=this.modifiedSequence.slice(r,s+1);return d.length===1&&d[0]===this.originalSequence[i]?[{start:r,deleteCount:u-1}]:[{start:r,deleteCount:u,data:d}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<t?[{start:r,deleteCount:t-r}]:[]}};Lt.SemanticTokensDiff=zr;var rs=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(t,n,r,i,s){let u=t,d=n;this._dataLen>0&&(u-=this._prevLine,u===0&&(d-=this._prevChar)),this._data[this._dataLen++]=u,this._data[this._dataLen++]=d,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=s,this._prevLine=t,this._prevChar=n}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new zr(this._prevData,this._data).computeDiff()}:this.build()}};Lt.SemanticTokensBuilder=rs});var xc=O(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.ShowDocumentFeature=void 0;var Eg=ye(),Og=e=>class extends e{showDocument(t){return this.connection.sendRequest(Eg.ShowDocumentRequest.type,t)}};Br.ShowDocumentFeature=Og});var Ac=O(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.FileOperationsFeature=void 0;var kn=ye(),Ng=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification(kn.DidCreateFilesNotification.type,n=>{t(n)})}onDidRenameFiles(t){return this.connection.onNotification(kn.DidRenameFilesNotification.type,n=>{t(n)})}onDidDeleteFiles(t){return this.connection.onNotification(kn.DidDeleteFilesNotification.type,n=>{t(n)})}onWillCreateFiles(t){return this.connection.onRequest(kn.WillCreateFilesRequest.type,(n,r)=>t(n,r))}onWillRenameFiles(t){return this.connection.onRequest(kn.WillRenameFilesRequest.type,(n,r)=>t(n,r))}onWillDeleteFiles(t){return this.connection.onRequest(kn.WillDeleteFilesRequest.type,(n,r)=>t(n,r))}};Gr.FileOperationsFeature=Ng});var Wc=O(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.LinkedEditingRangeFeature=void 0;var Mg=ye(),jg=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest(Mg.LinkedEditingRangeRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0))}};Ur.LinkedEditingRangeFeature=jg});var Hc=O(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.TypeHierarchyFeature=void 0;var os=ye(),Ig=e=>class extends e{get typeHierarchy(){return{onPrepare:t=>this.connection.onRequest(os.TypeHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:t=>{let n=os.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:t=>{let n=os.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Vr.TypeHierarchyFeature=Ig});var zc=O(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.InlineValueFeature=void 0;var $c=ye(),Fg=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest($c.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest($c.InlineValueRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};Xr.InlineValueFeature=Fg});var Bc=O(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.InlayHintFeature=void 0;var ss=ye(),Lg=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(ss.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(ss.InlayHintRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n))),resolve:t=>this.connection.onRequest(ss.InlayHintResolveRequest.type,(n,r)=>t(n,r))}}};Jr.InlayHintFeature=Lg});var Gc=O(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.DiagnosticFeature=void 0;var tr=ye(),xg=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(tr.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(tr.DocumentDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(tr.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:t=>this.connection.onRequest(tr.WorkspaceDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(tr.WorkspaceDiagnosticRequest.partialResult,n)))}}};Kr.DiagnosticFeature=xg});var cs=O(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.TextDocuments=void 0;var en=ye(),as=class{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new en.Emitter,this._onDidOpen=new en.Emitter,this._onDidClose=new en.Emitter,this._onDidSave=new en.Emitter,this._onWillSave=new en.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=en.TextDocumentSyncKind.Incremental;let n=[];return n.push(t.onDidOpenTextDocument(r=>{let i=r.textDocument,s=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,s);let u=Object.freeze({document:s});this._onDidOpen.fire(u),this._onDidChangeContent.fire(u)})),n.push(t.onDidChangeTextDocument(r=>{let i=r.textDocument,s=r.contentChanges;if(s.length===0)return;let{version:u}=i;if(u==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let d=this._syncedDocuments.get(i.uri);d!==void 0&&(d=this._configuration.update(d,s,u),this._syncedDocuments.set(i.uri,d),this._onDidChangeContent.fire(Object.freeze({document:d})))})),n.push(t.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(t.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(t.onWillSaveTextDocumentWaitUntil((r,i)=>{let s=this._syncedDocuments.get(r.textDocument.uri);return s!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:s,reason:r.reason}),i):[]})),n.push(t.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),en.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};Qr.TextDocuments=as});var ls=O(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.NotebookDocuments=Tn.NotebookSyncFeature=void 0;var Be=ye(),Uc=cs(),Ag=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:t=>this.connection.onNotification(Be.DidOpenNotebookDocumentNotification.type,n=>{t(n)}),onDidChangeNotebookDocument:t=>this.connection.onNotification(Be.DidChangeNotebookDocumentNotification.type,n=>{t(n)}),onDidSaveNotebookDocument:t=>this.connection.onNotification(Be.DidSaveNotebookDocumentNotification.type,n=>{t(n)}),onDidCloseNotebookDocument:t=>this.connection.onNotification(Be.DidCloseNotebookDocumentNotification.type,n=>{t(n)})}}};Tn.NotebookSyncFeature=Ag;var xt=class{onDidOpenTextDocument(t){return this.openHandler=t,Be.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(t){this.openHandler&&this.openHandler(t)}onDidChangeTextDocument(t){return this.changeHandler=t,Be.Disposable.create(()=>{this.changeHandler=t})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t)}onDidCloseTextDocument(t){return this.closeHandler=t,Be.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t)}onWillSaveTextDocument(){return xt.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return xt.NULL_DISPOSE}onDidSaveTextDocument(){return xt.NULL_DISPOSE}};xt.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var us=class{constructor(t){t instanceof Uc.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new Uc.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Be.Emitter,this._onDidChange=new Be.Emitter,this._onDidSave=new Be.Emitter,this._onDidClose=new Be.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){let n=this.notebookCellMap.get(t);return n&&n[0]}findNotebookDocumentForCell(t){let n=typeof t=="string"?t:t.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){let n=new xt,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(t.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let s of i.cellTextDocuments)n.openTextDocument({textDocument:s});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(t.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);if(s===void 0)return;s.version=i.notebookDocument.version;let u=s.metadata,d=!1,h=i.change;h.metadata!==void 0&&(d=!0,s.metadata=h.metadata);let p=[],D=[],P=[],R=[];if(h.cells!==void 0){let j=h.cells;if(j.structure!==void 0){let v=j.structure.array;if(s.cells.splice(v.start,v.deleteCount,...v.cells!==void 0?v.cells:[]),j.structure.didOpen!==void 0)for(let y of j.structure.didOpen)n.openTextDocument({textDocument:y}),p.push(y.uri);if(j.structure.didClose)for(let y of j.structure.didClose)n.closeTextDocument({textDocument:y}),D.push(y.uri)}if(j.data!==void 0){let v=new Map(j.data.map(y=>[y.document,y]));for(let y=0;y<=s.cells.length;y++){let k=v.get(s.cells[y].document);if(k!==void 0){let A=s.cells.splice(y,1,k);if(P.push({old:A[0],new:k}),v.delete(k.document),v.size===0)break}}}if(j.textContent!==void 0)for(let v of j.textContent)n.changeTextDocument({textDocument:v.document,contentChanges:v.changes}),R.push(v.document.uri)}this.updateCellMap(s);let C={notebookDocument:s};d&&(C.metadata={old:u,new:s.metadata});let E=[];for(let j of p)E.push(this.getNotebookCell(j));let I=[];for(let j of D)I.push(this.getNotebookCell(j));let F=[];for(let j of R)F.push(this.getNotebookCell(j));(E.length>0||I.length>0||P.length>0||F.length>0)&&(C.cells={added:E,removed:I,changed:{data:P,textContent:F}}),(C.metadata!==void 0||C.cells!==void 0)&&this._onDidChange.fire(C)})),r.push(t.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);s!==void 0&&this._onDidSave.fire(s)})),r.push(t.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);if(s!==void 0){this._onDidClose.fire(s);for(let u of i.cellTextDocuments)n.closeTextDocument({textDocument:u});this.notebookDocuments.delete(i.notebookDocument.uri);for(let u of s.cells)this.notebookCellMap.delete(u.document)}})),Be.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(t){for(let n of t.cells)this.notebookCellMap.set(n.document,[n,t])}};Tn.NotebookDocuments=us});var Vc=O(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.MonikerFeature=void 0;var Wg=ye(),Hg=e=>class extends e{get moniker(){return{on:t=>{let n=Wg.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Yr.MonikerFeature=Hg});var ps=O(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.createConnection=V.combineFeatures=V.combineNotebooksFeatures=V.combineLanguagesFeatures=V.combineWorkspaceFeatures=V.combineWindowFeatures=V.combineClientFeatures=V.combineTracerFeatures=V.combineTelemetryFeatures=V.combineConsoleFeatures=V._NotebooksImpl=V._LanguagesImpl=V.BulkUnregistration=V.BulkRegistration=V.ErrorMessageTracker=void 0;var M=ye(),Ge=mr(),fs=Zo(),$=jc(),$g=Ic(),zg=Fc(),Bg=Lc(),Gg=is(),Ug=xc(),Vg=Ac(),Xg=Wc(),Jg=Hc(),Kg=zc(),Qg=Bc(),Yg=Gc(),Zg=ls(),em=Vc();function ds(e){if(e!==null)return e}var hs=class{constructor(){this._messages=Object.create(null)}add(t){let n=this._messages[t];n||(n=0),n++,this._messages[t]=n}sendErrors(t){Object.keys(this._messages).forEach(n=>{t.window.showErrorMessage(n)})}};V.ErrorMessageTracker=hs;var Zr=class{constructor(){}rawAttach(t){this._rawConnection=t}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(t){}initialize(t){}error(t){this.send(M.MessageType.Error,t)}warn(t){this.send(M.MessageType.Warning,t)}info(t){this.send(M.MessageType.Info,t)}log(t){this.send(M.MessageType.Log,t)}send(t,n){this._rawConnection&&this._rawConnection.sendNotification(M.LogMessageNotification.type,{type:t,message:n}).catch(()=>{(0,M.RAL)().console.error("Sending log message failed")})}},gs=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}showErrorMessage(t,...n){let r={type:M.MessageType.Error,message:t,actions:n};return this.connection.sendRequest(M.ShowMessageRequest.type,r).then(ds)}showWarningMessage(t,...n){let r={type:M.MessageType.Warning,message:t,actions:n};return this.connection.sendRequest(M.ShowMessageRequest.type,r).then(ds)}showInformationMessage(t,...n){let r={type:M.MessageType.Info,message:t,actions:n};return this.connection.sendRequest(M.ShowMessageRequest.type,r).then(ds)}},Xc=(0,Ug.ShowDocumentFeature)((0,$.ProgressFeature)(gs)),tm;(function(e){function t(){return new ei}e.create=t})(tm=V.BulkRegistration||(V.BulkRegistration={}));var ei=class{constructor(){this._registrations=[],this._registered=new Set}add(t,n){let r=Ge.string(t)?t:t.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=fs.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},nm;(function(e){function t(){return new nr(void 0,[])}e.create=t})(nm=V.BulkUnregistration||(V.BulkUnregistration={}));var nr=class{constructor(t,n){this._connection=t,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(t){this._connection=t}add(t){this._unregistrations.set(t.method,t)}dispose(){let t=[];for(let r of this._unregistrations.values())t.push(r);let n={unregisterations:t};this._connection.sendRequest(M.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(t){let n=Ge.string(t)?t:t.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(M.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},s=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},ti=class{attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}register(t,n,r){return t instanceof ei?this.registerMany(t):t instanceof nr?this.registerSingle1(t,n,r):this.registerSingle2(t,n)}registerSingle1(t,n,r){let i=Ge.string(n)?n:n.method,s=fs.generateUuid(),u={registrations:[{id:s,method:i,registerOptions:r||{}}]};return t.isAttached||t.attach(this.connection),this.connection.sendRequest(M.RegistrationRequest.type,u).then(d=>(t.add({id:s,method:i}),t),d=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(d)))}registerSingle2(t,n){let r=Ge.string(t)?t:t.method,i=fs.generateUuid(),s={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(M.RegistrationRequest.type,s).then(u=>M.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),u=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(u)))}unregisterSingle(t,n){let r={unregisterations:[{id:t,method:n}]};return this.connection.sendRequest(M.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${t} failed.`)})}registerMany(t){let n=t.asRegistrationParams();return this.connection.sendRequest(M.RegistrationRequest.type,n).then(()=>new nr(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},ms=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}applyEdit(t){function n(i){return i&&!!i.edit}let r=n(t)?t:{edit:t};return this.connection.sendRequest(M.ApplyWorkspaceEditRequest.type,r)}},Jc=(0,Vg.FileOperationsFeature)((0,zg.WorkspaceFoldersFeature)((0,$g.ConfigurationFeature)(ms))),ni=class{constructor(){this._trace=M.Trace.Off}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}set trace(t){this._trace=t}log(t,n){this._trace!==M.Trace.Off&&this.connection.sendNotification(M.LogTraceNotification.type,{message:t,verbose:this._trace===M.Trace.Verbose?n:void 0}).catch(()=>{})}},ri=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}logEvent(t){this.connection.sendNotification(M.TelemetryEventNotification.type,t).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},ii=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,$.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,$.attachPartialResult)(this.connection,n)}};V._LanguagesImpl=ii;var Kc=(0,em.MonikerFeature)((0,Yg.DiagnosticFeature)((0,Qg.InlayHintFeature)((0,Kg.InlineValueFeature)((0,Jg.TypeHierarchyFeature)((0,Xg.LinkedEditingRangeFeature)((0,Gg.SemanticTokensFeature)((0,Bg.CallHierarchyFeature)(ii)))))))),oi=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,$.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,$.attachPartialResult)(this.connection,n)}};V._NotebooksImpl=oi;var Qc=(0,Zg.NotebookSyncFeature)(oi);function Yc(e,t){return function(n){return t(e(n))}}V.combineConsoleFeatures=Yc;function Zc(e,t){return function(n){return t(e(n))}}V.combineTelemetryFeatures=Zc;function eu(e,t){return function(n){return t(e(n))}}V.combineTracerFeatures=eu;function tu(e,t){return function(n){return t(e(n))}}V.combineClientFeatures=tu;function nu(e,t){return function(n){return t(e(n))}}V.combineWindowFeatures=nu;function ru(e,t){return function(n){return t(e(n))}}V.combineWorkspaceFeatures=ru;function iu(e,t){return function(n){return t(e(n))}}V.combineLanguagesFeatures=iu;function ou(e,t){return function(n){return t(e(n))}}V.combineNotebooksFeatures=ou;function rm(e,t){function n(i,s,u){return i&&s?u(i,s):i||s}return{__brand:"features",console:n(e.console,t.console,Yc),tracer:n(e.tracer,t.tracer,eu),telemetry:n(e.telemetry,t.telemetry,Zc),client:n(e.client,t.client,tu),window:n(e.window,t.window,nu),workspace:n(e.workspace,t.workspace,ru),languages:n(e.languages,t.languages,iu),notebooks:n(e.notebooks,t.notebooks,ou)}}V.combineFeatures=rm;function im(e,t,n){let r=n&&n.console?new(n.console(Zr)):new Zr,i=e(r);r.rawAttach(i);let s=n&&n.tracer?new(n.tracer(ni)):new ni,u=n&&n.telemetry?new(n.telemetry(ri)):new ri,d=n&&n.client?new(n.client(ti)):new ti,h=n&&n.window?new(n.window(Xc)):new Xc,p=n&&n.workspace?new(n.workspace(Jc)):new Jc,D=n&&n.languages?new(n.languages(Kc)):new Kc,P=n&&n.notebooks?new(n.notebooks(Qc)):new Qc,R=[r,s,u,d,h,p,D,P];function C(v){return v instanceof Promise?v:Ge.thenable(v)?new Promise((y,k)=>{v.then(A=>y(A),A=>k(A))}):Promise.resolve(v)}let E,I,F,j={listen:()=>i.listen(),sendRequest:(v,...y)=>i.sendRequest(Ge.string(v)?v:v.method,...y),onRequest:(v,y)=>i.onRequest(v,y),sendNotification:(v,y)=>{let k=Ge.string(v)?v:v.method;return arguments.length===1?i.sendNotification(k):i.sendNotification(k,y)},onNotification:(v,y)=>i.onNotification(v,y),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:v=>(I=v,{dispose:()=>{I=void 0}}),onInitialized:v=>i.onNotification(M.InitializedNotification.type,v),onShutdown:v=>(E=v,{dispose:()=>{E=void 0}}),onExit:v=>(F=v,{dispose:()=>{F=void 0}}),get console(){return r},get telemetry(){return u},get tracer(){return s},get client(){return d},get window(){return h},get workspace(){return p},get languages(){return D},get notebooks(){return P},onDidChangeConfiguration:v=>i.onNotification(M.DidChangeConfigurationNotification.type,v),onDidChangeWatchedFiles:v=>i.onNotification(M.DidChangeWatchedFilesNotification.type,v),__textDocumentSync:void 0,onDidOpenTextDocument:v=>i.onNotification(M.DidOpenTextDocumentNotification.type,v),onDidChangeTextDocument:v=>i.onNotification(M.DidChangeTextDocumentNotification.type,v),onDidCloseTextDocument:v=>i.onNotification(M.DidCloseTextDocumentNotification.type,v),onWillSaveTextDocument:v=>i.onNotification(M.WillSaveTextDocumentNotification.type,v),onWillSaveTextDocumentWaitUntil:v=>i.onRequest(M.WillSaveTextDocumentWaitUntilRequest.type,v),onDidSaveTextDocument:v=>i.onNotification(M.DidSaveTextDocumentNotification.type,v),sendDiagnostics:v=>i.sendNotification(M.PublishDiagnosticsNotification.type,v),onHover:v=>i.onRequest(M.HoverRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),void 0)),onCompletion:v=>i.onRequest(M.CompletionRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onCompletionResolve:v=>i.onRequest(M.CompletionResolveRequest.type,v),onSignatureHelp:v=>i.onRequest(M.SignatureHelpRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),void 0)),onDeclaration:v=>i.onRequest(M.DeclarationRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onDefinition:v=>i.onRequest(M.DefinitionRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onTypeDefinition:v=>i.onRequest(M.TypeDefinitionRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onImplementation:v=>i.onRequest(M.ImplementationRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onReferences:v=>i.onRequest(M.ReferencesRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onDocumentHighlight:v=>i.onRequest(M.DocumentHighlightRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onDocumentSymbol:v=>i.onRequest(M.DocumentSymbolRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onWorkspaceSymbol:v=>i.onRequest(M.WorkspaceSymbolRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onWorkspaceSymbolResolve:v=>i.onRequest(M.WorkspaceSymbolResolveRequest.type,v),onCodeAction:v=>i.onRequest(M.CodeActionRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onCodeActionResolve:v=>i.onRequest(M.CodeActionResolveRequest.type,(y,k)=>v(y,k)),onCodeLens:v=>i.onRequest(M.CodeLensRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onCodeLensResolve:v=>i.onRequest(M.CodeLensResolveRequest.type,(y,k)=>v(y,k)),onDocumentFormatting:v=>i.onRequest(M.DocumentFormattingRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),void 0)),onDocumentRangeFormatting:v=>i.onRequest(M.DocumentRangeFormattingRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),void 0)),onDocumentOnTypeFormatting:v=>i.onRequest(M.DocumentOnTypeFormattingRequest.type,(y,k)=>v(y,k)),onRenameRequest:v=>i.onRequest(M.RenameRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),void 0)),onPrepareRename:v=>i.onRequest(M.PrepareRenameRequest.type,(y,k)=>v(y,k)),onDocumentLinks:v=>i.onRequest(M.DocumentLinkRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onDocumentLinkResolve:v=>i.onRequest(M.DocumentLinkResolveRequest.type,(y,k)=>v(y,k)),onDocumentColor:v=>i.onRequest(M.DocumentColorRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onColorPresentation:v=>i.onRequest(M.ColorPresentationRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onFoldingRanges:v=>i.onRequest(M.FoldingRangeRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onSelectionRanges:v=>i.onRequest(M.SelectionRangeRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),(0,$.attachPartialResult)(i,y))),onExecuteCommand:v=>i.onRequest(M.ExecuteCommandRequest.type,(y,k)=>v(y,k,(0,$.attachWorkDone)(i,y),void 0)),dispose:()=>i.dispose()};for(let v of R)v.attach(j);return i.onRequest(M.InitializeRequest.type,v=>{t.initialize(v),Ge.string(v.trace)&&(s.trace=M.Trace.fromString(v.trace));for(let y of R)y.initialize(v.capabilities);if(I){let y=I(v,new M.CancellationTokenSource().token,(0,$.attachWorkDone)(i,v),void 0);return C(y).then(k=>{if(k instanceof M.ResponseError)return k;let A=k;A||(A={capabilities:{}});let Q=A.capabilities;Q||(Q={},A.capabilities=Q),Q.textDocumentSync===void 0||Q.textDocumentSync===null?Q.textDocumentSync=Ge.number(j.__textDocumentSync)?j.__textDocumentSync:M.TextDocumentSyncKind.None:!Ge.number(Q.textDocumentSync)&&!Ge.number(Q.textDocumentSync.change)&&(Q.textDocumentSync.change=Ge.number(j.__textDocumentSync)?j.__textDocumentSync:M.TextDocumentSyncKind.None);for(let ee of R)ee.fillServerCapabilities(Q);return A})}else{let y={capabilities:{textDocumentSync:M.TextDocumentSyncKind.None}};for(let k of R)k.fillServerCapabilities(y.capabilities);return y}}),i.onRequest(M.ShutdownRequest.type,()=>{if(t.shutdownReceived=!0,E)return E(new M.CancellationTokenSource().token)}),i.onNotification(M.ExitNotification.type,()=>{try{F&&F()}finally{t.shutdownReceived?t.exit(0):t.exit(1)}}),i.onNotification(M.SetTraceNotification.type,v=>{s.trace=M.Trace.fromString(v.value)}),j}V.createConnection=im});var au=O(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.resolveModulePath=je.FileSystem=je.resolveGlobalYarnPath=je.resolveGlobalNodePath=je.resolve=je.uriToFilePath=void 0;var om=require("url"),st=require("path"),ys=require("fs"),_s=require("child_process");function sm(e){let t=om.parse(e);if(t.protocol!=="file:"||!t.path)return;let n=t.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let s=n[0],u=n[1];s.length===0&&u.length>1&&u[1]===":"&&n.shift()}return st.normalize(n.join("/"))}je.uriToFilePath=sm;function vs(){return process.platform==="win32"}function si(e,t,n,r){let i="NODE_PATH",s=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((u,d)=>{let h=process.env,p=Object.create(null);Object.keys(h).forEach(D=>p[D]=h[D]),t&&ys.existsSync(t)&&(p[i]?p[i]=t+st.delimiter+p[i]:p[i]=t,r&&r(`NODE_PATH value is: ${p[i]}`)),p.ELECTRON_RUN_AS_NODE="1";try{let D=(0,_s.fork)("",[],{cwd:n,env:p,execArgv:["-e",s]});if(D.pid===void 0){d(new Error(`Starting process to resolve node module  ${e} failed`));return}D.on("error",R=>{d(R)}),D.on("message",R=>{R.c==="r"&&(D.send({c:"e"}),R.s?u(R.r):d(new Error(`Failed to resolve module: ${e}`)))});let P={c:"rs",a:e};D.send(P)}catch(D){d(D)}})}je.resolve=si;function bs(e){let t="npm",n=Object.create(null);Object.keys(process.env).forEach(s=>n[s]=process.env[s]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};vs()&&(t="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let s=(0,_s.spawnSync)(t,["config","get","prefix"],r).stdout;if(!s){e&&e("'npm config get prefix' didn't return a value.");return}let u=s.trim();return e&&e(`'npm config get prefix' value is: ${u}`),u.length>0?vs()?st.join(u,"node_modules"):st.join(u,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}je.resolveGlobalNodePath=bs;function am(e){let t="yarn",n={encoding:"utf8"};vs()&&(t="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,_s.spawnSync)(t,["global","dir","--json"],n),s=i.stdout;if(!s){e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr));return}let u=s.trim().split(/\r?\n/);for(let d of u)try{let h=JSON.parse(d);if(h.type==="log")return st.join(h.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}je.resolveGlobalYarnPath=am;var su;(function(e){let t;function n(){return t!==void 0||(process.platform==="win32"?t=!1:t=!ys.existsSync(__filename.toUpperCase())||!ys.existsSync(__filename.toLowerCase())),t}e.isCaseSensitive=n;function r(i,s){return n()?st.normalize(s).indexOf(st.normalize(i))===0:st.normalize(s).toLowerCase().indexOf(st.normalize(i).toLowerCase())===0}e.isParent=r})(su=je.FileSystem||(je.FileSystem={}));function cm(e,t,n,r){return n?(st.isAbsolute(n)||(n=st.join(e,n)),si(t,n,n,r).then(i=>su.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,i=>si(t,bs(r),e,r))):si(t,bs(r),e,r)}je.resolveModulePath=cm});var Ds=O((mv,cu)=>{"use strict";cu.exports=ye()});var lu=O(Te=>{"use strict";var um=Te&&Te.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),uu=Te&&Te.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&um(t,e,n)};Object.defineProperty(Te,"__esModule",{value:!0});Te.ProposedFeatures=Te.NotebookDocuments=Te.TextDocuments=Te.SemanticTokensBuilder=void 0;var lm=is();Object.defineProperty(Te,"SemanticTokensBuilder",{enumerable:!0,get:function(){return lm.SemanticTokensBuilder}});uu(ye(),Te);var dm=cs();Object.defineProperty(Te,"TextDocuments",{enumerable:!0,get:function(){return dm.TextDocuments}});var fm=ls();Object.defineProperty(Te,"NotebookDocuments",{enumerable:!0,get:function(){return fm.NotebookDocuments}});uu(ps(),Te);var hm;(function(e){e.all={__brand:"features"}})(hm=Te.ProposedFeatures||(Te.ProposedFeatures={}))});var gu=O(Fe=>{"use strict";var gm=Fe&&Fe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),fu=Fe&&Fe.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&gm(t,e,n)};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.createConnection=Fe.Files=void 0;var Rs=mr(),mm=ps(),rr=au(),tn=Ds();fu(Ds(),Fe);fu(lu(),Fe);var pm;(function(e){e.uriToFilePath=rr.uriToFilePath,e.resolveGlobalNodePath=rr.resolveGlobalNodePath,e.resolveGlobalYarnPath=rr.resolveGlobalYarnPath,e.resolve=rr.resolve,e.resolveModulePath=rr.resolveModulePath})(pm=Fe.Files||(Fe.Files={}));var du;function ai(){if(du!==void 0)try{du.end()}catch{}}var Sn=!1,hu;function ym(){let e="--clientProcessId";function t(n){try{let r=parseInt(n);isNaN(r)||(hu=setInterval(()=>{try{process.kill(r,0)}catch{ai(),process.exit(Sn?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===e&&n+1<process.argv.length){t(process.argv[n+1]);return}else{let i=r.split("=");i[0]===e&&t(i[1])}}}ym();var vm={initialize:e=>{let t=e.processId;Rs.number(t)&&hu===void 0&&setInterval(()=>{try{process.kill(t,0)}catch{process.exit(Sn?0:1)}},3e3)},get shutdownReceived(){return Sn},set shutdownReceived(e){Sn=e},exit:e=>{ai(),process.exit(e)}};function bm(e,t,n,r){let i,s,u,d;return e!==void 0&&e.__brand==="features"&&(i=e,e=t,t=n,n=r),tn.ConnectionStrategy.is(e)||tn.ConnectionOptions.is(e)?d=e:(s=e,u=t,d=n),_m(s,u,d,i)}Fe.createConnection=bm;function _m(e,t,n,r){if(!e&&!t&&process.argv.length>2){let d,h,p=process.argv.slice(2);for(let D=0;D<p.length;D++){let P=p[D];if(P==="--node-ipc"){e=new tn.IPCMessageReader(process),t=new tn.IPCMessageWriter(process);break}else if(P==="--stdio"){e=process.stdin,t=process.stdout;break}else if(P==="--socket"){d=parseInt(p[D+1]);break}else if(P==="--pipe"){h=p[D+1];break}else{var i=P.split("=");if(i[0]==="--socket"){d=parseInt(i[1]);break}else if(i[0]==="--pipe"){h=i[1];break}}}if(d){let D=(0,tn.createServerSocketTransport)(d);e=D[0],t=D[1]}else if(h){let D=(0,tn.createServerPipeTransport)(h);e=D[0],t=D[1]}}var s="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+s);if(!t)throw new Error("Connection output stream is not set. "+s);if(Rs.func(e.read)&&Rs.func(e.on)){let d=e;d.on("end",()=>{ai(),process.exit(Sn?0:1)}),d.on("close",()=>{ai(),process.exit(Sn?0:1)})}let u=d=>(0,tn.createProtocolConnection)(e,t,d,n);return(0,mm.createConnection)(u,vm,r)}});var pu=O((vv,mu)=>{"use strict";mu.exports=gu()});var vu=O((yu,ci)=>{(function(e){if(typeof ci=="object"&&typeof ci.exports=="object"){var t=e(require,yu);t!==void 0&&(ci.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=void 0;class n{constructor(p,D,P,R){this._uri=p,this._languageId=D,this._version=P,this._content=R,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(p){if(p){let D=this.offsetAt(p.start),P=this.offsetAt(p.end);return this._content.substring(D,P)}return this._content}update(p,D){for(let P of p)if(n.isIncremental(P)){let R=u(P.range),C=this.offsetAt(R.start),E=this.offsetAt(R.end);this._content=this._content.substring(0,C)+P.text+this._content.substring(E,this._content.length);let I=Math.max(R.start.line,0),F=Math.max(R.end.line,0),j=this._lineOffsets,v=s(P.text,!1,C);if(F-I===v.length)for(let k=0,A=v.length;k<A;k++)j[k+I+1]=v[k];else v.length<1e4?j.splice(I+1,F-I,...v):this._lineOffsets=j=j.slice(0,I+1).concat(v,j.slice(F+1));let y=P.text.length-(E-C);if(y!==0)for(let k=I+1+v.length,A=j.length;k<A;k++)j[k]=j[k]+y}else if(n.isFull(P))this._content=P.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=D}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=s(this._content,!0)),this._lineOffsets}positionAt(p){p=Math.max(Math.min(p,this._content.length),0);let D=this.getLineOffsets(),P=0,R=D.length;if(R===0)return{line:0,character:p};for(;P<R;){let E=Math.floor((P+R)/2);D[E]>p?R=E:P=E+1}let C=P-1;return{line:C,character:p-D[C]}}offsetAt(p){let D=this.getLineOffsets();if(p.line>=D.length)return this._content.length;if(p.line<0)return 0;let P=D[p.line],R=p.line+1<D.length?D[p.line+1]:this._content.length;return Math.max(Math.min(P+p.character,R),P)}get lineCount(){return this.getLineOffsets().length}static isIncremental(p){let D=p;return D!=null&&typeof D.text=="string"&&D.range!==void 0&&(D.rangeLength===void 0||typeof D.rangeLength=="number")}static isFull(p){let D=p;return D!=null&&typeof D.text=="string"&&D.range===void 0&&D.rangeLength===void 0}}var r;(function(h){function p(R,C,E,I){return new n(R,C,E,I)}h.create=p;function D(R,C,E){if(R instanceof n)return R.update(C,E),R;throw new Error("TextDocument.update: document must be created by TextDocument.create")}h.update=D;function P(R,C){let E=R.getText(),I=i(C.map(d),(v,y)=>{let k=v.range.start.line-y.range.start.line;return k===0?v.range.start.character-y.range.start.character:k}),F=0,j=[];for(let v of I){let y=R.offsetAt(v.range.start);if(y<F)throw new Error("Overlapping edit");y>F&&j.push(E.substring(F,y)),v.newText.length&&j.push(v.newText),F=R.offsetAt(v.range.end)}return j.push(E.substr(F)),j.join("")}h.applyEdits=P})(r=t.TextDocument||(t.TextDocument={}));function i(h,p){if(h.length<=1)return h;let D=h.length/2|0,P=h.slice(0,D),R=h.slice(D);i(P,p),i(R,p);let C=0,E=0,I=0;for(;C<P.length&&E<R.length;)p(P[C],R[E])<=0?h[I++]=P[C++]:h[I++]=R[E++];for(;C<P.length;)h[I++]=P[C++];for(;E<R.length;)h[I++]=R[E++];return h}function s(h,p,D=0){let P=p?[D]:[];for(let R=0;R<h.length;R++){let C=h.charCodeAt(R);(C===13||C===10)&&(C===13&&R+1<h.length&&h.charCodeAt(R+1)===10&&R++,P.push(D+R+1))}return P}function u(h){let p=h.start,D=h.end;return p.line>D.line||p.line===D.line&&p.character>D.character?{start:D,end:p}:h}function d(h){let p=u(h.range);return p!==h.range?{newText:h.newText,range:p}:h}})});var bu=O(ws=>{var nn=require("path"),Wt=process.platform==="win32",At=require("fs"),Dm=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function Rm(){var e;if(Dm){var t=new Error;e=n}else e=r;return e;function n(i){i&&(t.message=i.message,i=t,r(i))}function r(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var s="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(s):console.error(s)}}}}function wm(e){return typeof e=="function"?e:Rm()}var bv=nn.normalize;Wt?kt=/(.*?)(?:[\/\\]+|$)/g:kt=/(.*?)(?:[\/]+|$)/g;var kt;Wt?ir=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:ir=/^[\/]*/;var ir;ws.realpathSync=function(t,n){if(t=nn.resolve(t),n&&Object.prototype.hasOwnProperty.call(n,t))return n[t];var r=t,i={},s={},u,d,h,p;D();function D(){var F=ir.exec(t);u=F[0].length,d=F[0],h=F[0],p="",Wt&&!s[h]&&(At.lstatSync(h),s[h]=!0)}for(;u<t.length;){kt.lastIndex=u;var P=kt.exec(t);if(p=d,d+=P[0],h=p+P[1],u=kt.lastIndex,!(s[h]||n&&n[h]===h)){var R;if(n&&Object.prototype.hasOwnProperty.call(n,h))R=n[h];else{var C=At.lstatSync(h);if(!C.isSymbolicLink()){s[h]=!0,n&&(n[h]=h);continue}var E=null;if(!Wt){var I=C.dev.toString(32)+":"+C.ino.toString(32);i.hasOwnProperty(I)&&(E=i[I])}E===null&&(At.statSync(h),E=At.readlinkSync(h)),R=nn.resolve(p,E),n&&(n[h]=R),Wt||(i[I]=E)}t=nn.resolve(R,t.slice(u)),D()}}return n&&(n[r]=t),t};ws.realpath=function(t,n,r){if(typeof r!="function"&&(r=wm(n),n=null),t=nn.resolve(t),n&&Object.prototype.hasOwnProperty.call(n,t))return process.nextTick(r.bind(null,null,n[t]));var i=t,s={},u={},d,h,p,D;P();function P(){var F=ir.exec(t);d=F[0].length,h=F[0],p=F[0],D="",Wt&&!u[p]?At.lstat(p,function(j){if(j)return r(j);u[p]=!0,R()}):process.nextTick(R)}function R(){if(d>=t.length)return n&&(n[i]=t),r(null,t);kt.lastIndex=d;var F=kt.exec(t);return D=h,h+=F[0],p=D+F[1],d=kt.lastIndex,u[p]||n&&n[p]===p?process.nextTick(R):n&&Object.prototype.hasOwnProperty.call(n,p)?I(n[p]):At.lstat(p,C)}function C(F,j){if(F)return r(F);if(!j.isSymbolicLink())return u[p]=!0,n&&(n[p]=p),process.nextTick(R);if(!Wt){var v=j.dev.toString(32)+":"+j.ino.toString(32);if(s.hasOwnProperty(v))return E(null,s[v],p)}At.stat(p,function(y){if(y)return r(y);At.readlink(p,function(k,A){Wt||(s[v]=A),E(k,A)})})}function E(F,j,v){if(F)return r(F);var y=nn.resolve(D,j);n&&(n[v]=y),I(y)}function I(F){t=nn.resolve(F,t.slice(d)),P()}}});var Ps=O((Dv,wu)=>{wu.exports=Ht;Ht.realpath=Ht;Ht.sync=Ss;Ht.realpathSync=Ss;Ht.monkeypatch=Tm;Ht.unmonkeypatch=Sm;var Pn=require("fs"),ks=Pn.realpath,Ts=Pn.realpathSync,km=process.version,_u=/^v[0-5]\./.test(km),Du=bu();function Ru(e){return e&&e.syscall==="realpath"&&(e.code==="ELOOP"||e.code==="ENOMEM"||e.code==="ENAMETOOLONG")}function Ht(e,t,n){if(_u)return ks(e,t,n);typeof t=="function"&&(n=t,t=null),ks(e,t,function(r,i){Ru(r)?Du.realpath(e,t,n):n(r,i)})}function Ss(e,t){if(_u)return Ts(e,t);try{return Ts(e,t)}catch(n){if(Ru(n))return Du.realpathSync(e,t);throw n}}function Tm(){Pn.realpath=Ht,Pn.realpathSync=Ss}function Sm(){Pn.realpath=ks,Pn.realpathSync=Ts}});var Tu=O((Rv,ku)=>{ku.exports=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=t(e[r],r);Pm(i)?n.push.apply(n,i):n.push(i)}return n};var Pm=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var Eu=O((wv,qu)=>{"use strict";qu.exports=Pu;function Pu(e,t,n){e instanceof RegExp&&(e=Su(e,n)),t instanceof RegExp&&(t=Su(t,n));var r=Cu(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function Su(e,t){var n=t.match(e);return n?n[0]:null}Pu.range=Cu;function Cu(e,t,n){var r,i,s,u,d,h=n.indexOf(e),p=n.indexOf(t,h+1),D=h;if(h>=0&&p>0){if(e===t)return[h,p];for(r=[],s=n.length;D>=0&&!d;)D==h?(r.push(D),h=n.indexOf(e,D+1)):r.length==1?d=[r.pop(),p]:(i=r.pop(),i<s&&(s=i,u=p),p=n.indexOf(t,D+1)),D=h<p&&h>=0?h:p;r.length&&(d=[s,u])}return d}});var xu=O((kv,Lu)=>{var Cm=Tu(),Ou=Eu();Lu.exports=Om;var Nu="\0SLASH"+Math.random()+"\0",Mu="\0OPEN"+Math.random()+"\0",qs="\0CLOSE"+Math.random()+"\0",ju="\0COMMA"+Math.random()+"\0",Iu="\0PERIOD"+Math.random()+"\0";function Cs(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function qm(e){return e.split("\\\\").join(Nu).split("\\{").join(Mu).split("\\}").join(qs).split("\\,").join(ju).split("\\.").join(Iu)}function Em(e){return e.split(Nu).join("\\").split(Mu).join("{").split(qs).join("}").split(ju).join(",").split(Iu).join(".")}function Fu(e){if(!e)return[""];var t=[],n=Ou("{","}",e);if(!n)return e.split(",");var r=n.pre,i=n.body,s=n.post,u=r.split(",");u[u.length-1]+="{"+i+"}";var d=Fu(s);return s.length&&(u[u.length-1]+=d.shift(),u.push.apply(u,d)),t.push.apply(t,u),t}function Om(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),Cn(qm(e),!0).map(Em)):[]}function Nm(e){return"{"+e+"}"}function Mm(e){return/^-?0\d/.test(e)}function jm(e,t){return e<=t}function Im(e,t){return e>=t}function Cn(e,t){var n=[],r=Ou("{","}",e);if(!r||/\$$/.test(r.pre))return[e];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),u=i||s,d=r.body.indexOf(",")>=0;if(!u&&!d)return r.post.match(/,.*\}/)?(e=r.pre+"{"+r.body+qs+r.post,Cn(e)):[e];var h;if(u)h=r.body.split(/\.\./);else if(h=Fu(r.body),h.length===1&&(h=Cn(h[0],!1).map(Nm),h.length===1)){var D=r.post.length?Cn(r.post,!1):[""];return D.map(function(Ve){return r.pre+h[0]+Ve})}var p=r.pre,D=r.post.length?Cn(r.post,!1):[""],P;if(u){var R=Cs(h[0]),C=Cs(h[1]),E=Math.max(h[0].length,h[1].length),I=h.length==3?Math.abs(Cs(h[2])):1,F=jm,j=C<R;j&&(I*=-1,F=Im);var v=h.some(Mm);P=[];for(var y=R;F(y,C);y+=I){var k;if(s)k=String.fromCharCode(y),k==="\\"&&(k="");else if(k=String(y),v){var A=E-k.length;if(A>0){var Q=new Array(A+1).join("0");y<0?k="-"+Q+k.slice(1):k=Q+k}}P.push(k)}}else P=Cm(h,function(Ae){return Cn(Ae,!1)});for(var ee=0;ee<P.length;ee++)for(var _e=0;_e<D.length;_e++){var Pe=p+P[ee]+D[_e];(!t||u||Pe)&&n.push(Pe)}return n}});var di=O((Tv,zu)=>{zu.exports=Le;Le.Minimatch=Se;var or=function(){try{return require("path")}catch{}}()||{sep:"/"};Le.sep=or.sep;var Ns=Le.GLOBSTAR=Se.GLOBSTAR={},Fm=xu(),Au={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Es="[^/]",Os=Es+"*?",Lm="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",xm="(?:(?!(?:\\/|^)\\.).)*?",Wu=Am("().*{}+?[]^$\\!");function Am(e){return e.split("").reduce(function(t,n){return t[n]=!0,t},{})}var Hu=/\/+/;Le.filter=Wm;function Wm(e,t){return t=t||{},function(n,r,i){return Le(n,e,t)}}function $t(e,t){t=t||{};var n={};return Object.keys(e).forEach(function(r){n[r]=e[r]}),Object.keys(t).forEach(function(r){n[r]=t[r]}),n}Le.defaults=function(e){if(!e||typeof e!="object"||!Object.keys(e).length)return Le;var t=Le,n=function(i,s,u){return t(i,s,$t(e,u))};return n.Minimatch=function(i,s){return new t.Minimatch(i,$t(e,s))},n.Minimatch.defaults=function(i){return t.defaults($t(e,i)).Minimatch},n.filter=function(i,s){return t.filter(i,$t(e,s))},n.defaults=function(i){return t.defaults($t(e,i))},n.makeRe=function(i,s){return t.makeRe(i,$t(e,s))},n.braceExpand=function(i,s){return t.braceExpand(i,$t(e,s))},n.match=function(r,i,s){return t.match(r,i,$t(e,s))},n};Se.defaults=function(e){return Le.defaults(e).Minimatch};function Le(e,t,n){return li(t),n||(n={}),!n.nocomment&&t.charAt(0)==="#"?!1:new Se(t,n).match(e)}function Se(e,t){if(!(this instanceof Se))return new Se(e,t);li(e),t||(t={}),e=e.trim(),!t.allowWindowsEscape&&or.sep!=="/"&&(e=e.split(or.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}Se.prototype.debug=function(){};Se.prototype.make=Hm;function Hm(){var e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,n),n=this.globParts=n.map(function(r){return r.split(Hu)}),this.debug(this.pattern,n),n=n.map(function(r,i,s){return r.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,n),this.set=n}Se.prototype.parseNegate=$m;function $m(){var e=this.pattern,t=!1,n=this.options,r=0;if(!n.nonegate){for(var i=0,s=e.length;i<s&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.substr(r)),this.negate=t}}Le.braceExpand=function(e,t){return $u(e,t)};Se.prototype.braceExpand=$u;function $u(e,t){return t||(this instanceof Se?t=this.options:t={}),e=typeof e>"u"?this.pattern:e,li(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:Fm(e)}var zm=1024*64,li=function(e){if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>zm)throw new TypeError("pattern is too long")};Se.prototype.parse=Bm;var ui={};function Bm(e,t){li(e);var n=this.options;if(e==="**")if(n.noglobstar)e="*";else return Ns;if(e==="")return"";var r="",i=!!n.nocase,s=!1,u=[],d=[],h,p=!1,D=-1,P=-1,R=e.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",C=this;function E(){if(h){switch(h){case"*":r+=Os,i=!0;break;case"?":r+=Es,i=!0;break;default:r+="\\"+h;break}C.debug("clearStateChar %j %j",h,r),h=!1}}for(var I=0,F=e.length,j;I<F&&(j=e.charAt(I));I++){if(this.debug("%s	%s %s %j",e,I,r,j),s&&Wu[j]){r+="\\"+j,s=!1;continue}switch(j){case"/":return!1;case"\\":E(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,I,r,j),p){this.debug("  in class"),j==="!"&&I===P+1&&(j="^"),r+=j;continue}C.debug("call clearStateChar %j",h),E(),h=j,n.noext&&E();continue;case"(":if(p){r+="(";continue}if(!h){r+="\\(";continue}u.push({type:h,start:I-1,reStart:r.length,open:Au[h].open,close:Au[h].close}),r+=h==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",h,r),h=!1;continue;case")":if(p||!u.length){r+="\\)";continue}E(),i=!0;var v=u.pop();r+=v.close,v.type==="!"&&d.push(v),v.reEnd=r.length;continue;case"|":if(p||!u.length||s){r+="\\|",s=!1;continue}E(),r+="|";continue;case"[":if(E(),p){r+="\\"+j;continue}p=!0,P=I,D=r.length,r+=j;continue;case"]":if(I===P+1||!p){r+="\\"+j,s=!1;continue}var y=e.substring(P+1,I);try{RegExp("["+y+"]")}catch{var k=this.parse(y,ui);r=r.substr(0,D)+"\\["+k[0]+"\\]",i=i||k[1],p=!1;continue}i=!0,p=!1,r+=j;continue;default:E(),s?s=!1:Wu[j]&&!(j==="^"&&p)&&(r+="\\"),r+=j}}for(p&&(y=e.substr(P+1),k=this.parse(y,ui),r=r.substr(0,D)+"\\["+k[0],i=i||k[1]),v=u.pop();v;v=u.pop()){var A=r.slice(v.reStart+v.open.length);this.debug("setting tail",r,v),A=A.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Je,Ct,ct){return ct||(ct="\\"),Ct+Ct+ct+"|"}),this.debug(`tail=%j
   %s`,A,A,v,r);var Q=v.type==="*"?Os:v.type==="?"?Es:"\\"+v.type;i=!0,r=r.slice(0,v.reStart)+Q+"\\("+A}E(),s&&(r+="\\\\");var ee=!1;switch(r.charAt(0)){case"[":case".":case"(":ee=!0}for(var _e=d.length-1;_e>-1;_e--){var Pe=d[_e],Ae=r.slice(0,Pe.reStart),Ve=r.slice(Pe.reStart,Pe.reEnd-8),We=r.slice(Pe.reEnd-8,Pe.reEnd),Xe=r.slice(Pe.reEnd);We+=Xe;var St=Ae.split("(").length-1,Pt=Xe;for(I=0;I<St;I++)Pt=Pt.replace(/\)[+*?]?/,"");Xe=Pt;var an="";Xe===""&&t!==ui&&(an="$");var Mn=Ae+Ve+Xe+an+We;r=Mn}if(r!==""&&i&&(r="(?=.)"+r),ee&&(r=R+r),t===ui)return[r,i];if(!i)return Um(e);var cn=n.nocase?"i":"";try{var at=new RegExp("^"+r+"$",cn)}catch{return new RegExp("$.")}return at._glob=e,at._src=r,at}Le.makeRe=function(e,t){return new Se(e,t||{}).makeRe()};Se.prototype.makeRe=Gm;function Gm(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?Os:t.dot?Lm:xm,r=t.nocase?"i":"",i=e.map(function(s){return s.map(function(u){return u===Ns?n:typeof u=="string"?Vm(u):u._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch{this.regexp=!1}return this.regexp}Le.match=function(e,t,n){n=n||{};var r=new Se(t,n);return e=e.filter(function(i){return r.match(i)}),r.options.nonull&&!e.length&&e.push(t),e};Se.prototype.match=function(t,n){if(typeof n>"u"&&(n=this.partial),this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&n)return!0;var r=this.options;or.sep!=="/"&&(t=t.split(or.sep).join("/")),t=t.split(Hu),this.debug(this.pattern,"split",t);var i=this.set;this.debug(this.pattern,"set",i);var s,u;for(u=t.length-1;u>=0&&(s=t[u],!s);u--);for(u=0;u<i.length;u++){var d=i[u],h=t;r.matchBase&&d.length===1&&(h=[s]);var p=this.matchOne(h,d,n);if(p)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate};Se.prototype.matchOne=function(e,t,n){var r=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,s=0,u=e.length,d=t.length;i<u&&s<d;i++,s++){this.debug("matchOne loop");var h=t[s],p=e[i];if(this.debug(t,h,p),h===!1)return!1;if(h===Ns){this.debug("GLOBSTAR",[t,h,p]);var D=i,P=s+1;if(P===d){for(this.debug("** at the end");i<u;i++)if(e[i]==="."||e[i]===".."||!r.dot&&e[i].charAt(0)===".")return!1;return!0}for(;D<u;){var R=e[D];if(this.debug(`
globstar while`,e,D,t,P,R),this.matchOne(e.slice(D),t.slice(P),n))return this.debug("globstar found match!",D,u,R),!0;if(R==="."||R===".."||!r.dot&&R.charAt(0)==="."){this.debug("dot detected!",e,D,t,P);break}this.debug("globstar swallow a segment, and continue"),D++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,D,t,P),D===u))}var C;if(typeof h=="string"?(C=p===h,this.debug("string match",h,p,C)):(C=p.match(h),this.debug("pattern match",h,p,C)),!C)return!1}if(i===u&&s===d)return!0;if(i===u)return n;if(s===d)return i===u-1&&e[i]==="";throw new Error("wtf?")};function Um(e){return e.replace(/\\(.)/g,"$1")}function Vm(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var Bu=O((Sv,Ms)=>{typeof Object.create=="function"?Ms.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Ms.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}});var Gu=O((Pv,Is)=>{try{if(js=require("util"),typeof js.inherits!="function")throw"";Is.exports=js.inherits}catch{Is.exports=Bu()}var js});var hi=O((Cv,fi)=>{"use strict";function Uu(e){return e.charAt(0)==="/"}function Vu(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,n=t.exec(e),r=n[1]||"",i=Boolean(r&&r.charAt(1)!==":");return Boolean(n[2]||i)}fi.exports=process.platform==="win32"?Vu:Uu;fi.exports.posix=Uu;fi.exports.win32=Vu});var Ls=O(zt=>{zt.setopts=Zm;zt.ownProp=Xu;zt.makeAbs=sr;zt.finish=ep;zt.mark=tp;zt.isIgnored=Ku;zt.childrenIgnored=np;function Xu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Xm=require("fs"),qn=require("path"),Jm=di(),Ju=hi(),Fs=Jm.Minimatch;function Km(e,t){return e.localeCompare(t,"en")}function Qm(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(Ym))}function Ym(e){var t=null;if(e.slice(-3)==="/**"){var n=e.replace(/(\/\*\*)+$/,"");t=new Fs(n,{dot:!0})}return{matcher:new Fs(e,{dot:!0}),gmatcher:t}}function Zm(e,t,n){if(n||(n={}),n.matchBase&&t.indexOf("/")===-1){if(n.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!n.silent,e.pattern=t,e.strict=n.strict!==!1,e.realpath=!!n.realpath,e.realpathCache=n.realpathCache||Object.create(null),e.follow=!!n.follow,e.dot=!!n.dot,e.mark=!!n.mark,e.nodir=!!n.nodir,e.nodir&&(e.mark=!0),e.sync=!!n.sync,e.nounique=!!n.nounique,e.nonull=!!n.nonull,e.nosort=!!n.nosort,e.nocase=!!n.nocase,e.stat=!!n.stat,e.noprocess=!!n.noprocess,e.absolute=!!n.absolute,e.fs=n.fs||Xm,e.maxLength=n.maxLength||1/0,e.cache=n.cache||Object.create(null),e.statCache=n.statCache||Object.create(null),e.symlinks=n.symlinks||Object.create(null),Qm(e,n),e.changedCwd=!1;var r=process.cwd();Xu(n,"cwd")?(e.cwd=qn.resolve(n.cwd),e.changedCwd=e.cwd!==r):e.cwd=r,e.root=n.root||qn.resolve(e.cwd,"/"),e.root=qn.resolve(e.root),process.platform==="win32"&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=Ju(e.cwd)?e.cwd:sr(e,e.cwd),process.platform==="win32"&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,n.allowWindowsEscape=!1,e.minimatch=new Fs(t,n),e.options=e.minimatch.options}function ep(e){for(var t=e.nounique,n=t?[]:Object.create(null),r=0,i=e.matches.length;r<i;r++){var s=e.matches[r];if(!s||Object.keys(s).length===0){if(e.nonull){var u=e.minimatch.globSet[r];t?n.push(u):n[u]=!0}}else{var d=Object.keys(s);t?n.push.apply(n,d):d.forEach(function(h){n[h]=!0})}}if(t||(n=Object.keys(n)),e.nosort||(n=n.sort(Km)),e.mark){for(var r=0;r<n.length;r++)n[r]=e._mark(n[r]);e.nodir&&(n=n.filter(function(h){var p=!/\/$/.test(h),D=e.cache[h]||e.cache[sr(e,h)];return p&&D&&(p=D!=="DIR"&&!Array.isArray(D)),p}))}e.ignore.length&&(n=n.filter(function(h){return!Ku(e,h)})),e.found=n}function tp(e,t){var n=sr(e,t),r=e.cache[n],i=t;if(r){var s=r==="DIR"||Array.isArray(r),u=t.slice(-1)==="/";if(s&&!u?i+="/":!s&&u&&(i=i.slice(0,-1)),i!==t){var d=sr(e,i);e.statCache[d]=e.statCache[n],e.cache[d]=e.cache[n]}}return i}function sr(e,t){var n=t;return t.charAt(0)==="/"?n=qn.join(e.root,t):Ju(t)||t===""?n=t:e.changedCwd?n=qn.resolve(e.cwd,t):n=qn.resolve(t),process.platform==="win32"&&(n=n.replace(/\\/g,"/")),n}function Ku(e,t){return e.ignore.length?e.ignore.some(function(n){return n.matcher.match(t)||!!(n.gmatcher&&n.gmatcher.match(t))}):!1}function np(e,t){return e.ignore.length?e.ignore.some(function(n){return!!(n.gmatcher&&n.gmatcher.match(t))}):!1}});var tl=O((Mv,el)=>{el.exports=Zu;Zu.GlobSync=be;var rp=Ps(),Qu=di(),Ev=Qu.Minimatch,Ov=Ws().Glob,Nv=require("util"),xs=require("path"),Yu=require("assert"),gi=hi(),rn=Ls(),ip=rn.setopts,As=rn.ownProp,op=rn.childrenIgnored,sp=rn.isIgnored;function Zu(e,t){if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new be(e,t).found}function be(e,t){if(!e)throw new Error("must provide pattern");if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof be))return new be(e,t);if(ip(this,e,t),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var r=0;r<n;r++)this._process(this.minimatch.set[r],r,!1);this._finish()}be.prototype._finish=function(){if(Yu.ok(this instanceof be),this.realpath){var e=this;this.matches.forEach(function(t,n){var r=e.matches[n]=Object.create(null);for(var i in t)try{i=e._makeAbs(i);var s=rp.realpathSync(i,e.realpathCache);r[s]=!0}catch(u){if(u.syscall==="stat")r[e._makeAbs(i)]=!0;else throw u}})}rn.finish(this)};be.prototype._process=function(e,t,n){Yu.ok(this instanceof be);for(var r=0;typeof e[r]=="string";)r++;var i;switch(r){case e.length:this._processSimple(e.join("/"),t);return;case 0:i=null;break;default:i=e.slice(0,r).join("/");break}var s=e.slice(r),u;i===null?u=".":((gi(i)||gi(e.map(function(p){return typeof p=="string"?p:"[*]"}).join("/")))&&(!i||!gi(i))&&(i="/"+i),u=i);var d=this._makeAbs(u);if(!op(this,u)){var h=s[0]===Qu.GLOBSTAR;h?this._processGlobStar(i,u,d,s,t,n):this._processReaddir(i,u,d,s,t,n)}};be.prototype._processReaddir=function(e,t,n,r,i,s){var u=this._readdir(n,s);if(!!u){for(var d=r[0],h=!!this.minimatch.negate,p=d._glob,D=this.dot||p.charAt(0)===".",P=[],R=0;R<u.length;R++){var C=u[R];if(C.charAt(0)!=="."||D){var E;h&&!e?E=!C.match(d):E=C.match(d),E&&P.push(C)}}var I=P.length;if(I!==0){if(r.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var R=0;R<I;R++){var C=P[R];e&&(e.slice(-1)!=="/"?C=e+"/"+C:C=e+C),C.charAt(0)==="/"&&!this.nomount&&(C=xs.join(this.root,C)),this._emitMatch(i,C)}return}r.shift();for(var R=0;R<I;R++){var C=P[R],F;e?F=[e,C]:F=[C],this._process(F.concat(r),i,s)}}}};be.prototype._emitMatch=function(e,t){if(!sp(this,t)){var n=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var r=this.cache[n];if(r==="DIR"||Array.isArray(r))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}};be.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,n,r;try{n=this.fs.lstatSync(e)}catch(s){if(s.code==="ENOENT")return null}var i=n&&n.isSymbolicLink();return this.symlinks[e]=i,!i&&n&&!n.isDirectory()?this.cache[e]="FILE":t=this._readdir(e,!1),t};be.prototype._readdir=function(e,t){var n;if(t&&!As(this.symlinks,e))return this._readdirInGlobStar(e);if(As(this.cache,e)){var r=this.cache[e];if(!r||r==="FILE")return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(i){return this._readdirError(e,i),null}};be.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var r=t[n];e==="/"?r=e+r:r=e+"/"+r,this.cache[r]=!0}return this.cache[e]=t,t};be.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var r=new Error(t.code+" invalid cwd "+this.cwd);throw r.path=this.cwd,r.code=t.code,r}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t);break}};be.prototype._processGlobStar=function(e,t,n,r,i,s){var u=this._readdir(n,s);if(!!u){var d=r.slice(1),h=e?[e]:[],p=h.concat(d);this._process(p,i,!1);var D=u.length,P=this.symlinks[n];if(!(P&&s))for(var R=0;R<D;R++){var C=u[R];if(!(C.charAt(0)==="."&&!this.dot)){var E=h.concat(u[R],d);this._process(E,i,!0);var I=h.concat(u[R],r);this._process(I,i,!0)}}}};be.prototype._processSimple=function(e,t){var n=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),!!n){if(e&&gi(e)&&!this.nomount){var r=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=xs.join(this.root,e):(e=xs.resolve(this.root,e),r&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}};be.prototype._stat=function(e){var t=this._makeAbs(e),n=e.slice(-1)==="/";if(e.length>this.maxLength)return!1;if(!this.stat&&As(this.cache,t)){var u=this.cache[t];if(Array.isArray(u)&&(u="DIR"),!n||u==="DIR")return u;if(n&&u==="FILE")return!1}var r,i=this.statCache[t];if(!i){var s;try{s=this.fs.lstatSync(t)}catch(d){if(d&&(d.code==="ENOENT"||d.code==="ENOTDIR"))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{i=this.fs.statSync(t)}catch{i=s}else i=s}this.statCache[t]=i;var u=!0;return i&&(u=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||u,n&&u==="FILE"?!1:u};be.prototype._mark=function(e){return rn.mark(this,e)};be.prototype._makeAbs=function(e){return rn.makeAbs(this,e)}});var Hs=O((jv,rl)=>{rl.exports=nl;function nl(e,t){if(e&&t)return nl(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(r){n[r]=e[r]}),n;function n(){for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];var s=e.apply(this,r),u=r[r.length-1];return typeof s=="function"&&s!==u&&Object.keys(u).forEach(function(d){s[d]=u[d]}),s}}});var zs=O((Iv,$s)=>{var il=Hs();$s.exports=il(mi);$s.exports.strict=il(ol);mi.proto=mi(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return mi(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return ol(this)},configurable:!0})});function mi(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function ol(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}});var al=O((Fv,sl)=>{var ap=Hs(),ar=Object.create(null),cp=zs();sl.exports=ap(up);function up(e,t){return ar[e]?(ar[e].push(t),null):(ar[e]=[t],lp(e))}function lp(e){return cp(function t(){var n=ar[e],r=n.length,i=dp(arguments);try{for(var s=0;s<r;s++)n[s].apply(null,i)}finally{n.length>r?(n.splice(0,r),process.nextTick(function(){t.apply(null,i)})):delete ar[e]}})}function dp(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r]=e[r];return n}});var Ws=O((Av,ul)=>{ul.exports=on;var fp=Ps(),cl=di(),Lv=cl.Minimatch,hp=Gu(),gp=require("events").EventEmitter,Bs=require("path"),Gs=require("assert"),cr=hi(),Vs=tl(),sn=Ls(),mp=sn.setopts,Us=sn.ownProp,Xs=al(),xv=require("util"),pp=sn.childrenIgnored,yp=sn.isIgnored,vp=zs();function on(e,t,n){if(typeof t=="function"&&(n=t,t={}),t||(t={}),t.sync){if(n)throw new TypeError("callback provided to sync glob");return Vs(e,t)}return new Y(e,t,n)}on.sync=Vs;var bp=on.GlobSync=Vs.GlobSync;on.glob=on;function _p(e,t){if(t===null||typeof t!="object")return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}on.hasMagic=function(e,t){var n=_p({},t);n.noprocess=!0;var r=new Y(e,n),i=r.minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var s=0;s<i[0].length;s++)if(typeof i[0][s]!="string")return!0;return!1};on.Glob=Y;hp(Y,gp);function Y(e,t,n){if(typeof t=="function"&&(n=t,t=null),t&&t.sync){if(n)throw new TypeError("callback provided to sync glob");return new bp(e,t)}if(!(this instanceof Y))return new Y(e,t,n);mp(this,e,t),this._didRealPath=!1;var r=this.minimatch.set.length;this.matches=new Array(r),typeof n=="function"&&(n=vp(n),this.on("error",n),this.on("end",function(h){n(null,h)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(r===0)return d();for(var s=!0,u=0;u<r;u++)this._process(this.minimatch.set[u],u,!1,d);s=!1;function d(){--i._processing,i._processing<=0&&(s?process.nextTick(function(){i._finish()}):i._finish())}}Y.prototype._finish=function(){if(Gs(this instanceof Y),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();sn.finish(this),this.emit("end",this.found)}};Y.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var e=this.matches.length;if(e===0)return this._finish();for(var t=this,n=0;n<this.matches.length;n++)this._realpathSet(n,r);function r(){--e===0&&t._finish()}};Y.prototype._realpathSet=function(e,t){var n=this.matches[e];if(!n)return t();var r=Object.keys(n),i=this,s=r.length;if(s===0)return t();var u=this.matches[e]=Object.create(null);r.forEach(function(d,h){d=i._makeAbs(d),fp.realpath(d,i.realpathCache,function(p,D){p?p.syscall==="stat"?u[d]=!0:i.emit("error",p):u[D]=!0,--s===0&&(i.matches[e]=u,t())})})};Y.prototype._mark=function(e){return sn.mark(this,e)};Y.prototype._makeAbs=function(e){return sn.makeAbs(this,e)};Y.prototype.abort=function(){this.aborted=!0,this.emit("abort")};Y.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};Y.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var n=e[t];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var r=this._processQueue.slice(0);this._processQueue.length=0;for(var t=0;t<r.length;t++){var i=r[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};Y.prototype._process=function(e,t,n,r){if(Gs(this instanceof Y),Gs(typeof r=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([e,t,n,r]);return}for(var i=0;typeof e[i]=="string";)i++;var s;switch(i){case e.length:this._processSimple(e.join("/"),t,r);return;case 0:s=null;break;default:s=e.slice(0,i).join("/");break}var u=e.slice(i),d;s===null?d=".":((cr(s)||cr(e.map(function(D){return typeof D=="string"?D:"[*]"}).join("/")))&&(!s||!cr(s))&&(s="/"+s),d=s);var h=this._makeAbs(d);if(pp(this,d))return r();var p=u[0]===cl.GLOBSTAR;p?this._processGlobStar(s,d,h,u,t,n,r):this._processReaddir(s,d,h,u,t,n,r)}};Y.prototype._processReaddir=function(e,t,n,r,i,s,u){var d=this;this._readdir(n,s,function(h,p){return d._processReaddir2(e,t,n,r,i,s,p,u)})};Y.prototype._processReaddir2=function(e,t,n,r,i,s,u,d){if(!u)return d();for(var h=r[0],p=!!this.minimatch.negate,D=h._glob,P=this.dot||D.charAt(0)===".",R=[],C=0;C<u.length;C++){var E=u[C];if(E.charAt(0)!=="."||P){var I;p&&!e?I=!E.match(h):I=E.match(h),I&&R.push(E)}}var F=R.length;if(F===0)return d();if(r.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var C=0;C<F;C++){var E=R[C];e&&(e!=="/"?E=e+"/"+E:E=e+E),E.charAt(0)==="/"&&!this.nomount&&(E=Bs.join(this.root,E)),this._emitMatch(i,E)}return d()}r.shift();for(var C=0;C<F;C++){var E=R[C],j;e&&(e!=="/"?E=e+"/"+E:E=e+E),this._process([E].concat(r),i,s,d)}d()};Y.prototype._emitMatch=function(e,t){if(!this.aborted&&!yp(this,t)){if(this.paused){this._emitQueue.push([e,t]);return}var n=cr(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var r=this.cache[n];if(r==="DIR"||Array.isArray(r))return}this.matches[e][t]=!0;var i=this.statCache[n];i&&this.emit("stat",t,i),this.emit("match",t)}}};Y.prototype._readdirInGlobStar=function(e,t){if(this.aborted)return;if(this.follow)return this._readdir(e,!1,t);var n="lstat\0"+e,r=this,i=Xs(n,s);i&&r.fs.lstat(e,i);function s(u,d){if(u&&u.code==="ENOENT")return t();var h=d&&d.isSymbolicLink();r.symlinks[e]=h,!h&&d&&!d.isDirectory()?(r.cache[e]="FILE",t()):r._readdir(e,!1,t)}};Y.prototype._readdir=function(e,t,n){if(!this.aborted&&(n=Xs("readdir\0"+e+"\0"+t,n),!!n)){if(t&&!Us(this.symlinks,e))return this._readdirInGlobStar(e,n);if(Us(this.cache,e)){var r=this.cache[e];if(!r||r==="FILE")return n();if(Array.isArray(r))return n(null,r)}var i=this;i.fs.readdir(e,Dp(this,e,n))}};function Dp(e,t,n){return function(r,i){r?e._readdirError(t,r,n):e._readdirEntries(t,i,n)}}Y.prototype._readdirEntries=function(e,t,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var i=t[r];e==="/"?i=e+i:i=e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,n(null,t)}};Y.prototype._readdirError=function(e,t,n){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t);break}return n()}};Y.prototype._processGlobStar=function(e,t,n,r,i,s,u){var d=this;this._readdir(n,s,function(h,p){d._processGlobStar2(e,t,n,r,i,s,p,u)})};Y.prototype._processGlobStar2=function(e,t,n,r,i,s,u,d){if(!u)return d();var h=r.slice(1),p=e?[e]:[],D=p.concat(h);this._process(D,i,!1,d);var P=this.symlinks[n],R=u.length;if(P&&s)return d();for(var C=0;C<R;C++){var E=u[C];if(!(E.charAt(0)==="."&&!this.dot)){var I=p.concat(u[C],h);this._process(I,i,!0,d);var F=p.concat(u[C],r);this._process(F,i,!0,d)}}d()};Y.prototype._processSimple=function(e,t,n){var r=this;this._stat(e,function(i,s){r._processSimple2(e,t,i,s,n)})};Y.prototype._processSimple2=function(e,t,n,r,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!r)return i();if(e&&cr(e)&&!this.nomount){var s=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=Bs.join(this.root,e):(e=Bs.resolve(this.root,e),s&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()};Y.prototype._stat=function(e,t){var n=this._makeAbs(e),r=e.slice(-1)==="/";if(e.length>this.maxLength)return t();if(!this.stat&&Us(this.cache,n)){var i=this.cache[n];if(Array.isArray(i)&&(i="DIR"),!r||i==="DIR")return t(null,i);if(r&&i==="FILE")return t()}var s,u=this.statCache[n];if(u!==void 0){if(u===!1)return t(null,u);var d=u.isDirectory()?"DIR":"FILE";return r&&d==="FILE"?t():t(null,d,u)}var h=this,p=Xs("stat\0"+n,D);p&&h.fs.lstat(n,p);function D(P,R){if(R&&R.isSymbolicLink())return h.fs.stat(n,function(C,E){C?h._stat2(e,n,null,R,t):h._stat2(e,n,C,E,t)});h._stat2(e,n,P,R,t)}};Y.prototype._stat2=function(e,t,n,r,i){if(n&&(n.code==="ENOENT"||n.code==="ENOTDIR"))return this.statCache[t]=!1,i();var s=e.slice(-1)==="/";if(this.statCache[t]=r,t.slice(-1)==="/"&&r&&!r.isDirectory())return i(null,!1,r);var u=!0;return r&&(u=r.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||u,s&&u==="FILE"?i():i(null,u,r)}});var yl=O((Wv,pl)=>{var re=require("assert"),hl=require("path"),ll=require("fs"),En;try{En=Ws()}catch{}var Rp={nosort:!0,silent:!0},Js=0,ur=process.platform==="win32",gl=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(n=>{e[n]=e[n]||ll[n],n=n+"Sync",e[n]=e[n]||ll[n]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,e.glob===!1&&(e.disableGlob=!0),e.disableGlob!==!0&&En===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||Rp},Qs=(e,t,n)=>{typeof t=="function"&&(n=t,t={}),re(e,"rimraf: missing path"),re.equal(typeof e,"string","rimraf: path should be a string"),re.equal(typeof n,"function","rimraf: callback function required"),re(t,"rimraf: invalid options argument provided"),re.equal(typeof t,"object","rimraf: options should be object"),gl(t);let r=0,i=null,s=0,u=h=>{i=i||h,--s===0&&n(i)},d=(h,p)=>{if(h)return n(h);if(s=p.length,s===0)return n();p.forEach(D=>{let P=R=>{if(R){if((R.code==="EBUSY"||R.code==="ENOTEMPTY"||R.code==="EPERM")&&r<t.maxBusyTries)return r++,setTimeout(()=>Ks(D,t,P),r*100);if(R.code==="EMFILE"&&Js<t.emfileWait)return setTimeout(()=>Ks(D,t,P),Js++);R.code==="ENOENT"&&(R=null)}Js=0,u(R)};Ks(D,t,P)})};if(t.disableGlob||!En.hasMagic(e))return d(null,[e]);t.lstat(e,(h,p)=>{if(!h)return d(null,[e]);En(e,t.glob,d)})},Ks=(e,t,n)=>{re(e),re(t),re(typeof n=="function"),t.lstat(e,(r,i)=>{if(r&&r.code==="ENOENT")return n(null);if(r&&r.code==="EPERM"&&ur&&dl(e,t,r,n),i&&i.isDirectory())return pi(e,t,r,n);t.unlink(e,s=>{if(s){if(s.code==="ENOENT")return n(null);if(s.code==="EPERM")return ur?dl(e,t,s,n):pi(e,t,s,n);if(s.code==="EISDIR")return pi(e,t,s,n)}return n(s)})})},dl=(e,t,n,r)=>{re(e),re(t),re(typeof r=="function"),t.chmod(e,438,i=>{i?r(i.code==="ENOENT"?null:n):t.stat(e,(s,u)=>{s?r(s.code==="ENOENT"?null:n):u.isDirectory()?pi(e,t,n,r):t.unlink(e,r)})})},fl=(e,t,n)=>{re(e),re(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw n}let r;try{r=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw n}r.isDirectory()?yi(e,t,n):t.unlinkSync(e)},pi=(e,t,n,r)=>{re(e),re(t),re(typeof r=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?wp(e,t,r):i&&i.code==="ENOTDIR"?r(n):r(i)})},wp=(e,t,n)=>{re(e),re(t),re(typeof n=="function"),t.readdir(e,(r,i)=>{if(r)return n(r);let s=i.length;if(s===0)return t.rmdir(e,n);let u;i.forEach(d=>{Qs(hl.join(e,d),t,h=>{if(!u){if(h)return n(u=h);--s===0&&t.rmdir(e,n)}})})})},ml=(e,t)=>{t=t||{},gl(t),re(e,"rimraf: missing path"),re.equal(typeof e,"string","rimraf: path should be a string"),re(t,"rimraf: missing options"),re.equal(typeof t,"object","rimraf: options should be object");let n;if(t.disableGlob||!En.hasMagic(e))n=[e];else try{t.lstatSync(e),n=[e]}catch{n=En.sync(e,t.glob)}if(!!n.length)for(let r=0;r<n.length;r++){let i=n[r],s;try{s=t.lstatSync(i)}catch(u){if(u.code==="ENOENT")return;u.code==="EPERM"&&ur&&fl(i,t,u)}try{s&&s.isDirectory()?yi(i,t,null):t.unlinkSync(i)}catch(u){if(u.code==="ENOENT")return;if(u.code==="EPERM")return ur?fl(i,t,u):yi(i,t,u);if(u.code!=="EISDIR")throw u;yi(i,t,u)}}},yi=(e,t,n)=>{re(e),re(t);try{t.rmdirSync(e)}catch(r){if(r.code==="ENOENT")return;if(r.code==="ENOTDIR")throw n;(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM")&&kp(e,t)}},kp=(e,t)=>{re(e),re(t),t.readdirSync(e).forEach(i=>ml(hl.join(e,i),t));let n=ur?100:1,r=0;do{let i=!0;try{let s=t.rmdirSync(e,t);return i=!1,s}finally{if(++r<n&&i)continue}}while(!0)};pl.exports=Qs;Qs.sync=ml});var Il=O((Hv,Tt)=>{var Re=require("fs"),na=require("os"),xe=require("path"),vl=require("crypto"),mt={fs:Re.constants,os:na.constants},Dl=yl(),bl="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Rl=/XXXXXX/,Tp=3,wl=(mt.O_CREAT||mt.fs.O_CREAT)|(mt.O_EXCL||mt.fs.O_EXCL)|(mt.O_RDWR||mt.fs.O_RDWR),Sp=na.platform()==="win32",Pp=mt.EBADF||mt.os.errno.EBADF,Cp=mt.ENOENT||mt.os.errno.ENOENT,kl=448,Tl=384,qp="exit",On=[],Sl=Re.rmdirSync.bind(Re),Pl=Dl.sync,Cl=!1;function ra(e,t){let n=Nn(e,t),r=n[0],i=n[1];try{Nl(r)}catch(u){return i(u)}let s=r.tries;(function u(){try{let d=Ol(r);Re.stat(d,function(h){if(!h)return s-- >0?u():i(new Error("Could not get a unique tmp filename, max tries reached "+d));i(null,d)})}catch(d){i(d)}})()}function ia(e){let t=Nn(e),n=t[0];Nl(n);let r=n.tries;do{let i=Ol(n);try{Re.statSync(i)}catch{return i}}while(r-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function Ep(e,t){let n=Nn(e,t),r=n[0],i=n[1];ra(r,function(u,d){if(u)return i(u);Re.open(d,wl,r.mode||Tl,function(p,D){if(p)return i(p);if(r.discardDescriptor)return Re.close(D,function(R){return i(R,d,void 0,Zs(d,-1,r,!1))});{let P=r.discardDescriptor||r.detachDescriptor;i(null,d,D,Zs(d,P?-1:D,r,!1))}})})}function Op(e){let t=Nn(e),n=t[0],r=n.discardDescriptor||n.detachDescriptor,i=ia(n);var s=Re.openSync(i,wl,n.mode||Tl);return n.discardDescriptor&&(Re.closeSync(s),s=void 0),{name:i,fd:s,removeCallback:Zs(i,r?-1:s,n,!0)}}function Np(e,t){let n=Nn(e,t),r=n[0],i=n[1];ra(r,function(u,d){if(u)return i(u);Re.mkdir(d,r.mode||kl,function(p){if(p)return i(p);i(null,d,ql(d,r,!1))})})}function Mp(e){let t=Nn(e),n=t[0],r=ia(n);return Re.mkdirSync(r,n.mode||kl),{name:r,removeCallback:ql(r,n,!0)}}function jp(e,t){let n=function(r){if(r&&!ta(r))return t(r);t()};0<=e[0]?Re.close(e[0],function(){Re.unlink(e[1],n)}):Re.unlink(e[1],n)}function Ip(e){let t=null;try{0<=e[0]&&Re.closeSync(e[0])}catch(n){if(!Lp(n)&&!ta(n))throw n}finally{try{Re.unlinkSync(e[1])}catch(n){ta(n)||(t=n)}}if(t!==null)throw t}function Zs(e,t,n,r){let i=vi(Ip,[t,e],r),s=vi(jp,[t,e],r,i);return n.keep||On.unshift(i),r?i:s}function ql(e,t,n){let r=t.unsafeCleanup?Dl:Re.rmdir.bind(Re),i=t.unsafeCleanup?Pl:Sl,s=vi(i,e,n),u=vi(r,e,n,s);return t.keep||On.unshift(s),n?s:u}function vi(e,t,n,r){let i=!1;return function s(u){if(!i){let d=r||s,h=On.indexOf(d);return h>=0&&On.splice(h,1),i=!0,n||e===Sl||e===Pl?e(t):e(t,u||function(){})}}}function Fp(){if(!!Cl)for(;On.length;)try{On[0]()}catch{}}function _l(e){let t=[],n=null;try{n=vl.randomBytes(e)}catch{n=vl.pseudoRandomBytes(e)}for(var r=0;r<e;r++)t.push(bl[n[r]%bl.length]);return t.join("")}function El(e){return e===null||Ie(e)||!e.trim()}function Ie(e){return typeof e>"u"}function Nn(e,t){if(typeof e=="function")return[{},e];if(Ie(e))return[{},t];let n={};for(let r of Object.getOwnPropertyNames(e))n[r]=e[r];return[n,t]}function Ol(e){let t=e.tmpdir;if(!Ie(e.name))return xe.join(t,e.dir,e.name);if(!Ie(e.template))return xe.join(t,e.dir,e.template).replace(Rl,_l(6));let n=[e.prefix?e.prefix:"tmp","-",process.pid,"-",_l(12),e.postfix?"-"+e.postfix:""].join("");return xe.join(t,e.dir,n)}function Nl(e){e.tmpdir=jl(e);let t=e.tmpdir;if(Ie(e.name)||Ys(e.name,"name",t),Ie(e.dir)||Ys(e.dir,"dir",t),!Ie(e.template)&&(Ys(e.template,"template",t),!e.template.match(Rl)))throw new Error(`Invalid template, found "${e.template}".`);if(!Ie(e.tries)&&isNaN(e.tries)||e.tries<0)throw new Error(`Invalid tries, found "${e.tries}".`);e.tries=Ie(e.name)?e.tries||Tp:1,e.keep=!!e.keep,e.detachDescriptor=!!e.detachDescriptor,e.discardDescriptor=!!e.discardDescriptor,e.unsafeCleanup=!!e.unsafeCleanup,e.dir=Ie(e.dir)?"":xe.relative(t,ea(e.dir,t)),e.template=Ie(e.template)?void 0:xe.relative(t,ea(e.template,t)),e.template=El(e.template)?void 0:xe.relative(e.dir,e.template),e.name=Ie(e.name)?void 0:oa(e.name),e.prefix=Ie(e.prefix)?"":e.prefix,e.postfix=Ie(e.postfix)?"":e.postfix}function ea(e,t){let n=oa(e);return n.startsWith(t)?xe.resolve(n):xe.resolve(xe.join(t,n))}function oa(e){return El(e)?e:e.replace(/["']/g,"")}function Ys(e,t,n){if(t==="name"){if(xe.isAbsolute(e))throw new Error(`${t} option must not contain an absolute path, found "${e}".`);let r=xe.basename(e);if(r===".."||r==="."||r!==e)throw new Error(`${t} option must not contain a path, found "${e}".`)}else{if(xe.isAbsolute(e)&&!e.startsWith(n))throw new Error(`${t} option must be relative to "${n}", found "${e}".`);let r=ea(e,n);if(!r.startsWith(n))throw new Error(`${t} option must be relative to "${n}", found "${r}".`)}}function Lp(e){return Ml(e,-Pp,"EBADF")}function ta(e){return Ml(e,-Cp,"ENOENT")}function Ml(e,t,n){return Sp?e.code===n:e.code===n&&e.errno===t}function xp(){Cl=!0}function jl(e){return xe.resolve(oa(e&&e.tmpdir||na.tmpdir()))}process.addListener(qp,Fp);Object.defineProperty(Tt.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return jl()}});Tt.exports.dir=Np;Tt.exports.dirSync=Mp;Tt.exports.file=Ep;Tt.exports.fileSync=Op;Tt.exports.tmpName=ra;Tt.exports.tmpNameSync=ia;Tt.exports.setGracefulCleanup=xp});var pt=ji(pu()),Ll=ji(vu()),sa=ji(ye()),Al=require("node:util"),Ue=(0,pt.createConnection)(pt.ProposedFeatures.all),_i=new pt.TextDocuments(Ll.TextDocument),lr=!1,aa=!1,xl=!1,Ap=require("fs"),Wp=Il(),Gv=require("path"),Hp=require("node:util"),$p=Hp.promisify(require("node:child_process").exec),Fl=Wp.fileSync();Ue.onInitialize(e=>{let t=e.capabilities;lr=!!(t.workspace&&!!t.workspace.configuration),aa=!!(t.workspace&&!!t.workspace.workspaceFolders),xl=!!(t.textDocument&&t.textDocument.publishDiagnostics&&t.textDocument.publishDiagnostics.relatedInformation);let n={capabilities:{textDocumentSync:pt.TextDocumentSyncKind.Incremental}};return aa&&(n.capabilities.workspace={workspaceFolders:{supported:!0}}),console.log("LPython language server initialized"),n});Ue.onInitialized(()=>{lr&&Ue.client.register(pt.DidChangeConfigurationNotification.type,void 0),aa&&Ue.workspace.onDidChangeWorkspaceFolders(e=>{Ue.console.log("Workspace folder change event received.")})});var Wl={maxNumberOfProblems:1e3,compiler:{executablePath:"/home/ankita/Documents/Internships/GSI/lpython/src/bin/lpython"}},Hl=Wl,bi=new Map;Ue.onDidChangeConfiguration(e=>{console.log("onDidChangeConfiguration, hasConfigurationCapability: "+lr),console.log("change is "+JSON.stringify(e)),lr?bi.clear():Hl=e.settings.LPythonLanguageServer||Wl,_i.all().forEach($l)});function zp(e){if(!lr)return Promise.resolve(Hl);let t=bi.get(e);return t||(t=Ue.workspace.getConfiguration({scopeUri:e,section:"LPythonLanguageServer"}),bi.set(e,t)),t}_i.onDidClose(e=>{bi.delete(e.document.uri)});function Bp(e,t){let n=!1,r,i=()=>{r==null?n=!1:(e(...r),r=null,setTimeout(i,t))};return(...s)=>{if(n){r=s;return}e(...s),n=!0,setTimeout(i,t)}}_i.onDidChangeContent((()=>{let e=Bp($l,500);return t=>{e(t.document)}})());async function Gp(e,t,n){try{Ap.writeFileSync(Fl.name,e)}catch(i){console.log(i)}let r;try{r=(await $p(`/home/ankita/Documents/Internships/GSI/lpython/src/bin/lpython --show-errors ${Fl.name}`)).stdout}catch(i){r=i.stdout,i.signal!=null?(console.log("compile failed: "),console.log(i)):console.log("Error:",i)}return r}function Up(e){let t=new Al.TextEncoder().encode(e),n=[];for(let r=0;r<t.length;++r)t[r]==10&&n.push(r);return n}async function $l(e){if(console.time("validateTextDocument"),!xl){console.error("Trying to validate a document with no diagnostic capability");return}let t=await zp(e.uri),n=e.getText(),r=Up(n),i=await Gp(n,"--show-errors"+e.uri,t),s=JSON.parse(i),u=[];if(s.diagnostics){let d={severity:2,range:{start:sa.Position.create(s.diagnostics[0].range.start.line,s.diagnostics[0].range.start.character),end:sa.Position.create(s.diagnostics[0].range.end.line,s.diagnostics[0].range.end.character)},message:s.diagnostics[0].message,source:"lpyth"}}console.log(u),Ue.sendDiagnostics({uri:e.uri,diagnostics:u}),console.timeEnd("validateTextDocument")}Ue.onDidChangeWatchedFiles(e=>{Ue.console.log("We received an file change event")});_i.listen(Ue);Ue.listen();
/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */
//# sourceMappingURL=server.js.map
